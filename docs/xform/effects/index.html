<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/rex-design/blog/rss.xml" title="rex-design Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rex-design/blog/atom.xml" title="rex-design Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9XMWYPJLZN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9XMWYPJLZN",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="rex-design" href="/rex-design/opensearch.xml"><title data-react-helmet="true">xform 联动 | rex-design</title><meta data-react-helmet="true" property="og:url" content="https://github.com/alibaba/rex-design/rex-design/docs/xform/effects"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="xform 联动 | rex-design"><meta data-react-helmet="true" name="description" content="在 xform 中，表单联动主要依赖 mobx reaction &amp; computed 这两项能力。如果你熟悉 mobx，你可以很快地上手 xform 中的联动。"><meta data-react-helmet="true" property="og:description" content="在 xform 中，表单联动主要依赖 mobx reaction &amp; computed 这两项能力。如果你熟悉 mobx，你可以很快地上手 xform 中的联动。"><link data-react-helmet="true" rel="shortcut icon" href="/rex-design/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://github.com/alibaba/rex-design/rex-design/docs/xform/effects"><link data-react-helmet="true" rel="alternate" href="https://github.com/alibaba/rex-design/rex-design/docs/xform/effects" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/alibaba/rex-design/rex-design/docs/xform/effects" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/rex-design/assets/css/styles.1ef83756.css">
<link rel="stylesheet" href="/rex-design/assets/css/main.b488b320.css">
<link rel="stylesheet" href="/rex-design/assets/css/1be78505.afd06960.css">
<link rel="stylesheet" href="/rex-design/assets/css/90.a4fcbeae.css">
<link rel="preload" href="/rex-design/assets/js/styles.0c915a9f.js" as="script">
<link rel="preload" href="/rex-design/assets/js/runtime~main.a877fc9f.js" as="script">
<link rel="preload" href="/rex-design/assets/js/main.1ea75e26.js" as="script">
<link rel="preload" href="/rex-design/assets/js/common.7bde2b1e.js" as="script">
<link rel="preload" href="/rex-design/assets/js/2.bd19487b.js" as="script">
<link rel="preload" href="/rex-design/assets/js/3.147b5ab2.js" as="script">
<link rel="preload" href="/rex-design/assets/js/1be78505.9ad9709e.js" as="script">
<link rel="preload" href="/rex-design/assets/js/90.6b41a23a.js" as="script">
<link rel="preload" href="/rex-design/assets/js/935f2afb.44593b8b.js" as="script">
<link rel="preload" href="/rex-design/assets/js/17896441.621baa3a.js" as="script">
<link rel="preload" href="/rex-design/assets/js/4.317fbb2d.js" as="script">
<link rel="preload" href="/rex-design/assets/js/5.4e2eb9b9.js" as="script">
<link rel="preload" href="/rex-design/assets/js/8270c60e.de32927a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_2vEk">Skip to main content</a></div><div class="announcementBar_258Q" style="background-color:#fffae6;color:#5c3b0d" role="banner"><div class="announcementBarContent_3N_j">ReX Design alpha 版本迭代中，敬请期待。所有组件支持S和L两种尺寸的切换，S号尺寸目前只支持在移动端查看，L号尺寸只支持在PC端查看，请根据需要进行体验。</div></div><nav class="navbar navbar--fixed-top navbarHideable_rQcN"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rex-design/"><img src="https://img.alicdn.com/imgextra/i4/O1CN01iZY8c61ixQeIcbbCE_!!6000000004479-55-tps-244-21.svg" alt="rex design Logo" class="themedImage_2dpp themedImage--light_2yWi navbar__logo"><img src="https://img.alicdn.com/imgextra/i4/O1CN01iZY8c61ixQeIcbbCE_!!6000000004479-55-tps-244-21.svg" alt="rex design Logo" class="themedImage_2dpp themedImage--dark_2O_X navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rex-design/docs">组件</a><a class="navbar__item navbar__link" href="/rex-design/design">设计</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/alibaba/rex-design" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle displayOnlyInLargeViewport_2YK8 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_2wcW">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_2wcW">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/rex-design/"><img src="https://img.alicdn.com/imgextra/i4/O1CN01iZY8c61ixQeIcbbCE_!!6000000004479-55-tps-244-21.svg" alt="rex design Logo" class="themedImage_2dpp themedImage--light_2yWi navbar__logo"><img src="https://img.alicdn.com/imgextra/i4/O1CN01iZY8c61ixQeIcbbCE_!!6000000004479-55-tps-244-21.svg" alt="rex design Logo" class="themedImage_2dpp themedImage--dark_2O_X navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/rex-design/docs">组件</a></li><li class="menu__list-item"><a class="menu__link" href="/rex-design/design">设计</a></li><li class="menu__list-item"><a href="https://github.com/alibaba/rex-design" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_2hm3"><div class="docSidebarContainer_mF8j" role="complementary"><div class="sidebar_1woV sidebarWithHideableNavbar_VqtV"><a tabindex="-1" class="sidebarLogo_100a" href="/rex-design/"><img src="https://img.alicdn.com/imgextra/i4/O1CN01iZY8c61ixQeIcbbCE_!!6000000004479-55-tps-244-21.svg" alt="rex design Logo" class="themedImage_2dpp themedImage--light_2yWi"><img src="https://img.alicdn.com/imgextra/i4/O1CN01iZY8c61ixQeIcbbCE_!!6000000004479-55-tps-244-21.svg" alt="rex design Logo" class="themedImage_2dpp themedImage--dark_2O_X"></a><div class="switcher_sOwv"><div class="switch_2u5n"><button>S</button><button class="active_2ElW">L</button></div></div><div class="menu menu--responsive menu_1Sya"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1lkq" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/rex-design/docs/">开始使用</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">组件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">布局</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/box">Box 盒子</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/flex">Flex 弹性布局盒子</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/grid">Grid 网格布局盒子</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/group">Group 组合</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/text">Text 文本</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">导航</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/breadcrumb">Breadcrumb 面包屑</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/pagination">Pagination 分页器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/steps">Steps 步骤条</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/menu">Menu 菜单</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/tabs">Tabs 选项卡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/timeline">Timeline 时间轴</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">通用</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/action-list">ActionList 快捷操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/badge">Badge 提示框</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/button">Button 按钮</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/confirm">Confirm 二次确认气泡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/description">Description 内容详情</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/link">Link 链接</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/loading">Loading 加载中</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/icon">Icon 图标</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/image">Image 图片</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/progress">Progress 进度条</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/notice">Notice 提示框</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/tree">Tree 树</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">表单</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/checkbox">Checkbox 复选框</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/date-picker">DatePicker 日期选择</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/time-picker">TimePicker 时间选择</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/file-picker">FilePicker 文件选择器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/input">Input 输入框</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/number-input">NumberInput 数字输入</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/radio">Radio 单选按钮</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/range">Range 区间</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/switch">Switch 开关</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/textarea">Textarea 多行文本域</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/select">Select 选择器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/tree-select">TreeSelect 树形选择</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/search">Search 搜索</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">浮层</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/overlay">Overlay 通用浮层</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/popup">Popup 弹层</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/tooltip">Tooltip 文字提示</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/dialog">Dialog 对话框</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/drawer">Drawer 抽屉</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/position">Position 定位</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/toaster">Toaster 吐司提示</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/affix">Affix 固钉</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">表格</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/base-table">BaseTable 基础表格</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/pro-table">ProTable 进阶表格</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">@rexd/xform</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/xform/usage">xform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/xform/advanced">xform 进阶</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/rex-design/docs/xform/effects">xform 联动</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/xform/core">xform core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rex-design/docs/xform/api">API</a></li></ul></li></ul></div></div></div><main class="docMainContainer_luF8"><div class="container padding-vert--lg docItemWrapper_12Bq"><div class="row"><div style="width:0" class="col undefined"><div class="docItemContainer_1EXp"><article><header><h1 class="docTitle_1vX4">xform 联动</h1></header><div class="markdown"><p>在 xform 中，表单联动主要依赖 mobx <a href="https://mobx.js.org/reactions.html" target="_blank" rel="noopener noreferrer">reaction</a> &amp; <a href="https://mobx.js.org/computeds.html" target="_blank" rel="noopener noreferrer">computed</a> 这两项能力。如果你熟悉 mobx，你可以很快地上手 xform 中的联动。</p><p>在 mobx 的基础上，xform 额外提供了 Form.Effect 与 createAsyncValue，前者用于简化 reaction 的书写，后者用于处理异步数据源。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="field-写法"></a>field 写法<a class="hash-link" href="#field-写法" title="Direct link to heading">#</a></h2><p>书写联动关系时，我们推荐使用 <a href="/rex-design/docs/xform/api#field"><code>field</code></a> 来代替 <code>name</code> 用法. field 能更好地支持 TypeScript，避免数据索引书写错误（依赖 TS 4.1 <a href="https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html" target="_blank" rel="noopener noreferrer">Template Literal Types</a>）或数据类型错误。</p><p>FormItem 同时支持 name 与 field 用法：</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// name 写法</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">prov</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// field 写法</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><p>Form.Effect watch 也同样支持 field：</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// name 写法</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">prov</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">    model</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">setValue</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">  </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// field 写法</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cities </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">    cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">  </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="联动"></a>联动<a class="hash-link" href="#联动" title="Direct link to heading">#</a></h2><p>接下来，让我们通过几个示例来学习 xform 中的联动。 下面的示例将以「省份-城市-行政区」三级级联选择为基础，介绍如何用 xform 去书写不同类型的表单联动。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="同步计算状态"></a>同步计算状态<a class="hash-link" href="#同步计算状态" title="Direct link to heading">#</a></h3><p>这个例子只会用到省份和城市两级，联动要求如下：</p><ul><li>用户选择省份后，展示城市下拉框；</li><li>切换省份时，城市下拉框需要切换为相应的数据源（数据源可以被同步获取）</li></ul><p>对于这类 <strong>可以被同步计算的状态</strong>，我们 <strong>使用 mobx computed 或直接在 react render 函数中书写计算关系</strong>：</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cities </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 直接使用 &amp;&amp; 表示「省份字段非空时，渲染城市下拉框」*/</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain">prov</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">multiSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">城市(多选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript comment" style="color:rgb(0, 128, 0)">// 直接计算并设置城市数据源</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">find</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">===</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">      </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><p>实际示例如下：</p><div class="playground-preview debvbX" data-story="Example1"><div class="playground-live-preview"><div style="--label-width:120px;--control-width:320px;--form-item-gap:12px" class="sc-fmdNqN hyACbC horizontal"><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">省份(单选)</span></div><div class="form-item-control"><div class="sc-dvXYtj iduHXF rex-solid" tabindex="0"><span class="rex-select-placeholder">请选择</span><div class="rex-select-trigger-controls"><svg width="14" height="14" fill="transparent" class="rex-select-arrow" viewBox="0 0 14 14"><path stroke="#8C8C8C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.33333333 4.66666667L7 9.33333333 11.6666667 4.66666667"></path></svg></div></div><div class="help">选择一个省份后，将显示城市下拉框</div></div></div></div></div></div><div class="sc-eHEENL gAtBhL"><span class="hint">非内联模式</span><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M853.333 224H800v-53.333C800 130.133 765.867 96 725.333 96H170.667C130.133 96 96 130.133 96 170.667v554.666C96 765.867 130.133 800 170.667 800H224v53.333C224 893.867 258.133 928 298.667 928h554.666C893.867 928 928 893.867 928 853.333V298.667C928 258.133 893.867 224 853.333 224zM160 725.333V170.667c0-6.4 4.267-10.667 10.667-10.667h554.666c6.4 0 10.667 4.267 10.667 10.667v554.666c0 6.4-4.267 10.667-10.667 10.667H170.667c-6.4 0-10.667-4.267-10.667-10.667zm704 128c0 6.4-4.267 10.667-10.667 10.667H298.667c-6.4 0-10.667-4.267-10.667-10.667V800h437.333C765.867 800 800 765.867 800 725.333V288h53.333c6.4 0 10.667 4.267 10.667 10.667v554.666zM576 416h-96v-96c0-17.067-14.933-32-32-32s-32 14.933-32 32v96h-96c-17.067 0-32 14.933-32 32s14.933 32 32 32h96v96c0 17.067 14.933 32 32 32s32-14.933 32-32v-96h96c17.067 0 32-14.933 32-32s-14.933-32-32-32z"></path></svg></span></button><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button" style="margin-left:4px"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M322.133 296.533c-12.8-12.8-32-12.8-44.8 0l-192 192c-12.8 12.8-12.8 32 0 44.8l192 192c6.4 6.4 14.934 8.534 23.467 8.534s17.067-2.134 23.467-8.534c12.8-12.8 12.8-32 0-44.8L151.467 512 320 343.467c12.8-12.8 12.8-34.134 2.133-46.934zm618.667 192l-192-192c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l168.533 168.534L704 678.4c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533l192-192c8.534-8.533 8.534-29.867-2.133-42.667zM622.933 76.8c-17.066-4.267-34.133 6.4-38.4 23.467L366.933 902.4c-4.266 17.067 6.4 34.133 23.467 38.4 2.133 0 6.4 2.133 8.533 2.133 14.934 0 27.734-8.533 29.867-23.466L644.267 115.2c4.266-17.067-4.267-34.133-21.334-38.4z"></path></svg></span></button></div><div class="sc-biJonm ernndx playground-editor-wrapper" style="display:none"><div class="playground-editor" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:var(--ifm-font-family-monospace);color:#000000;background-color:#ffffff;font-size:12px"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">// 以下变量从其他模块中引入：
//  FormModel, observer, Form, FormItem

const model1 = new FormModel({ prov: &#x27;&#x27;, cities: [] });

const ALL_CITIES = [
  { prov: &#x27;浙江&#x27;, cities: &#x27;杭州、绍兴、宁波、嘉兴、其他&#x27;.split(&#x27;、&#x27;) },
  { prov: &#x27;江苏&#x27;, cities: &#x27;南京、常州、镇江、苏州、其他&#x27;.split(&#x27;、&#x27;) },
  { prov: &#x27;福建&#x27;, cities: &#x27;厦门、福州、莆田、三明、其他&#x27;.split(&#x27;、&#x27;) },
];

const Example1_inner = observer(() =&gt; {
  const prov = model1.getField(&#x27;prov&#x27;);
  const cities = model1.getField(&#x27;cities&#x27;);

  return (
    &lt;Form model={model1}&gt;
      &lt;FormItem
        component=&quot;singleSelect&quot;
        label=&quot;省份(单选)&quot;
        help=&quot;选择一个省份后，将显示城市下拉框&quot;
        field={prov}
        componentProps={{
          hasClear: true,
          dataSource: ALL_CITIES.map((item) =&gt; item.prov),
        }}
      /&gt;
      {prov.value &amp;&amp; (
        &lt;FormItem
          component=&quot;multiSelect&quot;
          label=&quot;城市(多选)&quot;
          field={cities}
          componentProps={{
            hasClear: true,
            dataSource: ALL_CITIES.find((item) =&gt; item.prov === prov.value).cities,
          }}
        /&gt;
      )}
    &lt;/Form&gt;
  );
});

const Example1 = () =&gt; &lt;Example1_inner /&gt;;

render(&lt;Example1 /&gt;)</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// 以下变量从其他模块中引入：</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//  FormModel, observer, Form, FormItem</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> model1 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FormModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;浙江&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;杭州、绍兴、宁波、嘉兴、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;江苏&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;南京、常州、镇江、苏州、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;福建&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;厦门、福州、莆田、三明、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> Example1_inner </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">observer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cities </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">model</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">model1</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">singleSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">省份(单选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">help</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">选择一个省份后，将显示城市下拉框</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">map</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain">prov</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">multiSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">城市(多选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">            hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">            dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">find</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">===</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(0, 0, 255)">Example1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Example1_inner</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">render</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Example1</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="同步状态修改"></a>同步状态修改<a class="hash-link" href="#同步状态修改" title="Direct link to heading">#</a></h3><p>在上面例子的基础上，我们添加一个新的联动要求：</p><ul><li>每当省份切换时，清空城市选择</li></ul><p>对于这类 <strong>「当 A 字段的值发生变化时，更新 B 字段的值」</strong> 的联动，我们需要用到 <a href="/rex-design/docs/xform/api#formeffect"><code>&lt;Form.Effect /&gt;</code></a> 组件：</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cities </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">    cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">  </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><p>实际示例如下：</p><div class="playground-preview debvbX" data-story="Example2"><div class="playground-live-preview"><div style="--label-width:120px;--control-width:320px;--form-item-gap:12px" class="sc-fmdNqN hyACbC horizontal"><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">省份(单选)</span></div><div class="form-item-control"><div class="sc-dvXYtj iduHXF rex-solid" tabindex="0"><span class="rex-select-placeholder">请选择</span><div class="rex-select-trigger-controls"><svg width="14" height="14" fill="transparent" class="rex-select-arrow" viewBox="0 0 14 14"><path stroke="#8C8C8C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.33333333 4.66666667L7 9.33333333 11.6666667 4.66666667"></path></svg></div></div><div class="help">选择一个省份后，将显示城市下拉框；切换省份时，城市将被清空</div></div></div></div></div></div><div class="sc-eHEENL gAtBhL"><span class="hint">非内联模式</span><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M853.333 224H800v-53.333C800 130.133 765.867 96 725.333 96H170.667C130.133 96 96 130.133 96 170.667v554.666C96 765.867 130.133 800 170.667 800H224v53.333C224 893.867 258.133 928 298.667 928h554.666C893.867 928 928 893.867 928 853.333V298.667C928 258.133 893.867 224 853.333 224zM160 725.333V170.667c0-6.4 4.267-10.667 10.667-10.667h554.666c6.4 0 10.667 4.267 10.667 10.667v554.666c0 6.4-4.267 10.667-10.667 10.667H170.667c-6.4 0-10.667-4.267-10.667-10.667zm704 128c0 6.4-4.267 10.667-10.667 10.667H298.667c-6.4 0-10.667-4.267-10.667-10.667V800h437.333C765.867 800 800 765.867 800 725.333V288h53.333c6.4 0 10.667 4.267 10.667 10.667v554.666zM576 416h-96v-96c0-17.067-14.933-32-32-32s-32 14.933-32 32v96h-96c-17.067 0-32 14.933-32 32s14.933 32 32 32h96v96c0 17.067 14.933 32 32 32s32-14.933 32-32v-96h96c17.067 0 32-14.933 32-32s-14.933-32-32-32z"></path></svg></span></button><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button" style="margin-left:4px"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M322.133 296.533c-12.8-12.8-32-12.8-44.8 0l-192 192c-12.8 12.8-12.8 32 0 44.8l192 192c6.4 6.4 14.934 8.534 23.467 8.534s17.067-2.134 23.467-8.534c12.8-12.8 12.8-32 0-44.8L151.467 512 320 343.467c12.8-12.8 12.8-34.134 2.133-46.934zm618.667 192l-192-192c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l168.533 168.534L704 678.4c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533l192-192c8.534-8.533 8.534-29.867-2.133-42.667zM622.933 76.8c-17.066-4.267-34.133 6.4-38.4 23.467L366.933 902.4c-4.266 17.067 6.4 34.133 23.467 38.4 2.133 0 6.4 2.133 8.533 2.133 14.934 0 27.734-8.533 29.867-23.466L644.267 115.2c4.266-17.067-4.267-34.133-21.334-38.4z"></path></svg></span></button></div><div class="sc-biJonm ernndx playground-editor-wrapper" style="display:none"><div class="playground-editor" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:var(--ifm-font-family-monospace);color:#000000;background-color:#ffffff;font-size:12px"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">// 以下变量从其他模块中引入：
//  FormModel, observer, Form, FormItem

const model2 = new FormModel({ prov: &#x27;&#x27;, cities: [] });

const ALL_CITIES = [
  { prov: &#x27;浙江&#x27;, cities: &#x27;杭州、绍兴、宁波、嘉兴、其他&#x27;.split(&#x27;、&#x27;) },
  { prov: &#x27;江苏&#x27;, cities: &#x27;南京、常州、镇江、苏州、其他&#x27;.split(&#x27;、&#x27;) },
  { prov: &#x27;福建&#x27;, cities: &#x27;厦门、福州、莆田、三明、其他&#x27;.split(&#x27;、&#x27;) },
];

const Example2_inner = observer(() =&gt; {
  const prov = model2.getField(&#x27;prov&#x27;);
  const cities = model2.getField(&#x27;cities&#x27;);

  return (
    &lt;Form model={model2}&gt;
      &lt;FormItem
        component=&quot;singleSelect&quot;
        label=&quot;省份(单选)&quot;
        help=&quot;选择一个省份后，将显示城市下拉框；切换省份时，城市将被清空&quot;
        field={prov}
        componentProps={{
          hasClear: true,
          dataSource: ALL_CITIES.map((item) =&gt; item.prov),
        }}
      /&gt;
      {prov.value &amp;&amp; (
        &lt;FormItem
          component=&quot;multiSelect&quot;
          label=&quot;城市(多选)&quot;
          field={cities}
          componentProps={{
            hasClear: true,
            dataSource: ALL_CITIES.find((item) =&gt; item.prov === prov.value).cities,
          }}
        /&gt;
      )}
      &lt;Form.Effect
        watch={prov}
        effect={() =&gt; {
          cities.value = [];
        }}
      /&gt;
    &lt;/Form&gt;
  );
});

const Example2 = () =&gt; &lt;Example2_inner /&gt;;

render(&lt;Example2 /&gt;)</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// 以下变量从其他模块中引入：</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//  FormModel, observer, Form, FormItem</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> model2 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FormModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;浙江&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;杭州、绍兴、宁波、嘉兴、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;江苏&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;南京、常州、镇江、苏州、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;福建&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;厦门、福州、莆田、三明、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> Example2_inner </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">observer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cities </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">model</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">model2</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">singleSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">省份(单选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">help</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">选择一个省份后，将显示城市下拉框；切换省份时，城市将被清空</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">map</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain">prov</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">multiSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">城市(多选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">            hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">            dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">find</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">===</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(0, 0, 255)">Example2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Example2_inner</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">render</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Example2</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><code>&lt;Form.Effect /&gt;</code> 不仅支持 field，还支持 string、asyncValue、数组以及自定义函数，具体用法详见 <a href="/rex-design/docs/xform/api#formeffect">API</a>。除了修改另一个字段的值，你也可以在 effect 中执行任意的副作用，例如发起一个数据请求。</p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Effect 的组合</h5></div><div class="admonition-content"><p><code>&lt;Form.Effect /&gt;</code> 被设计为普通的 React 组件用法，意味着你可以像普通组件一样对 Form.Effect 进行封装：</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(0, 0, 255)">AutoCleanEffect</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token parameter"> trigger</span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token parameter"> target </span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">    </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">trigger</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">    </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">      target</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript keyword" style="color:rgb(0, 0, 255)">null</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">    </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// 每当省份发生变化时，自动清空城市字段</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">AutoCleanEffect</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">trigger</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">target</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="异步数据源"></a>异步数据源<a class="hash-link" href="#异步数据源" title="Direct link to heading">#</a></h3><p>考虑在很多实际业务中，子级下拉框的数据源来自于异步接口。这个例子中的表单联动需求变为：</p><ul><li>切换省份时，城市下拉框需要切换为相应的数据源</li><li>城市数据源需要异步加载，加载过程中添加 loading 效果</li></ul><p>我们可以通过 <a href="/rex-design/docs/xform/api#createasyncvalue"><code>createAsyncValue</code></a> 来创建异步数据源：</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> model3 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FormModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;浙江&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cityDataSource$ </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">createAsyncValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">fetchCityDataSourceByProvince</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prov</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">multiSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">城市(多选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">help</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cityDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">status </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">===</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;loading&#x27;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">?</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;loading...&#x27;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;&#x27;</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">  </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">    hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">    dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> cityDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">current</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">  </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><p><code>createAsyncValue</code> 会根据参数 fetcher 创建出一个 <a href="/rex-design/docs/xform/api#asyncvalue"><code>AsyncValue</code></a> 对象，当 <code>asyncValue.current</code> 被订阅时，fetcher 将被调用，其返回结果将作为 <code>asyncValue.current</code> 的值，而 <code>asyncValue.status</code> 会记录目前异步数据的加载状态（loading / ready / error)。</p><p>在 fetcher 的<strong>同步代码</strong>执行过程中，mobx 会进行<a href="https://mobx.js.org/understanding-reactivity.html" target="_blank" rel="noopener noreferrer">依赖收集</a>，每当其中的依赖发生变化时，fetcher 将会被重新执行，以使用最新的参数去获取异步数据。</p><p>实际示例如下：</p><div class="playground-preview debvbX" data-story="Example3"><div class="playground-live-preview"><div style="--label-width:120px;--control-width:320px;--form-item-gap:12px" class="sc-fmdNqN hyACbC horizontal"><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">省份(单选)</span></div><div class="form-item-control"><div class="sc-dvXYtj iduHXF rex-solid" tabindex="0"><span class="rex-select-value-preview">浙江</span><div class="rex-select-trigger-controls"><svg width="14" height="14" class="rex-select-clear"><path fill="#8C8C8C" fill-rule="nonzero" d="M7 13A6 6 0 117 1a6 6 0 010 12zM5.1 8.9h.6L7 7.6l1.3 1.3a.4.4 0 00.6-.6L7.6 7l1.3-1.3a.4.4 0 00-.6-.6L7 6.4 5.7 5.1a.4.4 0 00-.6.6L6.4 7 5.1 8.3V9z"></path></svg><svg width="14" height="14" fill="transparent" class="rex-select-arrow" viewBox="0 0 14 14"><path stroke="#8C8C8C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.33333333 4.66666667L7 9.33333333 11.6666667 4.66666667"></path></svg></div></div><div class="help">切换省份时，异步加载城市数据源</div></div></div><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">城市(多选)</span></div><div class="form-item-control"><div class="sc-dvXYtj iduHXF rex-solid" tabindex="0"><span class="rex-select-placeholder">请选择</span><div class="rex-select-trigger-controls"><svg width="14" height="14" fill="transparent" class="rex-select-arrow" viewBox="0 0 14 14"><path stroke="#8C8C8C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.33333333 4.66666667L7 9.33333333 11.6666667 4.66666667"></path></svg></div></div><div class="help"><span style="color:red">loading...</span></div></div></div></div></div></div><div class="sc-eHEENL gAtBhL"><span class="hint">非内联模式</span><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M853.333 224H800v-53.333C800 130.133 765.867 96 725.333 96H170.667C130.133 96 96 130.133 96 170.667v554.666C96 765.867 130.133 800 170.667 800H224v53.333C224 893.867 258.133 928 298.667 928h554.666C893.867 928 928 893.867 928 853.333V298.667C928 258.133 893.867 224 853.333 224zM160 725.333V170.667c0-6.4 4.267-10.667 10.667-10.667h554.666c6.4 0 10.667 4.267 10.667 10.667v554.666c0 6.4-4.267 10.667-10.667 10.667H170.667c-6.4 0-10.667-4.267-10.667-10.667zm704 128c0 6.4-4.267 10.667-10.667 10.667H298.667c-6.4 0-10.667-4.267-10.667-10.667V800h437.333C765.867 800 800 765.867 800 725.333V288h53.333c6.4 0 10.667 4.267 10.667 10.667v554.666zM576 416h-96v-96c0-17.067-14.933-32-32-32s-32 14.933-32 32v96h-96c-17.067 0-32 14.933-32 32s14.933 32 32 32h96v96c0 17.067 14.933 32 32 32s32-14.933 32-32v-96h96c17.067 0 32-14.933 32-32s-14.933-32-32-32z"></path></svg></span></button><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button" style="margin-left:4px"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M322.133 296.533c-12.8-12.8-32-12.8-44.8 0l-192 192c-12.8 12.8-12.8 32 0 44.8l192 192c6.4 6.4 14.934 8.534 23.467 8.534s17.067-2.134 23.467-8.534c12.8-12.8 12.8-32 0-44.8L151.467 512 320 343.467c12.8-12.8 12.8-34.134 2.133-46.934zm618.667 192l-192-192c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l168.533 168.534L704 678.4c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533l192-192c8.534-8.533 8.534-29.867-2.133-42.667zM622.933 76.8c-17.066-4.267-34.133 6.4-38.4 23.467L366.933 902.4c-4.266 17.067 6.4 34.133 23.467 38.4 2.133 0 6.4 2.133 8.533 2.133 14.934 0 27.734-8.533 29.867-23.466L644.267 115.2c4.266-17.067-4.267-34.133-21.334-38.4z"></path></svg></span></button></div><div class="sc-biJonm ernndx playground-editor-wrapper" style="display:none"><div class="playground-editor" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:var(--ifm-font-family-monospace);color:#000000;background-color:#ffffff;font-size:12px"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">// 以下变量从其他模块中引入：
//  FormModel, createAsyncValue, observer, Form, FormItem

const model3 = new FormModel({ prov: &#x27;浙江&#x27;, cities: [] });

const ALL_CITIES = [
  { prov: &#x27;浙江&#x27;, cities: &#x27;杭州、绍兴、宁波、嘉兴、其他&#x27;.split(&#x27;、&#x27;) },
  { prov: &#x27;江苏&#x27;, cities: &#x27;南京、常州、镇江、苏州、其他&#x27;.split(&#x27;、&#x27;) },
  { prov: &#x27;福建&#x27;, cities: &#x27;厦门、福州、莆田、三明、其他&#x27;.split(&#x27;、&#x27;) },
];

const delay = (ms) =&gt;
  new Promise((resolve) =&gt; {
    setTimeout(resolve, ms);
  });

const cityDataSource$ = createAsyncValue(
  async () =&gt; {
    // 依赖收集需要发生在同步代码块中
    const prov = model3.getValue(&#x27;prov&#x27;);

    // 根据省份拉取城市列表， 2000ms 延迟用于模拟实际情况
    await delay(2000);
    return ALL_CITIES.find((item) =&gt; item.prov === prov).cities;
  },
  /* 这个空数组表示城市数据源的初始值 */ [],
);

const Example3_inner = observer(() =&gt; {
  const prov = model3.getField(&#x27;prov&#x27;);
  const cities = model3.getField(&#x27;cities&#x27;);

  return (
    &lt;Form model={model3}&gt;
      &lt;FormItem
        component=&quot;singleSelect&quot;
        label=&quot;省份(单选)&quot;
        help=&quot;切换省份时，异步加载城市数据源&quot;
        field={prov}
        componentProps={{
          hasClear: true,
          dataSource: ALL_CITIES.map((item) =&gt; item.prov),
        }}
      /&gt;
      &lt;FormItem
        component=&quot;multiSelect&quot;
        label=&quot;城市(多选)&quot;
        field={cities}
        help={cityDataSource$.status === &#x27;loading&#x27; ? &lt;span style={{ color: &#x27;red&#x27; }}&gt;loading...&lt;/span&gt; : &#x27;&#x27;}
        componentProps={{
          hasClear: true,
          dataSource: cityDataSource$.current,
        }}
      /&gt;
      &lt;Form.Effect
        watch={prov}
        effect={() =&gt; {
          cities.value = [];
        }}
      /&gt;
    &lt;/Form&gt;
  );
});

const Example3 = () =&gt; &lt;Example3_inner /&gt;;

render(&lt;Example3 /&gt;)</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// 以下变量从其他模块中引入：</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//  FormModel, createAsyncValue, observer, Form, FormItem</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> model3 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FormModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;浙江&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;浙江&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;杭州、绍兴、宁波、嘉兴、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;江苏&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;南京、常州、镇江、苏州、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;福建&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;厦门、福州、莆田、三明、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(0, 0, 255)">delay</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">ms</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Promise</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">resolve</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cityDataSource$ </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">createAsyncValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// 依赖收集需要发生在同步代码块中</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// 根据省份拉取城市列表， 2000ms 延迟用于模拟实际情况</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">delay</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">2000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">find</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">prov </span><span class="token operator" style="color:rgb(0, 0, 0)">===</span><span class="token plain"> prov</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">cities</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">/* 这个空数组表示城市数据源的初始值 */</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> Example3_inner </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">observer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cities </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">model</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">model3</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">singleSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">省份(单选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">help</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">切换省份时，异步加载城市数据源</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">map</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">multiSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">城市(多选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">field</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">help</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cityDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">status </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">===</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;loading&#x27;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">?</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)">span</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag attr-name" style="color:rgb(255, 0, 0)">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> color</span><span class="token tag script language-javascript tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;red&#x27;</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">loading</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">...</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)">span</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;&#x27;</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> cityDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">current</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(0, 0, 255)">Example3</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Example3_inner</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">render</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Example3</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>xform createAsyncValue 参考了 <a href="https://recoiljs.org/docs/api-reference/core/selector#asynchronous-selectors" target="_blank" rel="noopener noreferrer">recoil async selector</a>。 允许开发者使用同步的代码来描述一个异步函数的返回结果，非常适合抽象表单中的异步下拉数据源。</p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Form.Effect 支持 watch 异步数据源：每当异步数据源加载完成时，effect 都会被调用一次。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="复杂联动"></a>复杂联动<a class="hash-link" href="#复杂联动" title="Direct link to heading">#</a></h3><p>灵活组合上述例子中的用法，我们可以实现非常复杂的表单联动。 这次的例子用到了「省份-城市-行政区」三级级联选择，具体规则如下：</p><ul><li>切换「省份」时，清空城市</li><li>切换城市时，移除不合理的值</li><li>城市和行政区均为异步数据源</li><li>切换城市时，移除无效的行政区</li></ul><div class="playground-preview debvbX" data-story="AsyncEffect"><div class="playground-live-preview"><div style="--label-width:120px;--control-width:320px;--form-item-gap:12px" class="sc-fmdNqN hyACbC horizontal"><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">省份(单选)</span></div><div class="form-item-control"><div class="sc-dvXYtj iduHXF rex-solid" tabindex="0"><span class="rex-select-value-preview">浙江</span><div class="rex-select-trigger-controls"><svg width="14" height="14" fill="transparent" class="rex-select-arrow" viewBox="0 0 14 14"><path stroke="#8C8C8C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.33333333 4.66666667L7 9.33333333 11.6666667 4.66666667"></path></svg></div></div></div></div><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">城市(多选)</span></div><div class="form-item-control"><div class="sc-dvXYtj iduHXF rex-solid" tabindex="0"><span class="rex-select-placeholder">请选择</span><div class="rex-select-trigger-controls"><svg width="14" height="14" fill="transparent" class="rex-select-arrow" viewBox="0 0 14 14"><path stroke="#8C8C8C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.33333333 4.66666667L7 9.33333333 11.6666667 4.66666667"></path></svg></div></div><div class="help"><span style="color:red">loading...</span></div></div></div><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">行政区(多选)</span></div><div class="form-item-control"><div class="sc-dvXYtj iduHXF rex-solid" tabindex="0"><span class="rex-select-placeholder">请选择</span><div class="rex-select-trigger-controls"><svg width="14" height="14" fill="transparent" class="rex-select-arrow" viewBox="0 0 14 14"><path stroke="#8C8C8C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.33333333 4.66666667L7 9.33333333 11.6666667 4.66666667"></path></svg></div></div><div class="help"><span style="color:red">loading...</span></div></div></div><div><div><label class="sc-fKgJPI cxbltl rex-checkbox"><input type="checkbox" class="rex-checkbox-input"><span class="rex-checkbox-indicator"></span><span class="rex-checkbox-label">显示 JSON</span></label></div></div></div></div></div><div class="sc-eHEENL gAtBhL"><span class="hint">非内联模式</span><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M853.333 224H800v-53.333C800 130.133 765.867 96 725.333 96H170.667C130.133 96 96 130.133 96 170.667v554.666C96 765.867 130.133 800 170.667 800H224v53.333C224 893.867 258.133 928 298.667 928h554.666C893.867 928 928 893.867 928 853.333V298.667C928 258.133 893.867 224 853.333 224zM160 725.333V170.667c0-6.4 4.267-10.667 10.667-10.667h554.666c6.4 0 10.667 4.267 10.667 10.667v554.666c0 6.4-4.267 10.667-10.667 10.667H170.667c-6.4 0-10.667-4.267-10.667-10.667zm704 128c0 6.4-4.267 10.667-10.667 10.667H298.667c-6.4 0-10.667-4.267-10.667-10.667V800h437.333C765.867 800 800 765.867 800 725.333V288h53.333c6.4 0 10.667 4.267 10.667 10.667v554.666zM576 416h-96v-96c0-17.067-14.933-32-32-32s-32 14.933-32 32v96h-96c-17.067 0-32 14.933-32 32s14.933 32 32 32h96v96c0 17.067 14.933 32 32 32s32-14.933 32-32v-96h96c17.067 0 32-14.933 32-32s-14.933-32-32-32z"></path></svg></span></button><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button" style="margin-left:4px"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M322.133 296.533c-12.8-12.8-32-12.8-44.8 0l-192 192c-12.8 12.8-12.8 32 0 44.8l192 192c6.4 6.4 14.934 8.534 23.467 8.534s17.067-2.134 23.467-8.534c12.8-12.8 12.8-32 0-44.8L151.467 512 320 343.467c12.8-12.8 12.8-34.134 2.133-46.934zm618.667 192l-192-192c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l168.533 168.534L704 678.4c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533l192-192c8.534-8.533 8.534-29.867-2.133-42.667zM622.933 76.8c-17.066-4.267-34.133 6.4-38.4 23.467L366.933 902.4c-4.266 17.067 6.4 34.133 23.467 38.4 2.133 0 6.4 2.133 8.533 2.133 14.934 0 27.734-8.533 29.867-23.466L644.267 115.2c4.266-17.067-4.267-34.133-21.334-38.4z"></path></svg></span></button></div><div class="sc-biJonm ernndx playground-editor-wrapper" style="display:none"><div class="playground-editor" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:var(--ifm-font-family-monospace);color:#000000;background-color:#ffffff;font-size:12px"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">// 以下变量从其他模块中引入：
//  FormModel, createAsyncValue, observer, Form, FormItem, ValuePreview

const model3 = new FormModel({
  prov: &#x27;浙江&#x27;,
  cities: [] ,
  districts: [] ,
});

const ALL_CITIES = [
  { prov: &#x27;浙江&#x27;, cities: &#x27;杭州、绍兴、宁波、嘉兴、其他&#x27;.split(&#x27;、&#x27;) },
  { prov: &#x27;江苏&#x27;, cities: &#x27;南京、常州、镇江、苏州、其他&#x27;.split(&#x27;、&#x27;) },
  { prov: &#x27;福建&#x27;, cities: &#x27;厦门、福州、莆田、三明、其他&#x27;.split(&#x27;、&#x27;) },
];

const delay = (ms) =&gt;
  new Promise((resolve) =&gt; {
    setTimeout(resolve, ms);
  });

const cityDataSource$ = createAsyncValue(async () =&gt; {
  // 依赖收集需要发生在同步代码块中
  const prov = model3.getValue(&#x27;prov&#x27;);

  // 根据省份拉取城市列表， 1000ms 延迟用于模拟实际情况
  await delay(1000);
  return ALL_CITIES.find((item) =&gt; item.prov === prov).cities;
}, []);

const districtDataSource$ = createAsyncValue(async () =&gt; {
  // 依赖收集需要发生在同步代码块中
  const cities = model3.getValue(&#x27;cities&#x27;);

  // 根据省份拉取城市列表， 1000ms 延迟用于模拟实际情况
  await delay(1000);
  return cities.flatMap((city) =&gt; [`${city}_001区`, `${city}_002区`, `${city}_003区`]);
}, []);

const AsyncEffectInner = observer(() =&gt; {
  const prov = model3.getField(&#x27;prov&#x27;);
  const cities = model3.getField(&#x27;cities&#x27;);
  const districts = model3.getField(&#x27;districts&#x27;);

  return (
    &lt;Form model={model3}&gt;
      &lt;FormItem
        component=&quot;singleSelect&quot;
        label=&quot;省份(单选)&quot;
        name=&quot;prov&quot;
        componentProps={{ dataSource: ALL_CITIES.map((item) =&gt; item.prov) }}
      /&gt;
      &lt;FormItem
        component=&quot;multiSelect&quot;
        label=&quot;城市(多选)&quot;
        name=&quot;cities&quot;
        help={cityDataSource$.status === &#x27;loading&#x27; ? &lt;span style={{ color: &#x27;red&#x27; }}&gt;loading...&lt;/span&gt; : undefined}
        componentProps={{
          hasClear: true,
          dataSource: cityDataSource$.current,
        }}
      /&gt;
      &lt;FormItem
        component=&quot;multiSelect&quot;
        label=&quot;行政区(多选)&quot;
        name=&quot;districts&quot;
        help={districtDataSource$.status === &#x27;loading&#x27; ? &lt;span style={{ color: &#x27;red&#x27; }}&gt;loading...&lt;/span&gt; : undefined}
        componentProps={{
          hasClear: true,
          dataSource: districtDataSource$.current,
        }}
      /&gt;

      {/* 切换「省份」时，清空城市 */}
      &lt;Form.Effect
        watch={prov}
        effect={() =&gt; {
          cities.value = [];
        }}
      /&gt;

      {/* 城市列表加载完成时，自动设置为第一个城市 */}
      &lt;Form.Effect
        watch={cityDataSource$}
        effect={(cityList) =&gt; {
          cities.value = cityList.slice(0, 1);
        }}
      /&gt;

      {/* 切换城市时，移除无效的行政区 */}
      &lt;Form.Effect
        watch={cities}
        effect={(cities) =&gt; {
          const isValid = (district) =&gt; cities.includes(district.slice(0, 2));
          districts.value = districts.value.filter(isValid);
        }}
      /&gt;

      &lt;ValuePreview /&gt;
    &lt;/Form&gt;
  );
});

function AsyncEffect() {
  return &lt;AsyncEffectInner /&gt;;
}

render(&lt;AsyncEffect /&gt;)</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// 以下变量从其他模块中引入：</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//  FormModel, createAsyncValue, observer, Form, FormItem, ValuePreview</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> model3 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FormModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;浙江&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  districts</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;浙江&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;杭州、绍兴、宁波、嘉兴、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;江苏&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;南京、常州、镇江、苏州、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> prov</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;福建&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> cities</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;厦门、福州、莆田、三明、其他&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;、&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(0, 0, 255)">delay</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">ms</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Promise</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">resolve</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cityDataSource$ </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">createAsyncValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">// 依赖收集需要发生在同步代码块中</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">// 根据省份拉取城市列表， 1000ms 延迟用于模拟实际情况</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">delay</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">find</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">prov </span><span class="token operator" style="color:rgb(0, 0, 0)">===</span><span class="token plain"> prov</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">cities</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> districtDataSource$ </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">createAsyncValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">// 依赖收集需要发生在同步代码块中</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cities </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">// 根据省份拉取城市列表， 1000ms 延迟用于模拟实际情况</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">delay</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> cities</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">flatMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">city</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token template-string template-punctuation string" style="color:rgb(163, 21, 21)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(4, 81, 165)">${</span><span class="token template-string interpolation">city</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token template-string string" style="color:rgb(163, 21, 21)">_001区</span><span class="token template-string template-punctuation string" style="color:rgb(163, 21, 21)">`</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(163, 21, 21)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(4, 81, 165)">${</span><span class="token template-string interpolation">city</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token template-string string" style="color:rgb(163, 21, 21)">_002区</span><span class="token template-string template-punctuation string" style="color:rgb(163, 21, 21)">`</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(163, 21, 21)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(4, 81, 165)">${</span><span class="token template-string interpolation">city</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token template-string string" style="color:rgb(163, 21, 21)">_003区</span><span class="token template-string template-punctuation string" style="color:rgb(163, 21, 21)">`</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> AsyncEffectInner </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">observer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cities </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;cities&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> districts </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;districts&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">model</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">model3</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">singleSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">省份(单选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">prov</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript constant" style="color:rgb(129, 31, 63)">ALL_CITIES</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">map</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> item</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">multiSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">城市(多选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">cities</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">help</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cityDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">status </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">===</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;loading&#x27;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">?</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)">span</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag attr-name" style="color:rgb(255, 0, 0)">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> color</span><span class="token tag script language-javascript tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;red&#x27;</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">loading</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">...</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)">span</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript keyword" style="color:rgb(0, 0, 255)">undefined</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> cityDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">current</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">multiSelect</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">行政区(多选)</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">districts</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">help</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">districtDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">status </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">===</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;loading&#x27;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">?</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)">span</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag attr-name" style="color:rgb(255, 0, 0)">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> color</span><span class="token tag script language-javascript tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag script language-javascript string" style="color:rgb(163, 21, 21)">&#x27;red&#x27;</span><span class="token tag script language-javascript tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">loading</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">...</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag script language-javascript tag" style="color:rgb(128, 0, 0)">span</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript keyword" style="color:rgb(0, 0, 255)">undefined</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">componentProps</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          hasClear</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          dataSource</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> districtDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">current</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 切换「省份」时，清空城市 */</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 城市列表加载完成时，自动设置为第一个城市 */</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cityDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">cityList</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> cityList</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">slice</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript number" style="color:rgb(9, 134, 88)">0</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript number" style="color:rgb(9, 134, 88)">1</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 切换城市时，移除无效的行政区 */</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">        </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          </span><span class="token tag script language-javascript keyword" style="color:rgb(0, 0, 255)">const</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript function-variable function" style="color:rgb(0, 0, 255)">isValid</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">district</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">includes</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">district</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">slice</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript number" style="color:rgb(9, 134, 88)">0</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript number" style="color:rgb(9, 134, 88)">2</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">          districts</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> districts</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">value</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">filter</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">isValid</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"></span></div><div class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">ValuePreview</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">AsyncEffect</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">AsyncEffectInner</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">render</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">AsyncEffect</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div><p>采用 <code>Form.Effect</code> 来描述每个独立的联动规则，组合多个 Form.Effect 实现整体表单联动需求。 通过这种「搭积木」的方式，我们能够在不修改已有的 FormItem 代码的基础上，一步一步地实现复杂的表单联动，并始终保持代码的可读性。</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> model </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FormModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">initValues</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> prov </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;prov&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> cityDataSource$ </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">createAsyncValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> districtDataSource$ </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">createAsyncValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">prov</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">cities</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">districts</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 需要新的表单项时，将新的 FormItem 添加在这里 */</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 切换「省份」时，清空城市 */</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">prov</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 城市列表加载完成时，自动设置为第一个城市 */</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cityDataSource$</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">cityList</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 切换城市时，移除无效的行政区 */</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Effect</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">watch</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">effect</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript parameter" style="color:rgb(128, 0, 0)">cities</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">/* 需要新的联动时，将新的 Form.Effect 添加在这里 */</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="指定作用域内的联动"></a>指定作用域内的联动<a class="hash-link" href="#指定作用域内的联动" title="Direct link to heading">#</a></h3><p>大部分的联动都发生在顶层，但 xform 的分形设计使得联动也能发生在某个 model 内。</p><p>下面是一个「数组元素内部互相联动」的例子：每个数组元素中的 checkbox 控制 input 的显示或隐藏。</p><div class="playground-preview debvbX" data-story="VisibilityControlInArrayItem"><div class="playground-live-preview"><div style="--label-width:120px;--control-width:320px;--form-item-gap:12px" class="sc-fmdNqN hyACbC horizontal"><div class="xform-array" style="margin-top:16px;margin-bottom:8px"><div class="xform-array-items"><div class="xform-array-item" style="border:1px dashed #aaa;margin-top:16px;padding:8px;position:relative"><code style="font-size:16px">array#0</code><div style="position:absolute;top:8px;right:8px;display:flex;gap:8px;z-index:20"><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-solid rex-btn-normal rex-btn-small" type="button"><span class="rext-btn-children">删 除</span></button><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-solid rex-btn-normal rex-btn-small rex-disabled" type="button"><span class="rext-btn-children">上 移</span></button><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-solid rex-btn-normal rex-btn-small rex-disabled" type="button"><span class="rext-btn-children">下 移</span></button></div><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">是否显示 输入框</span></div><div class="form-item-control"><label class="sc-fKgJPI cxbltl rex-checkbox rex-checked"><input type="checkbox" class="rex-checkbox-input" checked=""><span class="rex-checkbox-indicator"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M992.533 169.551c-22.094-22.093-57.996-22.093-77.327 0l-535.767 541.29L108.794 445.72c-22.093-22.094-57.995-22.094-77.327 0-22.093 22.093-22.093 57.995 0 77.327l309.309 303.785c11.046 11.046 24.855 16.57 38.663 16.57 13.809 0 27.617-5.524 38.664-16.57l574.43-579.953c22.093-22.094 22.093-55.234 0-77.328z"></path></svg></span><span class="rex-checkbox-label"></span></label></div></div><div class="form-item"><div class="form-item-label"><span class="form-item-label-text">输入框</span></div><div class="form-item-control"><div class="sc-bdnxRM kbCsWl sc-bCwfaz czKXkc rex-input rex-solid"><input placeholder="请输入"></div></div></div></div></div><div style="margin-top:12px"><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-solid rex-btn-normal rex-btn-medium" type="button"><span class="rext-btn-children">添加一项</span></button></div></div></div></div></div><div class="sc-eHEENL gAtBhL"><span class="hint">内联模式</span><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M853.333 224H800v-53.333C800 130.133 765.867 96 725.333 96H170.667C130.133 96 96 130.133 96 170.667v554.666C96 765.867 130.133 800 170.667 800H224v53.333C224 893.867 258.133 928 298.667 928h554.666C893.867 928 928 893.867 928 853.333V298.667C928 258.133 893.867 224 853.333 224zM160 725.333V170.667c0-6.4 4.267-10.667 10.667-10.667h554.666c6.4 0 10.667 4.267 10.667 10.667v554.666c0 6.4-4.267 10.667-10.667 10.667H170.667c-6.4 0-10.667-4.267-10.667-10.667zm704 128c0 6.4-4.267 10.667-10.667 10.667H298.667c-6.4 0-10.667-4.267-10.667-10.667V800h437.333C765.867 800 800 765.867 800 725.333V288h53.333c6.4 0 10.667 4.267 10.667 10.667v554.666zM576 416h-96v-96c0-17.067-14.933-32-32-32s-32 14.933-32 32v96h-96c-17.067 0-32 14.933-32 32s14.933 32 32 32h96v96c0 17.067 14.933 32 32 32s32-14.933 32-32v-96h96c17.067 0 32-14.933 32-32s-14.933-32-32-32z"></path></svg></span></button><button class="sc-bqGGPW hIuUA-d rex-btn rex-btn-text rex-btn-normal rex-btn-small" type="button" style="margin-left:4px"><span class="rext-btn-children"><svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="font-size:16px"><path d="M322.133 296.533c-12.8-12.8-32-12.8-44.8 0l-192 192c-12.8 12.8-12.8 32 0 44.8l192 192c6.4 6.4 14.934 8.534 23.467 8.534s17.067-2.134 23.467-8.534c12.8-12.8 12.8-32 0-44.8L151.467 512 320 343.467c12.8-12.8 12.8-34.134 2.133-46.934zm618.667 192l-192-192c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l168.533 168.534L704 678.4c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533l192-192c8.534-8.533 8.534-29.867-2.133-42.667zM622.933 76.8c-17.066-4.267-34.133 6.4-38.4 23.467L366.933 902.4c-4.266 17.067 6.4 34.133 23.467 38.4 2.133 0 6.4 2.133 8.533 2.133 14.934 0 27.734-8.533 29.867-23.466L644.267 115.2c4.266-17.067-4.267-34.133-21.334-38.4z"></path></svg></span></button></div><div class="sc-biJonm ernndx playground-editor-wrapper" style="display:none"><div class="playground-editor" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:var(--ifm-font-family-monospace);color:#000000;background-color:#ffffff;font-size:12px"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">// 以下变量从其他模块中引入：
//  Form, arrayCard, FormItem

function VisibilityControlInArrayItem() {
  return (
    &lt;Form defaultValue={{ array: [{ show: true }] }}&gt;
      &lt;Form.Array name=&quot;array&quot; layout={arrayCard({ showItemOrder: true })}&gt;
        &lt;FormItem component=&quot;checkbox&quot; name=&quot;show&quot; label=&quot;是否显示 输入框&quot; /&gt;
        &lt;Form.ModelConsumer&gt;
          {(mod) =&gt; mod.getValue(&#x27;show&#x27;) &amp;&amp; &lt;FormItem component=&quot;input&quot; name=&quot;input&quot; label=&quot;输入框&quot; /&gt;}
        &lt;/Form.ModelConsumer&gt;
      &lt;/Form.Array&gt;
    &lt;/Form&gt;
  );
}</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// 以下变量从其他模块中引入：</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//  Form, arrayCard, FormItem</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">VisibilityControlInArrayItem</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">defaultValue</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> array</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> show</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Array</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">array</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">layout</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript function" style="color:rgb(0, 0, 255)">arrayCard</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> showItemOrder</span><span class="token tag script language-javascript operator" style="color:rgb(0, 0, 0)">:</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript boolean" style="color:rgb(128, 0, 0)">true</span><span class="token tag script language-javascript" style="color:rgb(128, 0, 0)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">checkbox</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">show</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">是否显示 输入框</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.ModelConsumer</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">mod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> mod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;show&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;&amp;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">FormItem</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">component</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">input</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">input</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">输入框</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.ModelConsumer</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form.Array</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag class-name" style="color:rgb(38, 127, 153)">Form</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div><p>(todo 没有找到更好的例子，同时局部联动也不常见，文档就先这样吧)</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/alibaba/rex-design/edit/main/packages/doc/docs/xform/effects.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2nOl" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rex-design/docs/xform/advanced"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« xform 进阶</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rex-design/docs/xform/core"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">xform core »</div></a></div></nav></div></div></div><div class="col" style="flex:0 0 200px;padding-left:0"><div class="tableOfContents_rbnR"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#field-写法" class="table-of-contents__link">field 写法</a></li><li><a href="#联动" class="table-of-contents__link">联动</a><ul><li><a href="#同步计算状态" class="table-of-contents__link">同步计算状态</a></li><li><a href="#同步状态修改" class="table-of-contents__link">同步状态修改</a></li><li><a href="#异步数据源" class="table-of-contents__link">异步数据源</a></li><li><a href="#复杂联动" class="table-of-contents__link">复杂联动</a></li><li><a href="#指定作用域内的联动" class="table-of-contents__link">指定作用域内的联动</a></li></ul></li></ul></div></div></div></div></main></div></div><section class="footerSection_3hop"><div class="footer_2bJW"><div class="footerLinkColumn_2ldu" style="flex:1 1 auto"><svg width="244" height="19" viewBox="0 0 244 19" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="footer-logo_svg__a" d="M0 18.584h243.643V0H0z"></path></defs><g fill="none" fill-rule="evenodd"><path fill="#0058FF" d="M155.152.468v3.094h2.14v11.385h-2.14v3.092h7.4v-3.092h-2.167V3.562h2.268V.468zM200.704 11.47L185.756.508v17.59h3.092V6.948l14.948 10.963V2.357l-3.092-1.95z"></path><g><path d="M147.694 7.708h-7.488a2.013 2.013 0 01-2.012-2.012c0-1.108.902-2.01 2.012-2.01h10.27l1.916-3.093h-12.186a5.112 5.112 0 00-5.105 5.103 5.11 5.11 0 005.105 5.103h7.488c1.108 0 2.011.903 2.011 2.011 0 1.11-.903 2.012-2.011 2.012h-10.238l-1.918 3.092h12.156a5.108 5.108 0 005.103-5.104 5.108 5.108 0 00-5.103-5.102M104.788 18.04c4.844 0 8.786-3.943 8.786-8.786 0-4.584-3.532-8.354-8.017-8.747v-.04H94.103l-1.941 3.134 12.71-.075a5.736 5.736 0 015.649 5.728 5.738 5.738 0 01-5.733 5.732H98.27V6.422h-3.054V18.04h9.574z" fill="#0058FF"></path><mask id="footer-logo_svg__b" fill="#fff"><use xlink:href="#footer-logo_svg__a"></use></mask><path fill="#0058FF" mask="url(#footer-logo_svg__b)" d="M115.845 18.05h18.016v-3.214h-18.016zM115.845 3.671h18.016V.458h-18.016zM129.573 10.759l1.52-3.213h-15.247v3.213zM182.165 18.036V7.68h-7.241l-1.944 3.132h6.052v4.093h-6.358c-3.11 0-5.641-2.54-5.641-5.66a5.647 5.647 0 015.641-5.64h9.491V.47h-9.49c-4.84 0-8.776 3.936-8.776 8.775 0 4.847 3.936 8.79 8.775 8.79h9.491z"></path><path fill="#FFF" mask="url(#footer-logo_svg__b)" d="M52.952 18.136h-5.423V.446h5.423V3.3h-2.569v11.984h2.569zM84.116 18.136h-5.421v-2.852h2.567V3.3h-2.567V.446h5.42zM23.764 18.116h20.438v-3.26H23.764zM23.764 3.727h20.438V.466H23.764zM23.765 7.66v3.263h14.798l1.542-3.263zM3.263 3.727h11.584c1.7 0 2.33 1.181 2.33 1.888 0 .434-.17 1.86-2.338 1.884H4.519L15.7 18.117h4.738l-7.747-7.355h2.15c.302 0 2.631-.053 4.219-1.636.901-.898 1.378-2.11 1.378-3.511 0-1.401-.477-2.617-1.378-3.515C17.473.52 15.144.466 14.847.466H-.001v17.65h3.264V3.728zM68.073 9.291L76.455.467h-4.497l-16.77 17.649h4.5l6.135-6.457 6.135 6.457h4.499zM64.176 5.19L59.688.466h-4.5l6.738 7.09z"></path><path d="M241.87.526h-29.324c-.69 0-1.248.558-1.248 1.246V16.81c0 .69.558 1.248 1.248 1.248h29.324c.69 0 1.248-.559 1.248-1.248V1.772c0-.688-.559-1.246-1.248-1.246z" stroke="#0058FF" stroke-width="1.051" mask="url(#footer-logo_svg__b)"></path><path d="M216.472 9.291a3.354 3.354 0 013.35-3.349h1.693a3.353 3.353 0 013.35 3.35 3.354 3.354 0 01-3.35 3.35h-1.693a3.354 3.354 0 01-3.35-3.35zm5.043 5.184a5.188 5.188 0 005.182-5.184 5.188 5.188 0 00-5.182-5.182h-1.693a5.19 5.19 0 00-5.183 5.182 5.19 5.19 0 005.183 5.184h1.693zM235.917 8.375h-4.444a1.196 1.196 0 01-1.193-1.195c0-.657.536-1.193 1.193-1.193h6.095l1.137-1.834h-7.232a3.032 3.032 0 00-3.03 3.027c0 1.67 1.36 3.028 3.03 3.028h4.444a1.195 1.195 0 010 2.388h-6.078l-1.135 1.835h7.213c1.67 0 3.028-1.36 3.028-3.03a3.031 3.031 0 00-3.028-3.026" fill="#0058FF" mask="url(#footer-logo_svg__b)"></path></g></g></svg></div><div class="footerLinkColumnGroup_3A9q" style="flex:4 4 auto"><div class="footerLinkColumn_2ldu" style="flex:2 2 0"><span class="groupTitle_17OS">文档</span><a href="/rex-design/docs">组件</a><a href="/rex-design/design">设计</a></div><div class="footerLinkColumn_2ldu" style="flex:2 2 0"><span class="groupTitle_17OS">更多</span><a href="https://github.com/alibaba/rex-design" target="_blank" rel="noopener noreferrer">GitHub</a><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a></div><div class="footerLinkColumn_2ldu" style="flex:0 0 auto"><span class="groupTitle_17OS">联系我们</span><img alt="qrcode" src="/rex-design/assets/images/qrcode-26d31ce280278c40b2abaef79d1664b9.png" width="120" height="120" style="margin-top:20px;user-select:none" draggable="false"></div></div></div><div class="footerCopyright_Jlwn">Copyright © 2021 Alibaba Inc.<br class="mobileBreak_Wl3e">Built with ❤️ by hema-FE.</div></section></div>
<script src="/rex-design/assets/js/styles.0c915a9f.js"></script>
<script src="/rex-design/assets/js/runtime~main.a877fc9f.js"></script>
<script src="/rex-design/assets/js/main.1ea75e26.js"></script>
<script src="/rex-design/assets/js/common.7bde2b1e.js"></script>
<script src="/rex-design/assets/js/2.bd19487b.js"></script>
<script src="/rex-design/assets/js/3.147b5ab2.js"></script>
<script src="/rex-design/assets/js/1be78505.9ad9709e.js"></script>
<script src="/rex-design/assets/js/90.6b41a23a.js"></script>
<script src="/rex-design/assets/js/935f2afb.44593b8b.js"></script>
<script src="/rex-design/assets/js/17896441.621baa3a.js"></script>
<script src="/rex-design/assets/js/4.317fbb2d.js"></script>
<script src="/rex-design/assets/js/5.4e2eb9b9.js"></script>
<script src="/rex-design/assets/js/8270c60e.de32927a.js"></script>
</body>
</html>