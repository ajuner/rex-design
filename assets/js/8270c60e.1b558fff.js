(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{121:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return U})),n.d(t,"metadata",(function(){return J})),n.d(t,"toc",(function(){return H})),n.d(t,"default",(function(){return Q}));var a=n(3),r=n(8),o=n(0),l=n.n(o),i=n(173),s=n(503),c=n(171),m=n(193),d=n(175),u=n(181),p=n(238);function f(){const e=Object(m.g)({defaultColumnWidth:180,operationColumn:{lock:!0},orderColumn:{width:50,lock:!0}});return l.a.createElement(m.b,{defaultValue:{array:[{},{}]}},l.a.createElement(m.b.Array,{name:"array",layout:e},l.a.createElement(m.c,{component:"input",name:"aa",label:"\u5b57\u6bb51",required:!0}),l.a.createElement(m.c,{component:"input",name:"bb",label:"\u5b57\u6bb52"}),l.a.createElement(m.c,{component:"input",name:"cc",label:"\u5b57\u6bb53"}),l.a.createElement(m.c,{component:"dateRangePicker",name:"dd",label:"\u5b57\u6bb54",required:!0,"x-table-column":{width:280}})),l.a.createElement(m.b.ModelConsumer,null,e=>e.getValue("array",[]).length>3&&l.a.createElement("div",{style:{color:"red",marginTop:4}},"\u8868\u683c\u5185\u7684\u6761\u76ee\u6570\u91cf\u4e0d\u80fd\u5927\u4e8e3")),l.a.createElement(p.b,null))}const b={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/3-biz-examples.stories.tsx",loc:{start:{line:11,column:7},end:{line:38,column:1}},name:"TableLayout",value:f,source:'function TableLayout() {\n  const layout = arrayTable({\n    defaultColumnWidth: 180,\n    operationColumn: { lock: true },\n    orderColumn: { width: 50, lock: true },\n  });\n\n  return (\n    <Form defaultValue={{ array: [{}, {}] }}>\n      <Form.Array name="array" layout={layout}>\n        <FormItem component="input" name="aa" label="\u5b57\u6bb51" required />\n        <FormItem component="input" name="bb" label="\u5b57\u6bb52" />\n        <FormItem component="input" name="cc" label="\u5b57\u6bb53" />\n        <FormItem component="dateRangePicker" name="dd" label="\u5b57\u6bb54" required x-table-column={{ width: 280 }} />\n      </Form.Array>\n\n      <Form.ModelConsumer>\n        {(mod) =>\n          mod.getValue(\'array\', []).length > 3 && (\n            <div style={{ color: \'red\', marginTop: 4 }}>\u8868\u683c\u5185\u7684\u6761\u76ee\u6570\u91cf\u4e0d\u80fd\u5927\u4e8e3</div>\n          )\n        }\n      </Form.ModelConsumer>\n\n      <ValuePreview />\n    </Form>\n  );\n}',deps:()=>[],provides:{arrayTable:m.g,Form:m.b,FormItem:m.c,ValuePreview:p.b}};function h(){return l.a.createElement(m.b,{defaultValue:{array:[{show:!0}]}},l.a.createElement(m.b.Array,{name:"array",layout:Object(m.e)({showItemOrder:!0})},l.a.createElement(m.c,{component:"checkbox",name:"show",label:"\u662f\u5426\u663e\u793a \u8f93\u5165\u6846"}),l.a.createElement(m.b.ModelConsumer,null,e=>e.getValue("show")&&l.a.createElement(m.c,{component:"input",name:"input",label:"\u8f93\u5165\u6846"}))))}f.__doc_info=b,f.__inner_source='function TableLayout() {\n  const layout = arrayTable({\n    defaultColumnWidth: 180,\n    operationColumn: { lock: true },\n    orderColumn: { width: 50, lock: true },\n  });\n\n  return (\n    <Form defaultValue={{ array: [{}, {}] }}>\n      <Form.Array name="array" layout={layout}>\n        <FormItem component="input" name="aa" label="\u5b57\u6bb51" required />\n        <FormItem component="input" name="bb" label="\u5b57\u6bb52" />\n        <FormItem component="input" name="cc" label="\u5b57\u6bb53" />\n        <FormItem component="dateRangePicker" name="dd" label="\u5b57\u6bb54" required x-table-column={{ width: 280 }} />\n      </Form.Array>\n\n      <Form.ModelConsumer>\n        {(mod) =>\n          mod.getValue(\'array\', []).length > 3 && (\n            <div style={{ color: \'red\', marginTop: 4 }}>\u8868\u683c\u5185\u7684\u6761\u76ee\u6570\u91cf\u4e0d\u80fd\u5927\u4e8e3</div>\n          )\n        }\n      </Form.ModelConsumer>\n\n      <ValuePreview />\n    </Form>\n  );\n}';const y={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/3-biz-examples.stories.tsx",loc:{start:{line:41,column:7},end:{line:52,column:1}},name:"VisibilityControlInArrayItem",value:h,source:'function VisibilityControlInArrayItem() {\n  return (\n    <Form defaultValue={{ array: [{ show: true }] }}>\n      <Form.Array name="array" layout={arrayCard({ showItemOrder: true })}>\n        <FormItem component="checkbox" name="show" label="\u662f\u5426\u663e\u793a \u8f93\u5165\u6846" />\n        <Form.ModelConsumer>\n          {(mod) => mod.getValue(\'show\') && <FormItem component="input" name="input" label="\u8f93\u5165\u6846" />}\n        </Form.ModelConsumer>\n      </Form.Array>\n    </Form>\n  );\n}',deps:()=>[],provides:{Form:m.b,arrayCard:m.e,FormItem:m.c}};h.__doc_info=y,h.__inner_source='function VisibilityControlInArrayItem() {\n  return (\n    <Form defaultValue={{ array: [{ show: true }] }}>\n      <Form.Array name="array" layout={arrayCard({ showItemOrder: true })}>\n        <FormItem component="checkbox" name="show" label="\u662f\u5426\u663e\u793a \u8f93\u5165\u6846" />\n        <Form.ModelConsumer>\n          {(mod) => mod.getValue(\'show\') && <FormItem component="input" name="input" label="\u8f93\u5165\u6846" />}\n        </Form.ModelConsumer>\n      </Form.Array>\n    </Form>\n  );\n}';const g=new m.d({activeIndex:0,items:[{id:1001,name:"\u5c0f\u660e",gender:"\u7537",phone:"18866668888"},{id:1002,name:"\u5c0f\u7ea2",gender:"\u5973",phone:""}]}),v={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/3-biz-examples.stories.tsx",loc:{start:{line:54,column:0},end:{line:60,column:3}},name:"model",value:g,source:"const model = new FormModel({\n  activeIndex: 0,\n  items: [\n    { id: 1001, name: '\u5c0f\u660e', gender: '\u7537', phone: '18866668888' },\n    { id: 1002, name: '\u5c0f\u7ea2', gender: '\u5973', phone: '' },\n  ],\n});",deps:()=>[],provides:{FormModel:m.d}},x=Object(u.b)(()=>{const e=Object(m.i)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.c,{name:"name",label:"\u59d3\u540d",component:"input",required:!0,componentProps:{style:{width:120}}}),l.a.createElement(m.c,{name:"phone",label:"\u8054\u7cfb\u7535\u8bdd",component:"input",required:!0,componentProps:{style:{width:200}},validate:e=>/[\d-]{11,13}/.test(e)?null:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\uff0811\u4f4d\u6570\u5b57\uff09"}),l.a.createElement(m.c,{name:"gender",label:"\u6027\u522b",component:"testButtonGroup",required:!0,componentProps:{items:["\u7537","\u5973"]}}),l.a.createElement(m.c,{name:"originType",label:"\u6765\u6e90",component:"testButtonGroup",required:!0,componentProps:{items:["\u6821\u56ed\u62db\u8058","\u793e\u4f1a\u62db\u8058"]}}),"\u6821\u56ed\u62db\u8058"===e.getValue("originType")?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.c,{name:"school",label:"\u6bd5\u4e1a\u9662\u6821",required:!0,component:"singleSelect",componentProps:{dataSource:"\u6e05\u534e\u5927\u5b66\uff0c\u5317\u4eac\u5927\u5b66\uff0c\u6d59\u6c5f\u5927\u5b66\uff0c\u5357\u4eac\u5927\u5b66\uff0c\u590d\u65e6\u5927\u5b66\uff0c\u4e0a\u6d77\u4ea4\u901a\u5927\u5b66\uff0c\u5176\u4ed6".split("\uff0c"),style:{width:150}}}),l.a.createElement(m.c,{name:"graduateDate",label:"\u6bd5\u4e1a\u65f6\u95f4",required:!0,component:"datePicker",componentProps:{format:"YYYY-MM"}})):l.a.createElement(m.c,{name:"experience",label:"\u5de5\u4f5c\u5e74\u9650",component:"numberInput",fallbackValue:0,componentProps:{min:0,max:30}}),l.a.createElement(m.c,{name:"address",label:"\u5730\u5740",component:"input"}))}),S={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/3-biz-examples.stories.tsx",loc:{start:{line:62,column:0},end:{line:123,column:3}},name:"Candidate",value:x,source:'const Candidate = observer(() => {\n  const mod = useModel();\n  return (\n    <>\n      <FormItem name="name" label="\u59d3\u540d" component="input" required componentProps={{ style: { width: 120 } }} />\n      <FormItem\n        name="phone"\n        label="\u8054\u7cfb\u7535\u8bdd"\n        component="input"\n        required\n        componentProps={{ style: { width: 200 } }}\n        validate={(v) => (/[\\d-]{11,13}/.test(v) ? null : \'\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\uff0811\u4f4d\u6570\u5b57\uff09\')}\n      />\n      <FormItem\n        name="gender"\n        label="\u6027\u522b"\n        component="testButtonGroup"\n        required\n        componentProps={{ items: [\'\u7537\', \'\u5973\'] }}\n      />\n      <FormItem\n        name="originType"\n        label="\u6765\u6e90"\n        component="testButtonGroup"\n        required\n        componentProps={{ items: [\'\u6821\u56ed\u62db\u8058\', \'\u793e\u4f1a\u62db\u8058\'] }}\n      />\n      {mod.getValue(\'originType\') === \'\u6821\u56ed\u62db\u8058\' ? (\n        <>\n          <FormItem\n            name="school"\n            label="\u6bd5\u4e1a\u9662\u6821"\n            required\n            component="singleSelect"\n            componentProps={{\n              dataSource: \'\u6e05\u534e\u5927\u5b66\uff0c\u5317\u4eac\u5927\u5b66\uff0c\u6d59\u6c5f\u5927\u5b66\uff0c\u5357\u4eac\u5927\u5b66\uff0c\u590d\u65e6\u5927\u5b66\uff0c\u4e0a\u6d77\u4ea4\u901a\u5927\u5b66\uff0c\u5176\u4ed6\'.split(\'\uff0c\'),\n              style: { width: 150 },\n            }}\n          />\n          <FormItem\n            name="graduateDate"\n            label="\u6bd5\u4e1a\u65f6\u95f4"\n            required\n            component="datePicker"\n            componentProps={{\n              format: \'YYYY-MM\',\n            }}\n          />\n        </>\n      ) : (\n        <FormItem\n          name="experience"\n          label="\u5de5\u4f5c\u5e74\u9650"\n          component="numberInput"\n          fallbackValue={0}\n          componentProps={{ min: 0, max: 30 }}\n        />\n      )}\n      <FormItem name="address" label="\u5730\u5740" component="input" />\n    </>\n  );\n});',deps:()=>[],provides:{observer:u.b,useModel:m.i,FormItem:m.c}},O=Object(u.b)(()=>{const e=g.values,t=g.getSubModel("items"),n=Object(d.c)(()=>{const e=t.getSubModel(g.values.activeIndex);m.h.validateAll(e).then(Object(d.c)(e=>{e.hasError?c.Notice.warning({title:"\u8bf7\u5148\u5b8c\u6210\u5f53\u524d\u8868\u5355",closeable:!0}):(m.f.append(t),g.values.activeIndex=g.values.items.length-1)}))});return l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",height:400,border:"solid 1px #ccc"}},l.a.createElement("div",{style:{display:"flex",flex:"0 0 250px",flexDirection:"column"}},e.items.map((a,r)=>{var o;return l.a.createElement("div",{key:m.f.getKey(t,r),onClick:Object(d.c)(()=>{g.values.activeIndex=r}),style:{cursor:"pointer",paddingLeft:16,height:48,display:"flex",alignItems:"center",backgroundColor:e.activeIndex===r?"#ccc":""}},l.a.createElement("div",null,null!==(o=a.name)&&void 0!==o?o:l.a.createElement("span",{style:{color:"#999"}},"[\u672a\u586b\u5199\u59d3\u540d]")),l.a.createElement(c.Confirm,{title:`\u786e\u5b9a\u8981\u5220\u9664 ${a.name} \u4e48\uff1f`,onOk:()=>{m.f.delete(t,r),0===t.values.length&&n()}},l.a.createElement(c.Button,{size:"small",style:{marginLeft:"auto",marginRight:16}},"\u79fb\u9664")))}),l.a.createElement(c.Button,{onClick:n},"\u65b0\u589e\u5019\u9009\u4eba")),l.a.createElement("div",{style:{flex:"auto",padding:16,borderLeft:"solid 1px #ccc"}},l.a.createElement(m.b,{model:g.getSubModel("items").getSubModel(g.values.activeIndex)},l.a.createElement(x,null)))),l.a.createElement("div",{style:{margin:4}},l.a.createElement(c.Switch,{checked:g.state.showReactJson,onChange:Object(d.c)(e=>{g.state.showReactJson=e})}),"\u663e\u793a ReactJSON"),g.state.showReactJson&&l.a.createElement(p.a,{src:Object(d.r)(g.values)}))}),_={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/3-biz-examples.stories.tsx",loc:{start:{line:125,column:0},end:{line:204,column:3}},name:"CandidateListFormInner",value:O,source:" function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }const CandidateListFormInner = observer(() => {\n  const data = model.values;\n  const arrayModel = model.getSubModel('items');\n\n  const addCandidate = action(() => {\n    const mod = arrayModel.getSubModel(model.values.activeIndex);\n\n    modelUtils.validateAll(mod).then(\n      action((result) => {\n        if (result.hasError) {\n          Notice.warning({ title: '\u8bf7\u5148\u5b8c\u6210\u5f53\u524d\u8868\u5355', closeable: true });\n          return;\n        }\n\n        arrayHelpers.append(arrayModel);\n        model.values.activeIndex = model.values.items.length - 1;\n      }),\n    );\n  });\n\n  return (\n    <div>\n      <div style={{ display: 'flex', height: 400, border: 'solid 1px #ccc' }}>\n        <div style={{ display: 'flex', flex: '0 0 250px', flexDirection: 'column' }}>\n          {data.items.map((item, index) => (\n            <div\n              key={arrayHelpers.getKey(arrayModel, index)}\n              onClick={action(() => {\n                model.values.activeIndex = index;\n              })}\n              style={{\n                cursor: 'pointer',\n                paddingLeft: 16,\n                height: 48,\n                display: 'flex',\n                alignItems: 'center',\n                backgroundColor: data.activeIndex === index ? '#ccc' : '',\n              }}\n            >\n              <div>{_nullishCoalesce(item.name, () => ( <span style={{ color: '#999' }}>[\u672a\u586b\u5199\u59d3\u540d]</span>))}</div>\n\n              <Confirm\n                title={`\u786e\u5b9a\u8981\u5220\u9664 ${item.name} \u4e48\uff1f`}\n                onOk={() => {\n                  arrayHelpers.delete(arrayModel, index);\n                  if (arrayModel.values.length === 0) {\n                    addCandidate();\n                  }\n                }}\n              >\n                <Button size=\"small\" style={{ marginLeft: 'auto', marginRight: 16 }}>\n                  \u79fb\u9664\n                </Button>\n              </Confirm>\n            </div>\n          ))}\n          <Button onClick={addCandidate}>\u65b0\u589e\u5019\u9009\u4eba</Button>\n        </div>\n\n        <div style={{ flex: 'auto', padding: 16, borderLeft: 'solid 1px #ccc' }}>\n          <Form model={model.getSubModel('items').getSubModel(model.values.activeIndex)}>\n            <Candidate />\n          </Form>\n        </div>\n      </div>\n\n      <div style={{ margin: 4 }}>\n        <Switch\n          checked={model.state.showReactJson}\n          onChange={action((b) => {\n            model.state.showReactJson = b;\n          })}\n        />\n        \u663e\u793a ReactJSON\n      </div>\n\n      {model.state.showReactJson && <BrowserOnlyReactJson src={toJS(model.values)} />}\n    </div>\n  );\n});",deps:()=>[v,S],provides:{observer:u.b,action:d.c,modelUtils:m.h,Notice:c.Notice,arrayHelpers:m.f,Confirm:c.Confirm,Button:c.Button,Form:m.b,Switch:c.Switch,BrowserOnlyReactJson:p.a,toJS:d.r}},E=()=>l.a.createElement(O,null);E.__doc_info={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/3-biz-examples.stories.tsx",loc:{start:{line:206,column:7},end:{line:206,column:66}},name:"CandidateListForm",value:E,source:"const CandidateListForm = () => <CandidateListFormInner />;",deps:()=>[_],provides:{}},E.__inner_source="() => <CandidateListFormInner />",E.storyName="\u5019\u9009\u4eba\u540d\u5355";const F=[{prov:"\u6d59\u6c5f",cities:"\u676d\u5dde\u3001\u7ecd\u5174\u3001\u5b81\u6ce2\u3001\u5609\u5174\u3001\u5176\u4ed6".split("\u3001")},{prov:"\u6c5f\u82cf",cities:"\u5357\u4eac\u3001\u5e38\u5dde\u3001\u9547\u6c5f\u3001\u82cf\u5dde\u3001\u5176\u4ed6".split("\u3001")},{prov:"\u798f\u5efa",cities:"\u53a6\u95e8\u3001\u798f\u5dde\u3001\u8386\u7530\u3001\u4e09\u660e\u3001\u5176\u4ed6".split("\u3001")}],j={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:5,column:0},end:{line:9,column:2}},name:"ALL_CITIES",value:F,source:"const ALL_CITIES = [\n  { prov: '\u6d59\u6c5f', cities: '\u676d\u5dde\u3001\u7ecd\u5174\u3001\u5b81\u6ce2\u3001\u5609\u5174\u3001\u5176\u4ed6'.split('\u3001') },\n  { prov: '\u6c5f\u82cf', cities: '\u5357\u4eac\u3001\u5e38\u5dde\u3001\u9547\u6c5f\u3001\u82cf\u5dde\u3001\u5176\u4ed6'.split('\u3001') },\n  { prov: '\u798f\u5efa', cities: '\u53a6\u95e8\u3001\u798f\u5dde\u3001\u8386\u7530\u3001\u4e09\u660e\u3001\u5176\u4ed6'.split('\u3001') },\n];",deps:()=>[],provides:{}},I=new m.d({prov:"",cities:[]}),V={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:11,column:0},end:{line:11,column:55}},name:"model1",value:I,source:"const model1 = new FormModel({ prov: '', cities: [] });",deps:()=>[],provides:{FormModel:m.d}},C=Object(u.b)(()=>{const e=I.getField("prov"),t=I.getField("cities");return l.a.createElement(m.b,{model:I},l.a.createElement(m.c,{component:"singleSelect",label:"\u7701\u4efd(\u5355\u9009)",help:"\u9009\u62e9\u4e00\u4e2a\u7701\u4efd\u540e\uff0c\u5c06\u663e\u793a\u57ce\u5e02\u4e0b\u62c9\u6846",field:e,componentProps:{hasClear:!0,dataSource:F.map(e=>e.prov)}}),e.value&&l.a.createElement(m.c,{component:"multiSelect",label:"\u57ce\u5e02(\u591a\u9009)",field:t,componentProps:{hasClear:!0,dataSource:F.find(t=>t.prov===e.value).cities}}))}),w={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:13,column:0},end:{line:42,column:3}},name:"Example1_inner",value:C,source:'const Example1_inner = observer(() => {\n  const prov = model1.getField(\'prov\');\n  const cities = model1.getField(\'cities\');\n\n  return (\n    <Form model={model1}>\n      <FormItem\n        component="singleSelect"\n        label="\u7701\u4efd(\u5355\u9009)"\n        help="\u9009\u62e9\u4e00\u4e2a\u7701\u4efd\u540e\uff0c\u5c06\u663e\u793a\u57ce\u5e02\u4e0b\u62c9\u6846"\n        field={prov}\n        componentProps={{\n          hasClear: true,\n          dataSource: ALL_CITIES.map((item) => item.prov),\n        }}\n      />\n      {prov.value && (\n        <FormItem\n          component="multiSelect"\n          label="\u57ce\u5e02(\u591a\u9009)"\n          field={cities}\n          componentProps={{\n            hasClear: true,\n            dataSource: ALL_CITIES.find((item) => item.prov === prov.value).cities,\n          }}\n        />\n      )}\n    </Form>\n  );\n});',deps:()=>[V,j],provides:{observer:u.b,Form:m.b,FormItem:m.c}},N=()=>l.a.createElement(C,null);N.__doc_info={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:44,column:7},end:{line:44,column:49}},name:"Example1",value:N,source:"const Example1 = () => <Example1_inner />;",deps:()=>[w],provides:{}},N.__inner_source="() => <Example1_inner />";const A=new m.d({prov:"",cities:[]}),T={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:46,column:0},end:{line:46,column:55}},name:"model2",value:A,source:"const model2 = new FormModel({ prov: '', cities: [] });",deps:()=>[],provides:{FormModel:m.d}},k=Object(u.b)(()=>{const e=A.getField("prov"),t=A.getField("cities");return l.a.createElement(m.b,{model:A},l.a.createElement(m.c,{component:"singleSelect",label:"\u7701\u4efd(\u5355\u9009)",help:"\u9009\u62e9\u4e00\u4e2a\u7701\u4efd\u540e\uff0c\u5c06\u663e\u793a\u57ce\u5e02\u4e0b\u62c9\u6846\uff1b\u5207\u6362\u7701\u4efd\u65f6\uff0c\u57ce\u5e02\u5c06\u88ab\u6e05\u7a7a",field:e,componentProps:{hasClear:!0,dataSource:F.map(e=>e.prov)}}),e.value&&l.a.createElement(m.c,{component:"multiSelect",label:"\u57ce\u5e02(\u591a\u9009)",field:t,componentProps:{hasClear:!0,dataSource:F.find(t=>t.prov===e.value).cities}}),l.a.createElement(m.b.Effect,{watch:e,effect:()=>{t.value=[]}}))}),R={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:48,column:0},end:{line:83,column:3}},name:"Example2_inner",value:k,source:'const Example2_inner = observer(() => {\n  const prov = model2.getField(\'prov\');\n  const cities = model2.getField(\'cities\');\n\n  return (\n    <Form model={model2}>\n      <FormItem\n        component="singleSelect"\n        label="\u7701\u4efd(\u5355\u9009)"\n        help="\u9009\u62e9\u4e00\u4e2a\u7701\u4efd\u540e\uff0c\u5c06\u663e\u793a\u57ce\u5e02\u4e0b\u62c9\u6846\uff1b\u5207\u6362\u7701\u4efd\u65f6\uff0c\u57ce\u5e02\u5c06\u88ab\u6e05\u7a7a"\n        field={prov}\n        componentProps={{\n          hasClear: true,\n          dataSource: ALL_CITIES.map((item) => item.prov),\n        }}\n      />\n      {prov.value && (\n        <FormItem\n          component="multiSelect"\n          label="\u57ce\u5e02(\u591a\u9009)"\n          field={cities}\n          componentProps={{\n            hasClear: true,\n            dataSource: ALL_CITIES.find((item) => item.prov === prov.value).cities,\n          }}\n        />\n      )}\n      <Form.Effect\n        watch={prov}\n        effect={() => {\n          cities.value = [];\n        }}\n      />\n    </Form>\n  );\n});',deps:()=>[T,j],provides:{observer:u.b,Form:m.b,FormItem:m.c}},q=()=>l.a.createElement(k,null);q.__doc_info={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:85,column:7},end:{line:85,column:49}},name:"Example2",value:q,source:"const Example2 = () => <Example2_inner />;",deps:()=>[R],provides:{}},q.__inner_source="() => <Example2_inner />";const P=e=>new Promise(t=>{setTimeout(t,e)}),M={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:87,column:0},end:{line:90,column:5}},name:"delay",value:P,source:"const delay = (ms) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });",deps:()=>[],provides:{}},L=new m.d({prov:"\u6d59\u6c5f",cities:[]}),B={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:92,column:0},end:{line:92,column:57}},name:"model3",value:L,source:"const model3 = new FormModel({ prov: '\u6d59\u6c5f', cities: [] });",deps:()=>[],provides:{FormModel:m.d}},Y=new m.a(async()=>{const e=L.getValue("prov");return await P(2e3),F.find(t=>t.prov===e).cities},[]),z={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:94,column:0},end:{line:104,column:2}},name:"cityDataSource$",value:Y,source:"const cityDataSource$ = new AsyncValue(\n  async () => {\n    // \u4f9d\u8d56\u6536\u96c6\u9700\u8981\u53d1\u751f\u5728\u540c\u6b65\u4ee3\u7801\u5757\u4e2d\n    const prov = model3.getValue('prov');\n\n    // \u6839\u636e\u7701\u4efd\u62c9\u53d6\u57ce\u5e02\u5217\u8868\uff0c 2000ms \u5ef6\u8fdf\u7528\u4e8e\u6a21\u62df\u5b9e\u9645\u60c5\u51b5\n    await delay(2000);\n    return ALL_CITIES.find((item) => item.prov === prov).cities;\n  },\n  /* \u8fd9\u4e2a\u7a7a\u6570\u7ec4\u8868\u793a\u57ce\u5e02\u6570\u636e\u6e90\u7684\u521d\u59cb\u503c */ [],\n);",deps:()=>[B,M,j],provides:{AsyncValue:m.a}},K=Object(u.b)(()=>{const e=L.getField("prov"),t=L.getField("cities");return l.a.createElement(m.b,{model:L},l.a.createElement(m.c,{component:"singleSelect",label:"\u7701\u4efd(\u5355\u9009)",help:"\u5207\u6362\u7701\u4efd\u65f6\uff0c\u5f02\u6b65\u52a0\u8f7d\u57ce\u5e02\u6570\u636e\u6e90",field:e,componentProps:{hasClear:!0,dataSource:F.map(e=>e.prov)}}),l.a.createElement(m.c,{component:"multiSelect",label:"\u57ce\u5e02(\u591a\u9009)",field:t,help:"loading"===Y.status?l.a.createElement("span",{style:{color:"red"}},"loading..."):"",componentProps:{hasClear:!0,dataSource:Y.current}}),l.a.createElement(m.b.Effect,{watch:e,effect:()=>{t.value=[]}}))}),G={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:106,column:0},end:{line:140,column:3}},name:"Example3_inner",value:K,source:"const Example3_inner = observer(() => {\n  const prov = model3.getField('prov');\n  const cities = model3.getField('cities');\n\n  return (\n    <Form model={model3}>\n      <FormItem\n        component=\"singleSelect\"\n        label=\"\u7701\u4efd(\u5355\u9009)\"\n        help=\"\u5207\u6362\u7701\u4efd\u65f6\uff0c\u5f02\u6b65\u52a0\u8f7d\u57ce\u5e02\u6570\u636e\u6e90\"\n        field={prov}\n        componentProps={{\n          hasClear: true,\n          dataSource: ALL_CITIES.map((item) => item.prov),\n        }}\n      />\n      <FormItem\n        component=\"multiSelect\"\n        label=\"\u57ce\u5e02(\u591a\u9009)\"\n        field={cities}\n        help={cityDataSource$.status === 'loading' ? <span style={{ color: 'red' }}>loading...</span> : ''}\n        componentProps={{\n          hasClear: true,\n          dataSource: cityDataSource$.current,\n        }}\n      />\n      <Form.Effect\n        watch={prov}\n        effect={() => {\n          cities.value = [];\n        }}\n      />\n    </Form>\n  );\n});",deps:()=>[B,j,z],provides:{observer:u.b,Form:m.b,FormItem:m.c}},D=()=>l.a.createElement(K,null),W={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/effects-examples.tsx",loc:{start:{line:142,column:7},end:{line:142,column:49}},name:"Example3",value:D,source:"const Example3 = () => <Example3_inner />;",deps:()=>[G],provides:{}};D.__inner_source="() => <Example3_inner />",D.__doc_info=W;var $,U={id:"effects",title:"xform \u8054\u52a8"},J={unversionedId:"xform/effects",id:"xform/effects",isDocsHomePage:!1,title:"xform \u8054\u52a8",description:"\u5728 xform \u4e2d\uff0c\u8868\u5355\u8054\u52a8\u4e3b\u8981\u4f9d\u8d56 mobx reaction & computed \u8fd9\u4e24\u9879\u80fd\u529b\u3002\u5982\u679c\u4f60\u719f\u6089 mobx\uff0c\u4f60\u53ef\u4ee5\u5f88\u5feb\u5730\u4e0a\u624b xform \u4e2d\u7684\u8054\u52a8\u3002",source:"@site/docs/xform/effects.mdx",sourceDirName:"xform",slug:"/xform/effects",permalink:"/rex-design/docs/xform/effects",editUrl:"https://github.com/alibaba/rex-design/edit/main/packages/doc/docs/xform/effects.mdx",version:"current",frontMatter:{id:"effects",title:"xform \u8054\u52a8"},sidebar:"docs",previous:{title:"xform \u8fdb\u9636",permalink:"/rex-design/docs/xform/advanced"},next:{title:"xform core",permalink:"/rex-design/docs/xform/core"}},H=[{value:"field \u5199\u6cd5",id:"field-\u5199\u6cd5",children:[]},{value:"\u8054\u52a8",id:"\u8054\u52a8",children:[{value:"\u540c\u6b65\u8ba1\u7b97\u72b6\u6001",id:"\u540c\u6b65\u8ba1\u7b97\u72b6\u6001",children:[]},{value:"\u540c\u6b65\u72b6\u6001\u4fee\u6539",id:"\u540c\u6b65\u72b6\u6001\u4fee\u6539",children:[]},{value:"\u5f02\u6b65\u6570\u636e\u6e90",id:"\u5f02\u6b65\u6570\u636e\u6e90",children:[]},{value:"\u590d\u6742\u8054\u52a8",id:"\u590d\u6742\u8054\u52a8",children:[]},{value:"\u6307\u5b9a\u4f5c\u7528\u57df\u5185\u7684\u8054\u52a8",id:"\u6307\u5b9a\u4f5c\u7528\u57df\u5185\u7684\u8054\u52a8",children:[]}]}],X=($="Story",function(e){return console.warn("Component "+$+" was not imported, exported, or provided by MDXProvider as global scope"),Object(i.b)("div",e)}),Z={toc:H};function Q(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},Z,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"\u5728 xform \u4e2d\uff0c\u8868\u5355\u8054\u52a8\u4e3b\u8981\u4f9d\u8d56 mobx ",Object(i.b)("a",{parentName:"p",href:"https://mobx.js.org/reactions.html"},"reaction")," & ",Object(i.b)("a",{parentName:"p",href:"https://mobx.js.org/computeds.html"},"computed")," \u8fd9\u4e24\u9879\u80fd\u529b\u3002\u5982\u679c\u4f60\u719f\u6089 mobx\uff0c\u4f60\u53ef\u4ee5\u5f88\u5feb\u5730\u4e0a\u624b xform \u4e2d\u7684\u8054\u52a8\u3002"),Object(i.b)("p",null,"\u5728 mobx \u7684\u57fa\u7840\u4e0a\uff0cxform \u989d\u5916\u63d0\u4f9b\u4e86 Form.Effect \u4e0e AsyncValue\uff0c\u524d\u8005\u7528\u4e8e\u7b80\u5316 reaction \u7684\u4e66\u5199\uff0c\u540e\u8005\u7528\u4e8e\u5904\u7406\u5f02\u6b65\u6570\u636e\u6e90\u3002"),Object(i.b)("h2",{id:"field-\u5199\u6cd5"},"field \u5199\u6cd5"),Object(i.b)("p",null,"\u4e66\u5199\u8054\u52a8\u5173\u7cfb\u65f6\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 ",Object(i.b)("a",{parentName:"p",href:"api#field"},Object(i.b)("inlineCode",{parentName:"a"},"field"))," \u6765\u4ee3\u66ff ",Object(i.b)("inlineCode",{parentName:"p"},"name")," \u7528\u6cd5. field \u80fd\u66f4\u597d\u5730\u652f\u6301 TypeScript\uff0c\u907f\u514d\u6570\u636e\u7d22\u5f15\u4e66\u5199\u9519\u8bef\uff08\u4f9d\u8d56 TS 4.1 ",Object(i.b)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html"},"Template Literal Types"),"\uff09\u6216\u6570\u636e\u7c7b\u578b\u9519\u8bef\u3002"),Object(i.b)("p",null,"FormItem \u540c\u65f6\u652f\u6301 name \u4e0e field \u7528\u6cd5\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"// name \u5199\u6cd5\n<FormItem name=\"prov\" />;\n\n// field \u5199\u6cd5\nconst prov = model.getField('prov');\n<FormItem field={prov} />;\n")),Object(i.b)("p",null,"Form.Effect watch \u4e5f\u540c\u6837\u652f\u6301 field\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"// name \u5199\u6cd5\n<Form.Effect\n  watch=\"prov\"\n  effect={() => {\n    model.setValue('cities', []);\n  }}\n/>;\n\n// field \u5199\u6cd5\nconst prov = model.getField('prov');\nconst cities = model.getField('cities');\n<Form.Effect\n  watch={prov}\n  effect={() => {\n    cities.value = [];\n  }}\n/>;\n")),Object(i.b)("h2",{id:"\u8054\u52a8"},"\u8054\u52a8"),Object(i.b)("p",null,"\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u901a\u8fc7\u51e0\u4e2a\u793a\u4f8b\u6765\u5b66\u4e60 xform \u4e2d\u7684\u8054\u52a8\u3002 \u4e0b\u9762\u7684\u793a\u4f8b\u5c06\u4ee5\u300c\u7701\u4efd-\u57ce\u5e02-\u884c\u653f\u533a\u300d\u4e09\u7ea7\u7ea7\u8054\u9009\u62e9\u4e3a\u57fa\u7840\uff0c\u4ecb\u7ecd\u5982\u4f55\u7528 xform \u53bb\u4e66\u5199\u4e0d\u540c\u7c7b\u578b\u7684\u8868\u5355\u8054\u52a8\u3002"),Object(i.b)("h3",{id:"\u540c\u6b65\u8ba1\u7b97\u72b6\u6001"},"\u540c\u6b65\u8ba1\u7b97\u72b6\u6001"),Object(i.b)("p",null,"\u8fd9\u4e2a\u4f8b\u5b50\u53ea\u4f1a\u7528\u5230\u7701\u4efd\u548c\u57ce\u5e02\u4e24\u7ea7\uff0c\u8054\u52a8\u8981\u6c42\u5982\u4e0b\uff1a"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u7528\u6237\u9009\u62e9\u7701\u4efd\u540e\uff0c\u5c55\u793a\u57ce\u5e02\u4e0b\u62c9\u6846\uff1b"),Object(i.b)("li",{parentName:"ul"},"\u5207\u6362\u7701\u4efd\u65f6\uff0c\u57ce\u5e02\u4e0b\u62c9\u6846\u9700\u8981\u5207\u6362\u4e3a\u76f8\u5e94\u7684\u6570\u636e\u6e90\uff08\u6570\u636e\u6e90\u53ef\u4ee5\u88ab\u540c\u6b65\u83b7\u53d6\uff09")),Object(i.b)("p",null,"\u5bf9\u4e8e\u8fd9\u7c7b ",Object(i.b)("strong",{parentName:"p"},"\u53ef\u4ee5\u88ab\u540c\u6b65\u8ba1\u7b97\u7684\u72b6\u6001"),"\uff0c\u6211\u4eec ",Object(i.b)("strong",{parentName:"p"},"\u4f7f\u7528 mobx computed \u6216\u76f4\u63a5\u5728 react render \u51fd\u6570\u4e2d\u4e66\u5199\u8ba1\u7b97\u5173\u7cfb"),"\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"const prov = model1.getField('prov');\nconst cities = model1.getField('cities');\n\n<Form>\n  {/* \u76f4\u63a5\u4f7f\u7528 && \u8868\u793a\u300c\u7701\u4efd\u5b57\u6bb5\u975e\u7a7a\u65f6\uff0c\u6e32\u67d3\u57ce\u5e02\u4e0b\u62c9\u6846\u300d*/}\n  {prov.value && (\n    <FormItem\n      component=\"multiSelect\"\n      label=\"\u57ce\u5e02(\u591a\u9009)\"\n      field={cities}\n      componentProps={{\n        hasClear: true,\n        // \u76f4\u63a5\u8ba1\u7b97\u5e76\u8bbe\u7f6e\u57ce\u5e02\u6570\u636e\u6e90\n        dataSource: ALL_CITIES.find((item) => item.prov === prov.value).cities,\n      }}\n    />\n  )}\n</Form>;\n")),Object(i.b)("p",null,"\u5b9e\u9645\u793a\u4f8b\u5982\u4e0b\uff1a"),Object(i.b)(X,{fn:N,mdxType:"Story"}),Object(i.b)("h3",{id:"\u540c\u6b65\u72b6\u6001\u4fee\u6539"},"\u540c\u6b65\u72b6\u6001\u4fee\u6539"),Object(i.b)("p",null,"\u5728\u4e0a\u9762\u4f8b\u5b50\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u8054\u52a8\u8981\u6c42\uff1a"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u6bcf\u5f53\u7701\u4efd\u5207\u6362\u65f6\uff0c\u6e05\u7a7a\u57ce\u5e02\u9009\u62e9")),Object(i.b)("p",null,"\u5bf9\u4e8e\u8fd9\u7c7b ",Object(i.b)("strong",{parentName:"p"},"\u300c\u5f53 A \u5b57\u6bb5\u7684\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u66f4\u65b0 B \u5b57\u6bb5\u7684\u503c\u300d")," \u7684\u8054\u52a8\uff0c\u6211\u4eec\u9700\u8981\u7528\u5230 ",Object(i.b)("a",{parentName:"p",href:"api#formeffect"},Object(i.b)("inlineCode",{parentName:"a"},"<Form.Effect />"))," \u7ec4\u4ef6\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"const prov = model2.getField('prov');\nconst cities = model2.getField('cities');\n\n<Form.Effect\n  watch={prov}\n  effect={() => {\n    cities.value = [];\n  }}\n/>;\n")),Object(i.b)("p",null,"\u5b9e\u9645\u793a\u4f8b\u5982\u4e0b\uff1a"),Object(i.b)(X,{fn:q,mdxType:"Story"}),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},Object(i.b)("inlineCode",{parentName:"p"},"<Form.Effect />")," \u4e0d\u4ec5\u652f\u6301 field\uff0c\u8fd8\u652f\u6301 string\u3001asyncValue\u3001\u6570\u7ec4\u4ee5\u53ca\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u5177\u4f53\u7528\u6cd5\u8be6\u89c1 ",Object(i.b)("a",{parentName:"p",href:"api#formeffect"},"API"),"\u3002\u9664\u4e86\u4fee\u6539\u53e6\u4e00\u4e2a\u5b57\u6bb5\u7684\u503c\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728 effect \u4e2d\u6267\u884c\u4efb\u610f\u7684\u526f\u4f5c\u7528\uff0c\u4f8b\u5982\u53d1\u8d77\u4e00\u4e2a\u6570\u636e\u8bf7\u6c42\u3002"))),Object(i.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Effect \u7684\u7ec4\u5408")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},Object(i.b)("inlineCode",{parentName:"p"},"<Form.Effect />")," \u88ab\u8bbe\u8ba1\u4e3a\u666e\u901a\u7684 React \u7ec4\u4ef6\u7528\u6cd5\uff0c\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u50cf\u666e\u901a\u7ec4\u4ef6\u4e00\u6837\u5bf9 Form.Effect \u8fdb\u884c\u5c01\u88c5\uff1a"),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"const AutoCleanEffect = ({ trigger, target }) => (\n  <Form.Effect\n    watch={trigger}\n    effect={() => {\n      target.value = null;\n    }}\n  />\n);\n\n// \u6bcf\u5f53\u7701\u4efd\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u81ea\u52a8\u6e05\u7a7a\u57ce\u5e02\u5b57\u6bb5\n<AutoCleanEffect trigger={prov} target={cities} />;\n")))),Object(i.b)("h3",{id:"\u5f02\u6b65\u6570\u636e\u6e90"},"\u5f02\u6b65\u6570\u636e\u6e90"),Object(i.b)("p",null,"\u8003\u8651\u5728\u5f88\u591a\u5b9e\u9645\u4e1a\u52a1\u4e2d\uff0c\u5b50\u7ea7\u4e0b\u62c9\u6846\u7684\u6570\u636e\u6e90\u6765\u81ea\u4e8e\u5f02\u6b65\u63a5\u53e3\u3002\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u7684\u8868\u5355\u8054\u52a8\u9700\u6c42\u53d8\u4e3a\uff1a"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u5207\u6362\u7701\u4efd\u65f6\uff0c\u57ce\u5e02\u4e0b\u62c9\u6846\u9700\u8981\u5207\u6362\u4e3a\u76f8\u5e94\u7684\u6570\u636e\u6e90"),Object(i.b)("li",{parentName:"ul"},"\u57ce\u5e02\u6570\u636e\u6e90\u9700\u8981\u5f02\u6b65\u52a0\u8f7d\uff0c\u52a0\u8f7d\u8fc7\u7a0b\u4e2d\u6dfb\u52a0 loading \u6548\u679c")),Object(i.b)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 ",Object(i.b)("a",{parentName:"p",href:"api#asyncvalue"},Object(i.b)("inlineCode",{parentName:"a"},"AsyncValue"))," \u6765\u521b\u5efa\u5f02\u6b65\u6570\u636e\u6e90\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"const model3 = new FormModel({ prov: '\u6d59\u6c5f', cities: [] });\nconst prov = model3.getField('prov');\n\nconst cityDataSource$ = new AsyncValue(async () => {\n  return fetchCityDataSourceByProvince(prov.value);\n}, []);\n\n<FormItem\n  component=\"multiSelect\"\n  label=\"\u57ce\u5e02(\u591a\u9009)\"\n  field={cities}\n  help={cityDataSource$.status === 'loading' ? 'loading...' : ''}\n  componentProps={{\n    hasClear: true,\n    dataSource: cityDataSource$.current,\n  }}\n/>;\n")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"new AsyncValue")," \u4f1a\u6839\u636e\u53c2\u6570 fetcher \u521b\u5efa\u51fa\u4e00\u4e2a ",Object(i.b)("a",{parentName:"p",href:"api#asyncvalue"},Object(i.b)("inlineCode",{parentName:"a"},"AsyncValue"))," \u5bf9\u8c61\uff0c\u5f53 ",Object(i.b)("inlineCode",{parentName:"p"},"asyncValue.current")," \u88ab\u8ba2\u9605\u65f6\uff0cfetcher \u5c06\u88ab\u8c03\u7528\uff0c\u5176\u8fd4\u56de\u7ed3\u679c\u5c06\u4f5c\u4e3a ",Object(i.b)("inlineCode",{parentName:"p"},"asyncValue.current")," \u7684\u503c\uff0c\u800c ",Object(i.b)("inlineCode",{parentName:"p"},"asyncValue.status")," \u4f1a\u8bb0\u5f55\u76ee\u524d\u5f02\u6b65\u6570\u636e\u7684\u52a0\u8f7d\u72b6\u6001\uff08loading / ready / error)\u3002"),Object(i.b)("p",null,"\u5728 fetcher \u7684",Object(i.b)("strong",{parentName:"p"},"\u540c\u6b65\u4ee3\u7801"),"\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0cmobx \u4f1a\u8fdb\u884c",Object(i.b)("a",{parentName:"p",href:"https://mobx.js.org/understanding-reactivity.html"},"\u4f9d\u8d56\u6536\u96c6"),"\uff0c\u6bcf\u5f53\u5176\u4e2d\u7684\u4f9d\u8d56\u53d1\u751f\u53d8\u5316\u65f6\uff0cfetcher \u5c06\u4f1a\u88ab\u91cd\u65b0\u6267\u884c\uff0c\u4ee5\u4f7f\u7528\u6700\u65b0\u7684\u53c2\u6570\u53bb\u83b7\u53d6\u5f02\u6b65\u6570\u636e\u3002"),Object(i.b)("p",null,"\u5b9e\u9645\u793a\u4f8b\u5982\u4e0b\uff1a"),Object(i.b)(X,{fn:D,mdxType:"Story"}),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"xform AsyncValue \u53c2\u8003\u4e86 ",Object(i.b)("a",{parentName:"p",href:"https://recoiljs.org/docs/api-reference/core/selector#asynchronous-selectors"},"recoil async selector"),"\u3002 \u5141\u8bb8\u5f00\u53d1\u8005\u4f7f\u7528\u540c\u6b65\u7684\u4ee3\u7801\u6765\u63cf\u8ff0\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u975e\u5e38\u9002\u5408\u62bd\u8c61\u8868\u5355\u4e2d\u7684\u5f02\u6b65\u4e0b\u62c9\u6570\u636e\u6e90\u3002"))),Object(i.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Form.Effect \u652f\u6301 watch \u5f02\u6b65\u6570\u636e\u6e90\uff1a\u6bcf\u5f53\u5f02\u6b65\u6570\u636e\u6e90\u52a0\u8f7d\u5b8c\u6210\u65f6\uff0ceffect \u90fd\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21\u3002"))),Object(i.b)("h3",{id:"\u590d\u6742\u8054\u52a8"},"\u590d\u6742\u8054\u52a8"),Object(i.b)("p",null,"\u7075\u6d3b\u7ec4\u5408\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\u7684\u7528\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u975e\u5e38\u590d\u6742\u7684\u8868\u5355\u8054\u52a8\u3002 \u8fd9\u6b21\u7684\u4f8b\u5b50\u7528\u5230\u4e86\u300c\u7701\u4efd-\u57ce\u5e02-\u884c\u653f\u533a\u300d\u4e09\u7ea7\u7ea7\u8054\u9009\u62e9\uff0c\u5177\u4f53\u89c4\u5219\u5982\u4e0b\uff1a"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u5207\u6362\u300c\u7701\u4efd\u300d\u65f6\uff0c\u6e05\u7a7a\u57ce\u5e02"),Object(i.b)("li",{parentName:"ul"},"\u5207\u6362\u57ce\u5e02\u65f6\uff0c\u79fb\u9664\u4e0d\u5408\u7406\u7684\u503c"),Object(i.b)("li",{parentName:"ul"},"\u57ce\u5e02\u548c\u884c\u653f\u533a\u5747\u4e3a\u5f02\u6b65\u6570\u636e\u6e90"),Object(i.b)("li",{parentName:"ul"},"\u5207\u6362\u57ce\u5e02\u65f6\uff0c\u79fb\u9664\u65e0\u6548\u7684\u884c\u653f\u533a")),Object(i.b)(X,{fn:s.b,mdxType:"Story"}),Object(i.b)("p",null,"\u91c7\u7528 ",Object(i.b)("inlineCode",{parentName:"p"},"Form.Effect")," \u6765\u63cf\u8ff0\u6bcf\u4e2a\u72ec\u7acb\u7684\u8054\u52a8\u89c4\u5219\uff0c\u7ec4\u5408\u591a\u4e2a Form.Effect \u5b9e\u73b0\u6574\u4f53\u8868\u5355\u8054\u52a8\u9700\u6c42\u3002 \u901a\u8fc7\u8fd9\u79cd\u300c\u642d\u79ef\u6728\u300d\u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u80fd\u591f\u5728\u4e0d\u4fee\u6539\u5df2\u6709\u7684 FormItem \u4ee3\u7801\u7684\u57fa\u7840\u4e0a\uff0c\u4e00\u6b65\u4e00\u6b65\u5730\u5b9e\u73b0\u590d\u6742\u7684\u8868\u5355\u8054\u52a8\uff0c\u5e76\u59cb\u7ec8\u4fdd\u6301\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u3002"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},'const model = new FormModel(initValues);\nconst prov = model3.getField(\'prov\');\nconst cityDataSource$ = new AsyncValue(async () => {});\nconst districtDataSource$ = new AsyncValue(async () => {});\n\n<Form>\n  <FormItem name="prov" />\n  <FormItem name="cities" />\n  <FormItem name="districts" />\n  {/* \u9700\u8981\u65b0\u7684\u8868\u5355\u9879\u65f6\uff0c\u5c06\u65b0\u7684 FormItem \u6dfb\u52a0\u5728\u8fd9\u91cc */}\n\n  {/* \u5207\u6362\u300c\u7701\u4efd\u300d\u65f6\uff0c\u6e05\u7a7a\u57ce\u5e02 */}\n  <Form.Effect watch={prov} effect={() => {}} />\n\n  {/* \u57ce\u5e02\u5217\u8868\u52a0\u8f7d\u5b8c\u6210\u65f6\uff0c\u81ea\u52a8\u8bbe\u7f6e\u4e3a\u7b2c\u4e00\u4e2a\u57ce\u5e02 */}\n  <Form.Effect watch={cityDataSource$} effect={(cityList) => {}} />\n\n  {/* \u5207\u6362\u57ce\u5e02\u65f6\uff0c\u79fb\u9664\u65e0\u6548\u7684\u884c\u653f\u533a */}\n  <Form.Effect watch={cities} effect={(cities) => {}} />\n\n  {/* \u9700\u8981\u65b0\u7684\u8054\u52a8\u65f6\uff0c\u5c06\u65b0\u7684 Form.Effect \u6dfb\u52a0\u5728\u8fd9\u91cc */}\n</Form>;\n')),Object(i.b)("h3",{id:"\u6307\u5b9a\u4f5c\u7528\u57df\u5185\u7684\u8054\u52a8"},"\u6307\u5b9a\u4f5c\u7528\u57df\u5185\u7684\u8054\u52a8"),Object(i.b)("p",null,"\u5927\u90e8\u5206\u7684\u8054\u52a8\u90fd\u53d1\u751f\u5728\u9876\u5c42\uff0c\u4f46 xform \u7684\u5206\u5f62\u8bbe\u8ba1\u4f7f\u5f97\u8054\u52a8\u4e5f\u80fd\u53d1\u751f\u5728\u67d0\u4e2a model \u5185\u3002"),Object(i.b)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u300c\u6570\u7ec4\u5143\u7d20\u5185\u90e8\u4e92\u76f8\u8054\u52a8\u300d\u7684\u4f8b\u5b50\uff1a\u6bcf\u4e2a\u6570\u7ec4\u5143\u7d20\u4e2d\u7684 checkbox \u63a7\u5236 input \u7684\u663e\u793a\u6216\u9690\u85cf\u3002"),Object(i.b)(X,{fn:h,mdxType:"Story"}),Object(i.b)("p",null,"(todo \u6ca1\u6709\u627e\u5230\u66f4\u597d\u7684\u4f8b\u5b50\uff0c\u540c\u65f6\u5c40\u90e8\u8054\u52a8\u4e5f\u4e0d\u5e38\u89c1\uff0c\u6587\u6863\u5c31\u5148\u8fd9\u6837\u5427)"))}Q.isMDXComponent=!0},193:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return z})),n.d(t,"i",(function(){return M})),n.d(t,"c",(function(){return oe})),n.d(t,"e",(function(){return de})),n.d(t,"g",(function(){return pe})),n.d(t,"h",(function(){return F})),n.d(t,"f",(function(){return ce})),n.d(t,"a",(function(){return R}));var a=n(208),r=n.n(a),o=n(175),l=n(0),i=n.n(l);function s(e){return String(Number.parseInt(e))===e}function c(e){return s(e)?"array":"object"}function m(e,t,n){const a=Array.isArray(t)?t:p(t);let r=e;for(let l=0;l<a.length;l+=1){if(!o.i(r))return n;r=o.g(r,a[l])}return void 0===r?n:r}function d(e,t,n){const a=Array.isArray(t)?t:p(t),r=a.length-1;let l=e;for(let i=0;i<r;i+=1){const e=a[i];if(null==o.g(l,e)&&(s(a[i+1])?o.q(l,e,[]):o.q(l,e,{})),l=o.g(l,e),!o.i(l))return}o.i(l)&&o.q(l,a[r],n)}function u(e,t){return void 0!==e?e:t}function p(e){return e.split(".")}try{c.displayName="keyToValueShape",c.__docgenInfo={description:"",displayName:"keyToValueShape",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#keyToValueShape"]={docgenInfo:c.__docgenInfo,name:"keyToValueShape",path:"../xform/src/common-utils.tsx#keyToValueShape"})}catch(be){}try{m.displayName="observableGetIn",m.__docgenInfo={description:"lodash.get(...) for mobx observables",displayName:"observableGetIn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#observableGetIn"]={docgenInfo:m.__docgenInfo,name:"observableGetIn",path:"../xform/src/common-utils.tsx#observableGetIn"})}catch(be){}try{d.displayName="observableSetIn",d.__docgenInfo={description:"lodash.set(...) for mobx observables",displayName:"observableSetIn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#observableSetIn"]={docgenInfo:d.__docgenInfo,name:"observableSetIn",path:"../xform/src/common-utils.tsx#observableSetIn"})}catch(be){}try{u.displayName="composeState",u.__docgenInfo={description:"\u5408\u5e76\u53d7\u63a7\u72b6\u6001\u548c \u975e\u53d7\u63a7\u72b6\u6001",displayName:"composeState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#composeState"]={docgenInfo:u.__docgenInfo,name:"composeState",path:"../xform/src/common-utils.tsx#composeState"})}catch(be){}try{p.displayName="splitToPath",p.__docgenInfo={description:"",displayName:"splitToPath",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#splitToPath"]={docgenInfo:p.__docgenInfo,name:"splitToPath",path:"../xform/src/common-utils.tsx#splitToPath"})}catch(be){}class f{constructor(e){this.fieldMap=new Map,this.model=e,this.valueShape="auto"}_updateValueShape(e){"auto"===this.valueShape?(this.valueShape=e,this.subModels="object"===e?{}:[]):r()(this.valueShape===e,"[xform] Model \u7684\u7ed3\u6784\u9700\u8981\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u4fdd\u6301\u4e00\u81f4\uff0c\u4e00\u4e2a\u6570\u636e\u7d22\u5f15\u5bf9\u5e94\u7684\u7ed3\u6784\u4e0d\u80fd\u4ece\u6570\u7ec4\u53d8\u4e3a\u5bf9\u8c61\uff0c\u4e5f\u4e0d\u80fd\u4ece\u5bf9\u8c61\u53d8\u4e3a\u6570\u7ec4")}iterateModels(e){const t=n=>{if(null!=n.subModels)for(const a of Object.values(n.subModels))e(a),t(a._proxy)};t(this)}iterateFields(e){this.fieldMap.forEach(t=>{t._forkMap.forEach(e)}),this.iterateModels(t=>{t._proxy.fieldMap.forEach(t=>{t._forkMap.forEach(e)})})}getSubModel(e){const t=Array.isArray(e)?e:p(e);let n=this.model;for(let a=0;a<t.length-1;a++)n=n._proxy._getSubModel(t[a]);return n._proxy._getSubModel(t[t.length-1])}_getSubModel(e){this._updateValueShape(c(e));let t=this.subModels[e];return null==t&&(t=new y(this.model,e),this.subModels[e]=t),t}getField(e){const t=Array.isArray(e)?e:p(e);if(t.length>1){const e=t[t.length-1];return this.getSubModel(t.slice(0,-1))._proxy.getField([e])}const n=t[0];return this._updateValueShape(c(n)),this.ensureField(n)}ensureField(e,t,n){let a=this.fieldMap.get(e);return null==a&&(a=new g(this.model,e,t,n),this.fieldMap.set(e,a)),a}getTupleField(...e){this._updateValueShape("object");const t=e.join("...");return this.ensureField(t,g.ORIGINAL,e)}}const b=[];class h{constructor(e={}){this._nextModelId=1,this._nextFieldId=1,this.state={},this.root=this,this.parent=this,this.path=b,this._proxy=new f(this),this.values=e,Object(o.k)(this,{values:o.l,state:o.l,setValue:o.c})}getNextModelId(){return"Model_"+this._nextModelId++}getNextFieldId(){return"Field_"+this._nextFieldId++}getValue(e,t){return m(this.values,String(e),t)}setValue(e,t){d(this.values,e,t)}getSubModel(e){return this._proxy.getSubModel(String(e))}getField(e){return this._proxy.getField(e)}getTupleField(...e){return this._proxy.getTupleField(...e)}_asField(){throw new Error("FormModel \u4e0b\u4e0d\u652f\u6301\u4f7f\u7528 name=& \u7684 Field")}}class y{constructor(e,t){this.state={},r()(!t.includes("."),"name \u4e2d\u4e0d\u80fd\u5305\u542b ."),this.root=e.root,this.parent=e,this.name=t,this._proxy=new f(this),this.id=this.root.getNextModelId(),Object(o.k)(this,{values:o.d,state:o.l,setValue:o.c,name:o.l},{name:`${this.id}(${this.name})`})}get path(){return[...this.parent.path,this.name]}getSubModel(e){return this._proxy.getSubModel(String(e))}getField(e){return this._proxy.getField(String(e))}getTupleField(...e){return this._proxy.getTupleField(...e)}get values(){return this.parent.getValue(this.name)}set values(e){this.parent.setValue(this.name,e)}getValue(e,t){return m(this.values,String(e),t)}setValue(e,t){null==this.values&&(this._proxy._updateValueShape(c(p(String(e))[0])),this.values="array"===this._proxy.valueShape?[]:{}),d(this.values,String(e),t)}_asField(){return this.parent.getField(this.name)}}class g{constructor(e,t,n=g.ORIGINAL,a){if(this.config=null,this.isMounted=!1,this.state={},this.handleBlur=()=>this.validate("blur"),this.handleChange=e=>{var t;return this.value=u(e,null===(t=this.config)||void 0===t?void 0:t.fallbackValue),this.validate("change")},this.parent=e,this.name=t,this.forkName=n,this.tupleParts=a,this.id=this.parent.root.getNextFieldId(),Object(o.k)(this,{state:o.l,value:o.d,path:o.d,validate:o.c,handleBlur:o.c,handleChange:o.c},{name:`${this.id}(${t}${n===g.ORIGINAL?"":"#"+n})`}),n===g.ORIGINAL)this._forkMap=new Map;else{const e=this.parent.getField(t);this._forkMap=e._forkMap}this._forkMap.set(n,this)}get value(){return this.tupleParts?this.tupleParts.map(e=>this.parent.getValue(e)):this.parent.getValue(this.name)}set value(e){this.tupleParts?this.tupleParts.forEach((t,n)=>{this.parent.setValue(t,e[n])}):this.parent.setValue(this.name,e)}get path(){return this.parent.path.concat([this.name])}_useTrack(e){Object(l.useLayoutEffect)(()=>{if(!this.isMounted)return this.config=e,this.isMounted=!0,()=>{this.config=null,this.isMounted=!1};console.warn(`[xform] field \`${this.path.join(".")}\` \u5df2\u5728\u89c6\u56fe\u4e2d\u88ab\u52a0\u8f7d\uff0c\u4f60\u9700\u8981 fork \u8be5\u5b57\u6bb5\u6765\u8fdb\u884c\u591a\u6b21\u52a0\u8f7d.`)},[e])}getFork(e){return this._forkMap.has(e)?this._forkMap.get(e):new g(this.parent,this.name,e,this.tupleParts)}async validate(e="*"){var t,n;if(!this.isMounted)return;const{validate:a,fallbackValue:r,isEmpty:l,required:i,requiredMessage:s="\u8be5\u5b57\u6bb5\u4e3a\u5fc5\u586b\u9879",validateOnMount:c,validateOnBlur:m,validateOnChange:d}=this.config,p=u(this.value,r);if(!("*"===e||m&&"blur"===e||c&&"mount"===e||d&&"change"===e))return;let f=!1;return null===(n=(t=this.state).cancelValidation)||void 0===n||n.call(t),this.state.validating=!0,this.state.cancelValidation=Object(o.c)(()=>{f=!0,this.state.cancelValidation=null,this.state.validating=!1}),(async()=>i&&l(p)?s:a?a(p,this,e):null)().then(Object(o.c)(e=>{if(!f)return this.state.cancelValidation=null,this.state.validating=!1,this.state.error=e,e}))}}g.ORIGINAL="original";var v=n(181),x=n(171),S=n(177),O=n(174),_=n.n(O),E=n(26);const F={clearError:Object(o.c)((function(e){e._proxy.iterateFields(e=>{e.state.error=null})})),validateAll:Object(o.c)((function(e,t="*"){let n=!1;const a=Object(o.l)("array"===e._proxy.valueShape?[]:{}),r=[];return e._proxy.iterateFields(e=>{e.isMounted&&r.push(e.validate(t).then(Object(o.c)(t=>{t&&(n=!0,d(a,e.path,t))})))}),Promise.all(r).then(()=>({hasError:n,errors:Object(o.r)(a)}))})),submit:Object(o.c)((async function(e,t={}){const{onError:n,onSubmit:a,valueFilter:r="mounted"}=t,{hasError:l,errors:i}=await F.validateAll(e);l?null==n||n(i,e):"function"==typeof a&&("all"===r?a(Object(o.r)(e.values),e):Object(o.p)(()=>{const t=Object(o.l)("array"===e._proxy.valueShape?[]:{});e._proxy.iterateFields(e=>{e.isMounted&&void 0!==e.value&&d(t,e.path,e.value)}),a(Object(o.r)(t),e)}))})),reset:Object(o.c)((function(e,{onReset:t}={}){e.values={},F.clearError(e),null==t||t(e)}))};function j(e){return"number"==typeof e?e+"px":e}const I=E.d.div`
  --label-width: auto;
  --control-width: auto;
  --form-item-gap: 0;
  font-size: 12px;

  .form-item {
    margin-bottom: var(--form-item-gap);
  }

  .form-item.minimal {
    margin-bottom: 0;

    > .error-message,
    > .form-item-label {
      display: none;
    }
  }

  &.horizontal {
    .form-item {
      display: flex;
    }

    .form-item-label {
      flex: 0 0 var(--label-width);
      padding-top: 8px;
      padding-right: 12px;
      text-align: right;
      line-height: 1.5;
    }
  }

  &.vertical {
    .form-item-label {
      font-size: 12px;
      line-height: 1.5;
      margin-bottom: 4px;
    }
  }

  .form-item-preview {
    > .form-item-label {
      padding-top: 0;
    }
    > .form-item-control {
      line-height: 1.5;
    }
  }

  .required-indicator {
    margin-right: 4px;
    color: #eb4141;
    ::before {
      content: '*';
    }
  }

  .error-message {
    margin-top: 4px;
    color: #eb4141;
  }

  .tip {
    margin-left: 4px;
    color: #999;
    height: 18px;
    vertical-align: top;
  }

  .help {
    color: #999999;
    margin-top: 4px;
    line-height: 1.5;
  }

  .form-item-control {
    width: var(--control-width);

    > .next-input,
    > .next-select {
      width: 100%;
    }

    > .next-range {
      padding: 8px 0;
    }

    > .next-checkbox-group,
    > .next-radio-group,
    > .next-checkbox-wrapper {
      display: inline-block;
      line-height: 18px;
    }
  }

  &.horizontal .form-item-control {
    > .next-checkbox-group,
    > .next-radio-group,
    > .next-checkbox-wrapper {
      padding-top: 8px;
    }
  }
`;function V({children:e,className:t,style:n,labelPosition:a="left",labelWidth:r=("left"===a?120:"auto"),formItemGap:o=("left"===a?12:16),controlWidth:l=320}){return i.a.createElement(I,{style:{"--label-width":j(r),"--control-width":j(l),"--form-item-gap":j(o),...n},className:_()({horizontal:"left"===a,vertical:"top"===a},t)},e)}const C=E.d.div`
  ${I}.horizontal & {
    display: flex;
  }

  &.inline {
    .form-item-group-content {
      display: flex;
    }
  }
`,w=({label:e,asterisk:t,tip:n,children:a,labelWidth:r,controlWidth:o,className:l,style:s,inline:c})=>{const{isPreview:m}=B();return i.a.createElement(C,{className:_()("form-item-group",{inline:c,"form-item-preview":m},l),style:s},null==e&&null==n?null:i.a.createElement("div",{className:"form-item-label"},t&&i.a.createElement("span",{className:"required-indicator"}),e&&i.a.createElement("span",{className:"form-item-label-text"},e),n&&i.a.createElement(N,{title:n})),i.a.createElement("div",{className:"form-item-group-content",style:{"--label-width":j(r),"--control-width":j(o)}},a))},N=({title:e})=>i.a.createElement(x.Tooltip,{interactionKind:"hover",title:e,renderTarget:e=>i.a.createElement(S.b,Object.assign({},e,{type:"prompt",className:"tip"}))});function A({label:e,help:t,tip:n,asterisk:a,error:r,children:o,className:l,style:s}){return i.a.createElement("div",{className:_()("form-item",l),style:s},null==e&&null==n?null:i.a.createElement("div",{className:"form-item-label"},a&&i.a.createElement("span",{className:"required-indicator"}),e&&i.a.createElement("span",{className:"form-item-label-text"},e),n&&i.a.createElement(N,{title:n})),i.a.createElement("div",{className:"form-item-control"},o,t&&i.a.createElement("div",{className:"help"},t),r&&i.a.createElement("div",{className:"error-message"},r)))}function T({type:e="primary",children:t="\u63d0\u4ea4",...n}){const a=M(),r=B();return i.a.createElement(x.Button,Object.assign({onClick:()=>F.submit(a,r),type:e,children:t},n))}function k({children:e="\u91cd\u7f6e",...t}){const n=M(),a=B();return i.a.createElement(x.Button,Object.assign({onClick:Object(o.c)(()=>F.reset(n,a)),children:e},t))}try{V.displayName="FormLayout",V.__docgenInfo={description:"",displayName:"FormLayout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},labelPosition:{defaultValue:{value:"left"},description:"\u6807\u7b7e\u4f4d\u7f6e\uff0c\u53ef\u9009 'left' \u6216 'top'",name:"labelPosition",required:!1,type:{name:'"top" | "left"'}},labelWidth:{defaultValue:{value:"labelPosition === 'left' ? 120 : 'auto'"},description:"\u6807\u7b7e\u5bbd\u5ea6",name:"labelWidth",required:!1,type:{name:"string | number"}},controlWidth:{defaultValue:{value:320},description:"\u63a7\u4ef6\u5bbd\u5ea6",name:"controlWidth",required:!1,type:{name:"string | number"}},formItemGap:{defaultValue:{value:"labelPosition === 'left' ? 12 : 16"},description:"\u4e24\u4e2a form item \u4e4b\u95f4\u7684\u95f4\u8ddd",name:"formItemGap",required:!1,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormLayout"]={docgenInfo:V.__docgenInfo,name:"FormLayout",path:"../xform/src/form-ui.tsx#FormLayout"})}catch(be){}try{A.displayName="FormItemView",A.__docgenInfo={description:"",displayName:"FormItemView",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormItemView"]={docgenInfo:A.__docgenInfo,name:"FormItemView",path:"../xform/src/form-ui.tsx#FormItemView"})}catch(be){}try{T.displayName="FormSubmit",T.__docgenInfo={description:"",displayName:"FormSubmit",props:{size:{defaultValue:null,description:"\u5c3a\u5bf8",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},type:{defaultValue:{value:"primary"},description:"\u7ea7\u522b",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},shape:{defaultValue:null,description:"\u5916\u89c2",name:"shape",required:!1,type:{name:'"link" | "text" | "solid" | "warning" | "ghost"'}},target:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"target",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:'"button" | "a"'}},href:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"href",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"\u662f\u5426\u8f7d\u5165\u4e2d",name:"loading",required:!1,type:{name:"boolean"}},htmlType:{defaultValue:null,description:"html \u539f\u751f\u7c7b\u578b",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"\u6309\u94ae\u957f\u5ea6\u662f\u5426\u5360\u6ee1\u5bb9\u5668",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconButton:{defaultValue:null,description:"\u662f\u5426\u4e3a\u4ec5\u5305\u542b\u5355\u4e2a\u56fe\u6807\u7684\u6309\u94ae",name:"isIconButton",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"\u662f\u5426\u9009\u4e2d/\u6fc0\u6d3b",name:"isSelected",required:!1,type:{name:"boolean"}},leftElement:{defaultValue:null,description:"\u5185\u90e8\u5de6\u4fa7\u5143\u7d20",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"\u5185\u90e8\u53f3\u4fa7\u5143\u7d20",name:"rightElement",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormSubmit"]={docgenInfo:T.__docgenInfo,name:"FormSubmit",path:"../xform/src/form-ui.tsx#FormSubmit"})}catch(be){}try{k.displayName="FormReset",k.__docgenInfo={description:"",displayName:"FormReset",props:{size:{defaultValue:null,description:"\u5c3a\u5bf8",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},type:{defaultValue:null,description:"\u7ea7\u522b",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},shape:{defaultValue:null,description:"\u5916\u89c2",name:"shape",required:!1,type:{name:'"link" | "text" | "solid" | "warning" | "ghost"'}},target:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"target",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:'"button" | "a"'}},href:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"href",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"\u662f\u5426\u8f7d\u5165\u4e2d",name:"loading",required:!1,type:{name:"boolean"}},htmlType:{defaultValue:null,description:"html \u539f\u751f\u7c7b\u578b",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"\u6309\u94ae\u957f\u5ea6\u662f\u5426\u5360\u6ee1\u5bb9\u5668",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconButton:{defaultValue:null,description:"\u662f\u5426\u4e3a\u4ec5\u5305\u542b\u5355\u4e2a\u56fe\u6807\u7684\u6309\u94ae",name:"isIconButton",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"\u662f\u5426\u9009\u4e2d/\u6fc0\u6d3b",name:"isSelected",required:!1,type:{name:"boolean"}},leftElement:{defaultValue:null,description:"\u5185\u90e8\u5de6\u4fa7\u5143\u7d20",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"\u5185\u90e8\u53f3\u4fa7\u5143\u7d20",name:"rightElement",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormReset"]={docgenInfo:k.__docgenInfo,name:"FormReset",path:"../xform/src/form-ui.tsx#FormReset"})}catch(be){}try{w.displayName="FormItemGroup",w.__docgenInfo={description:"",displayName:"FormItemGroup",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"",name:"labelWidth",required:!1,type:{name:"string | number"}},controlWidth:{defaultValue:null,description:"",name:"controlWidth",required:!1,type:{name:"string | number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormItemGroup"]={docgenInfo:w.__docgenInfo,name:"FormItemGroup",path:"../xform/src/form-ui.tsx#FormItemGroup"})}catch(be){}class R{constructor(e,t){this.fetcher=e,this._refreshAtom=Object(o.f)("AsyncValue#refresh"),this._atom=Object(o.f)("AsyncValue"),this._disposers=[],this._error=null,this._start=()=>{this._reaction=new o.a("async",()=>{"loading"!==this._status&&(this._status="loading",this._atom.reportChanged()),this._reaction.track(()=>{var e,t;null===(e=this._cancelLastGetter)||void 0===e||e.call(this);let n=!1;this._cancelLastGetter=()=>{n=!0};const a=null!==(t=this._mobxGlobal.inXFormAsyncValueFetcher)&&void 0!==t&&t;this._mobxGlobal.inXFormAsyncValueFetcher=!0,this._refreshAtom.reportObserved(),this.fetcher().then(e=>{n||Object(o.p)(()=>{this._status="ready",e!==R.SKIP&&(this._current=e),this._error=null,this._atom.reportChanged()})}).catch(e=>{if(!(e instanceof R.StillLoading))throw Object(o.p)(()=>{this._status="error",this._error=e,this._atom.reportChanged()}),e}),this._mobxGlobal.inXFormAsyncValueFetcher=a})}),this._reaction.schedule_()},this._stop=()=>{this._reaction&&(this._reaction.dispose(),this._reaction=null)},this.fetcher=e,this._status="loading",this._current=t,Object(o.k)(this,{status:o.d,current:o.d,error:o.d}),this._disposers.push(this._stop),this._disposers.push(Object(o.m)(this._atom,this._start)),this._disposers.push(Object(o.n)(this._atom,this._stop)),this._disposers.push(()=>{this._status="ready",this._current=null,this._error=null})}get _mobxGlobal(){return Object(o.b)()}refresh(){this._refreshAtom.reportChanged()}dispose(){for(const e of this._disposers)e()}get status(){return this._atom.reportObserved(),this._status}get current(){if(this._mobxGlobal.inXFormAsyncValueFetcher){if(this._atom.reportObserved(),"loading"===status)throw new R.StillLoading;if("error"===status)throw this._error;return this._current}return this._atom.reportObserved(),this._current}get error(){return this._atom.reportObserved(),this._error}}R.SKIP="AsyncValue@SKIP",R.StillLoading=class extends Error{};const q=i.a.createContext(null);q.displayName="ModelContext";const P=q.Provider;function M(){return Object(l.useContext)(q)}const L=i.a.createContext({isPreview:!1,validateOnMount:!1,validateOnBlur:!0,validateOnChange:!0});L.displayName="FormEnvContext";const B=()=>Object(l.useContext)(L),Y=({children:e,...t})=>{const n=B();return i.a.createElement(L.Provider,{value:{...n,...t}},e)};function z({model:e,defaultValue:t,children:n,className:a,style:r,layout:o,...s}){const[c]=Object(l.useState)(()=>new h(t)),m=u(e,c);return i.a.createElement(Y,Object.assign({},s),i.a.createElement(P,{value:m},i.a.createElement(V,Object.assign({style:r,className:a},o),n)))}const K=Object(v.b)((function({watch:e,effect:t,fireImmediately:n}){const a=M(),r=Object(l.useCallback)((e,n)=>t(e,{model:a,prev:n,next:e}),[a,t]);return Object(l.useEffect)(()=>"string"==typeof e?Object(o.o)(()=>Object(o.r)(a.getValue(e)),r,{fireImmediately:n}):"function"==typeof e?Object(o.o)(e,r):e instanceof g?Object(o.o)(()=>e.value,r,{fireImmediately:n}):e instanceof R?Object(o.o)(()=>e.current,r,{fireImmediately:n}):Array.isArray(e)?Object(o.o)(()=>e.map(e=>"string"==typeof e?Object(o.r)(a.getValue(e)):e instanceof R?e.current:e.value),r,{fireImmediately:n}):void 0,[a,e,r,n]),null})),G=Object(v.b)(({children:e})=>e(M())),D=Object(v.b)(({name:e,children:t,layout:n,itemFactory:a})=>{var r,o;const l=M();if("&"===e)throw new Error(`XFormArray \u4e0d\u652f\u6301 name=&. path=(${l.path.join(".")||"root"})`);const s=l.getSubModel(e),c=null!==(o=null===(r=s.values)||void 0===r?void 0:r.length)&&void 0!==o?o:0;return i.a.createElement(P,{value:s},n({arrayModel:s,itemCount:c,itemContent:t,itemFactory:a}))}),W=Object(v.b)(({name:e,children:t})=>{const n=M();return"&"===e?i.a.createElement(i.a.Fragment,null,t):i.a.createElement(P,{value:n.getSubModel(e),children:t})});z.Submit=T,z.Reset=k,z.Effect=K,z.Array=D,z.Object=W,z.ModelProvider=P,z.ModelConsumer=G,z.Layout=V,z.ItemGroup=w,z.ItemView=A;try{z.displayName="Form",z.__docgenInfo={description:"",displayName:"Form",props:{model:{defaultValue:null,description:"\u53d7\u63a7\u7528\u6cd5\u3002 xform \u6a21\u578b\u5bf9\u8c61\uff0c\u4e00\u822c\u7531\u4e0a\u5c42\u901a\u8fc7 new FormModel(...) \u521b\u5efa\u800c\u6210",name:"model",required:!1,type:{name:"IModel<T>"}},defaultValue:{defaultValue:null,description:"\u975e\u53d7\u63a7\u7528\u6cd5\u3002 \u8868\u5355\u7684\u9ed8\u8ba4\u503c",name:"defaultValue",required:!1,type:{name:"T"}},style:{defaultValue:null,description:"@category \u5e03\u5c40",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"@category \u5e03\u5c40",name:"className",required:!1,type:{name:"string"}},layout:{defaultValue:null,description:"\u8868\u5355\u5e03\u5c40\u53c2\u6570\n@category \u5e03\u5c40",name:"layout",required:!1,type:{name:"FormLayoutParams"}},onSubmit:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onSubmit",required:!1,type:{name:"(submitValues: any, model: IModel<any>) => void"}},onError:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u51fa\u9519\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onError",required:!1,type:{name:"(errors: any, model: IModel<any>) => void"}},onReset:{defaultValue:null,description:"\u6e05\u7a7a\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Reset /> \u4f7f\u7528",name:"onReset",required:!1,type:{name:"(model: IModel<any>) => void"}},isPreview:{defaultValue:{value:"false"},description:"\u662f\u5426\u4e3a\u9884\u89c8\u6001",name:"isPreview",required:!1,type:{name:"boolean"}},validateOnMount:{defaultValue:{value:"false"},description:"\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnMount",required:!1,type:{name:"boolean"}},validateOnChange:{defaultValue:{value:"true"},description:"\u503c\u4fee\u6539\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnChange",required:!1,type:{name:"boolean"}},validateOnBlur:{defaultValue:{value:"true"},description:"\u7ec4\u4ef6\u5931\u53bb\u7126\u70b9\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnBlur",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form"]={docgenInfo:z.__docgenInfo,name:"Form",path:"../xform/src/form.tsx#Form"})}catch(be){}try{z.Submit.displayName="Form.Submit",z.Submit.__docgenInfo={description:"",displayName:"Form.Submit",props:{size:{defaultValue:null,description:"\u5c3a\u5bf8",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},type:{defaultValue:{value:"primary"},description:"\u7ea7\u522b",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},shape:{defaultValue:null,description:"\u5916\u89c2",name:"shape",required:!1,type:{name:'"link" | "text" | "solid" | "warning" | "ghost"'}},target:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"target",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:'"button" | "a"'}},href:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"href",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"\u662f\u5426\u8f7d\u5165\u4e2d",name:"loading",required:!1,type:{name:"boolean"}},htmlType:{defaultValue:null,description:"html \u539f\u751f\u7c7b\u578b",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"\u6309\u94ae\u957f\u5ea6\u662f\u5426\u5360\u6ee1\u5bb9\u5668",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconButton:{defaultValue:null,description:"\u662f\u5426\u4e3a\u4ec5\u5305\u542b\u5355\u4e2a\u56fe\u6807\u7684\u6309\u94ae",name:"isIconButton",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"\u662f\u5426\u9009\u4e2d/\u6fc0\u6d3b",name:"isSelected",required:!1,type:{name:"boolean"}},leftElement:{defaultValue:null,description:"\u5185\u90e8\u5de6\u4fa7\u5143\u7d20",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"\u5185\u90e8\u53f3\u4fa7\u5143\u7d20",name:"rightElement",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Submit"]={docgenInfo:z.Submit.__docgenInfo,name:"Form.Submit",path:"../xform/src/form.tsx#Form.Submit"})}catch(be){}try{z.Reset.displayName="Form.Reset",z.Reset.__docgenInfo={description:"",displayName:"Form.Reset",props:{size:{defaultValue:null,description:"\u5c3a\u5bf8",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},type:{defaultValue:null,description:"\u7ea7\u522b",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},shape:{defaultValue:null,description:"\u5916\u89c2",name:"shape",required:!1,type:{name:'"link" | "text" | "solid" | "warning" | "ghost"'}},target:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"target",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:'"button" | "a"'}},href:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"href",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"\u662f\u5426\u8f7d\u5165\u4e2d",name:"loading",required:!1,type:{name:"boolean"}},htmlType:{defaultValue:null,description:"html \u539f\u751f\u7c7b\u578b",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"\u6309\u94ae\u957f\u5ea6\u662f\u5426\u5360\u6ee1\u5bb9\u5668",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconButton:{defaultValue:null,description:"\u662f\u5426\u4e3a\u4ec5\u5305\u542b\u5355\u4e2a\u56fe\u6807\u7684\u6309\u94ae",name:"isIconButton",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"\u662f\u5426\u9009\u4e2d/\u6fc0\u6d3b",name:"isSelected",required:!1,type:{name:"boolean"}},leftElement:{defaultValue:null,description:"\u5185\u90e8\u5de6\u4fa7\u5143\u7d20",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"\u5185\u90e8\u53f3\u4fa7\u5143\u7d20",name:"rightElement",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Reset"]={docgenInfo:z.Reset.__docgenInfo,name:"Form.Reset",path:"../xform/src/form.tsx#Form.Reset"})}catch(be){}try{z.Effect.displayName="Form.Effect",z.Effect.__docgenInfo={description:"",displayName:"Form.Effect",props:{watch:{defaultValue:null,description:"",name:"watch",required:!0,type:{name:"string | (string | Field<unknown> | AsyncValue<any>)[] | (() => T) | Field<T> | AsyncValue<T>"}},effect:{defaultValue:null,description:"",name:"effect",required:!0,type:{name:"(value: T, detail: { prev: T; next: T; model: IModel<any>; }) => void"}},fireImmediately:{defaultValue:null,description:"",name:"fireImmediately",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Effect"]={docgenInfo:z.Effect.__docgenInfo,name:"Form.Effect",path:"../xform/src/form.tsx#Form.Effect"})}catch(be){}try{z.Array.displayName="Form.Array",z.Array.__docgenInfo={description:"",displayName:"Form.Array",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"(input: FormArrayLayoutInput) => ReactElement<any, string | JSXElementConstructor<any>>"}},itemFactory:{defaultValue:null,description:"",name:"itemFactory",required:!1,type:{name:"(arrayModel: SubModel<unknown[]>) => any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Array"]={docgenInfo:z.Array.__docgenInfo,name:"Form.Array",path:"../xform/src/form.tsx#Form.Array"})}catch(be){}try{z.Object.displayName="Form.Object",z.Object.__docgenInfo={description:"",displayName:"Form.Object",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Object"]={docgenInfo:z.Object.__docgenInfo,name:"Form.Object",path:"../xform/src/form.tsx#Form.Object"})}catch(be){}try{z.ModelConsumer.displayName="Form.ModelConsumer",z.ModelConsumer.__docgenInfo={description:"",displayName:"Form.ModelConsumer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.ModelConsumer"]={docgenInfo:z.ModelConsumer.__docgenInfo,name:"Form.ModelConsumer",path:"../xform/src/form.tsx#Form.ModelConsumer"})}catch(be){}try{z.Layout.displayName="Form.Layout",z.Layout.__docgenInfo={description:"",displayName:"Form.Layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},labelPosition:{defaultValue:{value:"left"},description:"\u6807\u7b7e\u4f4d\u7f6e\uff0c\u53ef\u9009 'left' \u6216 'top'",name:"labelPosition",required:!1,type:{name:'"top" | "left"'}},labelWidth:{defaultValue:{value:"labelPosition === 'left' ? 120 : 'auto'"},description:"\u6807\u7b7e\u5bbd\u5ea6",name:"labelWidth",required:!1,type:{name:"string | number"}},controlWidth:{defaultValue:{value:320},description:"\u63a7\u4ef6\u5bbd\u5ea6",name:"controlWidth",required:!1,type:{name:"string | number"}},formItemGap:{defaultValue:{value:"labelPosition === 'left' ? 12 : 16"},description:"\u4e24\u4e2a form item \u4e4b\u95f4\u7684\u95f4\u8ddd",name:"formItemGap",required:!1,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Layout"]={docgenInfo:z.Layout.__docgenInfo,name:"Form.Layout",path:"../xform/src/form.tsx#Form.Layout"})}catch(be){}try{z.ItemGroup.displayName="Form.ItemGroup",z.ItemGroup.__docgenInfo={description:"",displayName:"Form.ItemGroup",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"",name:"labelWidth",required:!1,type:{name:"string | number"}},controlWidth:{defaultValue:null,description:"",name:"controlWidth",required:!1,type:{name:"string | number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.ItemGroup"]={docgenInfo:z.ItemGroup.__docgenInfo,name:"Form.ItemGroup",path:"../xform/src/form.tsx#Form.ItemGroup"})}catch(be){}try{z.ItemView.displayName="Form.ItemView",z.ItemView.__docgenInfo={description:"",displayName:"Form.ItemView",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.ItemView"]={docgenInfo:z.ItemView.__docgenInfo,name:"Form.ItemView",path:"../xform/src/form.tsx#Form.ItemView"})}catch(be){}try{Y.displayName="FormEnvProvider",Y.__docgenInfo={description:"",displayName:"FormEnvProvider",props:{onSubmit:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onSubmit",required:!1,type:{name:"(submitValues: any, model: IModel<any>) => void"}},onError:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u51fa\u9519\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onError",required:!1,type:{name:"(errors: any, model: IModel<any>) => void"}},onReset:{defaultValue:null,description:"\u6e05\u7a7a\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Reset /> \u4f7f\u7528",name:"onReset",required:!1,type:{name:"(model: IModel<any>) => void"}},isPreview:{defaultValue:{value:"false"},description:"\u662f\u5426\u4e3a\u9884\u89c8\u6001",name:"isPreview",required:!1,type:{name:"boolean"}},validateOnMount:{defaultValue:{value:"false"},description:"\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnMount",required:!1,type:{name:"boolean"}},validateOnChange:{defaultValue:{value:"true"},description:"\u503c\u4fee\u6539\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnChange",required:!1,type:{name:"boolean"}},validateOnBlur:{defaultValue:{value:"true"},description:"\u7ec4\u4ef6\u5931\u53bb\u7126\u70b9\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnBlur",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#FormEnvProvider"]={docgenInfo:Y.__docgenInfo,name:"FormEnvProvider",path:"../xform/src/form.tsx#FormEnvProvider"})}catch(be){}var $=n(237),U=n.n($);function J(e){return e.value?"\u662f":"\u5426"}function H(e){return!e}function X(e){return null==e}function Z(e){return null==e||Array.isArray(e)&&e.every(X)}function Q(e){return e.value}const ee=[];function te(e,t){ee.push({component:e,...t})}function ne(e){var t,n;const a=null!==(t=e.statusPropName)&&void 0!==t?t:"status",r=null!==(n=e.valuePropName)&&void 0!==n?n:"value";function s({fallbackValue:t=e.fallbackValue,isEmpty:n=e.isEmpty,renderPreview:s=e.renderPreview,componentProps:c,name:m,field:d,...p}){var f;const b=M(),h=B(),y=function(e,t,n){let a;if(null!=e)a=e;else if("&"===n)a=t._asField();else{if(null==n)throw new Error("<FormItem /> \u5fc5\u987b\u901a\u8fc7 name \u6216 field \u6765\u6307\u5b9a\u5bf9\u5e94\u7684\u6570\u636e\u7d22\u5f15");a=t.getField(n)}return a}(d,b,m),g={fallbackValue:t,isEmpty:n,validateOnChange:h.validateOnChange,validateOnBlur:h.validateOnBlur,validateOnMount:h.validateOnMount,...p};y._useTrack(g),Object(l.useEffect)(()=>{if(g.validateOnMount){y.validate("mount");const e=y.state.cancelValidation;return()=>{null==e||e()}}},[]);const v=y.state.error,x=Object(o.r)(u(y.value,t)),S={...U()(p,["dataSource","readOnly","disabled"]),...c,[a]:u(null==c?void 0:c[a],u(p[a],v?"error":void 0)),[r]:u(p[r],x),onChange:u(p.onChange,y.handleChange),onBlur:u(p.onBlur,y.handleBlur)};let O;return O=h.isPreview&&s?s(S):e.render?e.render(S):i.a.createElement(e.component,Object.assign({},S)),i.a.createElement(A,{label:p.label,help:p.help,asterisk:null!==(f=p.asterisk)&&void 0!==f?f:p.required,error:v,tip:p.tip,style:p.style,className:_()(p.className,{"form-item-preview":h.isPreview})},O)}return s.displayName="FormItem__"+e.name,Object(v.b)(s)}te(x.Switch,{name:"switch",renderPreview:J,fallbackValue:!1,isEmpty:H}),te(x.Checkbox,{name:"checkbox",renderPreview:J,fallbackValue:!1,valuePropName:"checked",isEmpty:H}),te(x.CheckboxGroup,{name:"checkboxGroup",fallbackValue:[],renderPreview(e){var t;const n=null!==(t=e.value)&&void 0!==t?t:e.defaultValue,a=new x.ListStore(e.dataSource);return n.map(e=>{const t=a.getItem(e);return t?t.label:e}).join("\u3001")},isEmpty:e=>null==e||0===e.length}),te(x.RadioGroup,{name:"radioGroup",fallbackValue:null,renderPreview(e){var t;const n=null!==(t=e.value)&&void 0!==t?t:e.defaultValue,a=new x.ListStore(e.dataSource).getItem(n);return a?a.label:n},isEmpty:H}),te(x.DatePicker,{name:"datePicker",renderPreview:Q,fallbackValue:null,isEmpty:H}),te(x.DateRangePicker,{name:"dateRangePicker",renderPreview(e){var t;const n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return`${n[0]||"-"} ~ ${n[1]||"-"}`},fallbackValue:[],isEmpty:Z}),te(x.TimePicker,{name:"timePicker",renderPreview:Q,fallbackValue:"",isEmpty:H}),te(x.FilePicker,{name:"filePicker",renderPreview(e){var t;const n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return i.a.createElement(x.Flex,{spacing:"s",direction:"column"},n.map(({id:e,name:t,url:n})=>i.a.createElement(x.FlexItem,{key:e,bg:"fill.layer1",px:"m"},i.a.createElement(x.Link,{href:n},t))))},fallbackValue:[],isEmpty:Z}),te(x.MediaPicker,{name:"mediaPicker",renderPreview(e){var t;const n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return i.a.createElement(x.Flex,{spacing:"m"},n.map(({id:e,name:t,url:n})=>{const a=`${Object(x.colors)("fill.layer1")} url(${n}) center center / 100% no-repeat`;return i.a.createElement(x.Box,{key:e,size:"100px",title:t,display:"inline-block",style:{background:a}})}))},fallbackValue:[],isEmpty:Z}),te(x.Input,{name:"input",renderPreview:Q,fallbackValue:"",isEmpty:H}),te(x.Textarea,{name:"textarea",renderPreview:Q,fallbackValue:"",isEmpty:H}),te(x.NumberInput,{name:"numberInput",renderPreview:Q,fallbackValue:null,isEmpty:X}),te(x.Range,{name:"range",renderPreview:Q,fallbackValue:0,isEmpty:X}),te(x.Select,{name:"select",renderPreview:Q,fallbackValue:null,isEmpty:X}),te(x.SingleSelect,{name:"singleSelect",renderPreview:Q,fallbackValue:null,isEmpty:H}),te(x.MultiSelect,{name:"multiSelect",renderPreview:Q,fallbackValue:[],isEmpty:Z}),te(x.TreeSelect,{name:"treeSelect",renderPreview:Q,fallbackValue:null,isEmpty:Z}),te(x.SingleTreeSelect,{name:"singleTreeSelect",renderPreview:Q,fallbackValue:null,isEmpty:H}),te(x.MultiTreeSelect,{name:"multiTreeSelect",renderPreview:Q,fallbackValue:[],isEmpty:Z}),te((function({items:e,value:t,onChange:n,...a}){return i.a.createElement("div",Object.assign({style:{display:"flex",gap:8}},a),e.map(e=>i.a.createElement(x.Button,{key:e,type:e===t?"primary":"normal",onClick:()=>n(e)},e)))}),{name:"testButtonGroup",fallbackValue:"",renderPreview:Q,isEmpty:H});const ae={};for(const he of ee){const e=ne(he);if(ae[he.name]=e,he.aliases)for(const t of he.aliases)ae[t]=e}const re=ne({name:"notFound",fallbackValue:null,isEmpty:()=>!1,render:({component:e})=>i.a.createElement("div",{style:{border:"1px dashed red",fontSize:14,padding:4,color:"red"}},i.a.createElement("code",null,"<FormItem component='",e,"' />")," \u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7ec4\u4ef6\uff0c\u8bf7\u68c0\u67e5\u7ec4\u4ef6\u540d\u79f0\u662f\u5426\u62fc\u5199\u6b63\u786e")});function oe({component:e,...t}){const n=ae[e];return null==n?i.a.createElement(re,Object.assign({},t,{componentProps:{component:e}})):i.a.createElement(n,t)}oe.register=e=>{ae[e.name]=ne(e)},oe.COMPONENT_DICT=ae;try{ne.displayName="createFormItem",ne.__docgenInfo={description:"",displayName:"createFormItem",props:{name:{defaultValue:null,description:"\u540d\u79f0",name:"name",required:!0,type:{name:"string"}},component:{defaultValue:null,description:'\u63a7\u4ef6\u5bf9\u5e94\u7684 React \u7ec4\u4ef6\uff0c\u4f8b\u5982 `<FormItem component="select" />` \u5bf9\u5e94 `Select` \u7ec4\u4ef6.',name:"component",required:!1,type:{name:"ComponentType<FormItemComponentProps>"}},render:{defaultValue:null,description:"\u63a7\u4ef6\u6e32\u67d3\u65b9\u6cd5\uff0c\u4e0e component \u53c2\u6570\u4e8c\u9009\u4e00\uff0c\u4f18\u5148\u7ea7\u9ad8\u4e8e component",name:"render",required:!1,type:{name:"(arg: FormItemComponentProps) => ReactElement<any, string | JSXElementConstructor<any>>"}},valuePropName:{defaultValue:null,description:"\u7ec4\u4ef6\u503c\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a `'value'`",name:"valuePropName",required:!1,type:{name:"string"}},statusPropName:{defaultValue:null,description:"\u7ec4\u4ef6\u72b6\u6001\u503c\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a `'status'`",name:"statusPropName",required:!1,type:{name:"string"}},renderPreview:{defaultValue:null,description:"\u9884\u89c8\u6001\u4e0b\u7ec4\u4ef6\u7684\u6e32\u67d3\u65b9\u6cd5\u3002\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u65b9\u6cd5\uff0c\u9884\u89c8\u6001\u4e0b\u5c06\u4f7f\u7528 render/component \u4f5c\u4e3a\u540e\u5907\u65b9\u6848.",name:"renderPreview",required:!1,type:{name:"(props: FormItemComponentProps) => ReactNode"}},fallbackValue:{defaultValue:null,description:"\u5f53\u6a21\u578b\u4e2d\u7684\u5b57\u6bb5\u503c\u4e3a\u7a7a\uff08undefined\uff09\u65f6\uff0c\u6e32\u67d3\u63a7\u4ef6\u6240\u4f7f\u7528\u7684\u503c",name:"fallbackValue",required:!0,type:{name:"any"}},isEmpty:{defaultValue:null,description:"\u7ec4\u4ef6\u7c7b\u578b\u9ed8\u8ba4\u7684\u7a7a\u503c\u5224\u65ad\u65b9\u6cd5",name:"isEmpty",required:!0,type:{name:"(value: any) => boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-item.tsx#createFormItem"]={docgenInfo:ne.__docgenInfo,name:"createFormItem",path:"../xform/src/form-item.tsx#createFormItem"})}catch(be){}try{oe.displayName="FormItem",oe.__docgenInfo={description:"",displayName:"FormItem",props:{component:{defaultValue:null,description:"",name:"component",required:!0,type:{name:"string"}},componentProps:{defaultValue:null,description:"",name:"componentProps",required:!1,type:{name:"any"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!1,type:{name:"any"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},field:{defaultValue:null,description:"",name:"field",required:!1,type:{name:"Field<unknown>"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(nextValue: any) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"() => void"}},renderPreview:{defaultValue:null,description:"",name:"renderPreview",required:!1,type:{name:"(props: FormItemProps) => ReactNode"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},fallbackValue:{defaultValue:null,description:"",name:"fallbackValue",required:!1,type:{name:"any"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"(value: any) => boolean"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},requiredMessage:{defaultValue:null,description:"",name:"requiredMessage",required:!1,type:{name:"string"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"(value: any, field: Field<any>, trigger: FieldValidateTrigger) => string | Promise<any>"}},validateOnMount:{defaultValue:null,description:"",name:"validateOnMount",required:!1,type:{name:"boolean"}},validateOnChange:{defaultValue:null,description:"",name:"validateOnChange",required:!1,type:{name:"boolean"}},validateOnBlur:{defaultValue:null,description:"",name:"validateOnBlur",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-item.tsx#FormItem"]={docgenInfo:oe.__docgenInfo,name:"FormItem",path:"../xform/src/form-item.tsx#FormItem"})}catch(be){}function le(e){e.subModels.forEach((e,t)=>{e.name=String(t)})}function ie(e,t,n){if(null==e)return;const[a]=e.splice(t,1);e.splice(n,0,a)}function se(e,t,n){if(null==e)return;const a=e[t];e[t]=e[n],e[n]=a}const ce={append:Object(o.c)((e,t)=>{var n;null==e.values&&(e.values=[]),e.values.push(null!==(n=null==t?void 0:t(e))&&void 0!==n?n:{})}),delete:Object(o.c)((e,t)=>{r()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),e.values.splice(t,1),e._proxy.subModels.splice(t,1),le(e._proxy)}),moveUp:Object(o.c)((e,t)=>{0!==t&&(r()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),se(e.values,t,t-1),se(e._proxy.subModels,t,t-1),le(e._proxy))}),moveDown:Object(o.c)((e,t)=>{t!==e.values.length-1&&(r()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),se(e.values,t,t+1),se(e._proxy.subModels,t,t+1),le(e._proxy))}),clear:Object(o.c)(e=>{null!=e.values&&0!==e.values.length&&(r()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),e.values=[],e._proxy.subModels.length=0)}),dragAndDrop:Object(o.c)((e,t,n)=>{r()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),ie(e.values,t,n),ie(e._proxy.subModels,t,n),le(e._proxy)}),renderArrayItem:(e,t,n)=>i.a.createElement(z.Object,{name:String(t)},n),getKey:(e,t)=>e.getSubModel(t).id},me=e=>{const t=[];for(let n=0;n<e;n++)t.push(n);return t},de=({title:e,showItemCount:t,showItemOrder:n,style:a,className:r}={})=>{const l={position:"absolute",top:8,right:8,display:"flex",gap:8,zIndex:20};return s=>{const{arrayModel:c,itemContent:m,itemCount:d,itemFactory:u}=s;return i.a.createElement("div",{className:_()("xform-array",r),style:{marginTop:16,marginBottom:8,...a}},(e||t)&&i.a.createElement("h2",null,null!=e?e:"\u5217\u8868"," ",t&&`(${d})`),0===d&&i.a.createElement("div",{style:{border:"1px dashed #aaa",marginTop:16,padding:8,position:"relative",fontSize:20}},"\u7a7a\u7a7a\u5982\u4e5f~~"),i.a.createElement("div",{className:"xform-array-items"},me(d).map(e=>i.a.createElement("div",{key:ce.getKey(c,e),className:"xform-array-item",style:{border:"1px dashed #aaa",marginTop:16,padding:8,position:"relative"}},n&&i.a.createElement("code",{style:{fontSize:16}},c.path.join("."),"#",e),i.a.createElement(ue,Object.assign({},s,{itemIndex:e,style:l})),ce.renderArrayItem(c,e,m)))),i.a.createElement("div",{style:{marginTop:12}},i.a.createElement(x.Button,{onClick:Object(o.c)(()=>{ce.append(c,u)})},"\u6dfb\u52a0\u4e00\u9879")))}},ue=Object(v.b)(({arrayModel:e,itemCount:t,itemIndex:n,style:a})=>i.a.createElement("div",{style:a},i.a.createElement(x.Button,{size:"small",onClick:Object(o.c)(()=>{ce.delete(e,n)})},"\u5220\u9664"),i.a.createElement(x.Button,{size:"small",disabled:0===n,onClick:Object(o.c)(()=>{ce.moveUp(e,n)})},"\u4e0a\u79fb"),i.a.createElement(x.Button,{size:"small",disabled:n===t-1,onClick:Object(o.c)(()=>{ce.moveDown(e,n)})},"\u4e0b\u79fb"))),pe=({defaultColumnWidth:e,orderColumn:t,operationColumn:n,className:a,style:r}={})=>{const o={display:"flex",gap:0};return l=>{const{arrayModel:s,itemContent:c,itemCount:m,itemFactory:d}=l,u=i.a.Children.toArray(c).filter(e=>e.type===oe).map(e=>({name:"string"==typeof e.props.label?e.props.label:null,title:e.props.label,...e.props["x-table-column"],render:(t,n)=>i.a.createElement(z.Object,{name:String(n.itemIndex)},i.a.cloneElement(e,{className:_()(e.className,"minimal")}))}));return null!=t&&u.unshift({name:"#",...t,getValue:e=>e.itemIndex+1}),null!=n&&u.push({name:"",...n,render:(e,t)=>i.a.createElement(ue,Object.assign({},l,{itemIndex:t.itemIndex,style:o}))}),i.a.createElement("div",{style:r,className:a},i.a.createElement(x.BaseTable,{className:"bordered",primaryKey:"rowKey",defaultColumnWidth:e,dataSource:me(m).map(e=>({rowKey:ce.getKey(s,e),itemIndex:e})),columns:u,style:{"--cell-padding":"8px"}}),i.a.createElement("div",{style:{padding:4,height:48,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5"}},i.a.createElement(x.Button,{type:"primary",onClick:()=>{ce.append(s,d)}},"\u6dfb\u52a0\u4e00\u884c")))}};try{de.displayName="arrayCard",de.__docgenInfo={description:"",displayName:"arrayCard",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showItemCount:{defaultValue:null,description:"",name:"showItemCount",required:!1,type:{name:"boolean"}},showItemOrder:{defaultValue:null,description:"",name:"showItemOrder",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/array-layouts.tsx#arrayCard"]={docgenInfo:de.__docgenInfo,name:"arrayCard",path:"../xform/src/array-layouts.tsx#arrayCard"})}catch(be){}try{pe.displayName="arrayTable",pe.__docgenInfo={description:"",displayName:"arrayTable",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/array-layouts.tsx#arrayTable"]={docgenInfo:pe.__docgenInfo,name:"arrayTable",path:"../xform/src/array-layouts.tsx#arrayTable"})}catch(be){}class fe{constructor(e,{field:t=null,fetchLabel:n=null,skipEmptySearchResult:a=!1,resetSearchValueWhenValueChange:r=!1,debounceTime:l=200,mode:i="single"}={}){if(this.search=e,this._isFetchingLabel=!1,this._searchValue="",this._debouncedSearchValue="",this._labelCache=o.l.map({},{deep:!1}),this._disposers=[],this.setSearchValue=Object(o.c)((e,t=!0)=>{this._searchValue=e,t?(clearTimeout(this._debounceHandle),this._debounceHandle=setTimeout(Object(o.c)(()=>{this._debouncedSearchValue=this._searchValue}),this.options.debounceTime)):(clearTimeout(this._debounceHandle),this._debouncedSearchValue=this._searchValue)}),this.search=e,this.options={field:t,fetchLabel:n,skipEmptySearchResult:a,resetSearchValueWhenValueChange:r,debounceTime:l,mode:i},Object(o.k)(this,{_searchValue:o.l,_debouncedSearchValue:o.l,dataSource:o.d,selectProps:o.d,_isFetchingLabel:o.l}),this._dataSourceFromSearch$=new R(async()=>{const e=await this.search(this._debouncedSearchValue);return this.options.skipEmptySearchResult&&0===e.length?this._dataSourceFromSearch$.current:e},[]),this._disposers.push(()=>this._dataSourceFromSearch$.dispose()),this.options.field){const e=this.options.field;this._disposers.push(Object(o.o)(()=>({value:e.value,dataSource:this._dataSourceFromSearch$.current}),({value:e,dataSource:t})=>{for(const n of t)this._labelCache.set(n.value,n.label);if(null!=e&&null!=this.options.fetchLabel)if("multiple"===this.mode){const t=e.filter(e=>!this._labelCache.has(e));if(0===t.length)return;this._isFetchingLabel=!0,this.options.fetchLabel(t).then(Object(o.c)(e=>{this._isFetchingLabel=!1,e.forEach((e,n)=>{this._labelCache.set(t[n],e)})}))}else{if(this._labelCache.has(e))return;this._isFetchingLabel=!0,this.options.fetchLabel(e).then(Object(o.c)(t=>{this._isFetchingLabel=!1,this._labelCache.set(e,t)}))}},{fireImmediately:!0})),this.options.resetSearchValueWhenValueChange&&this._disposers.push(Object(o.o)(()=>e.value,()=>this._searchValue=""))}}get mode(){return this.options.mode}dispose(){Object(o.p)(()=>{this._labelCache.clear(),clearTimeout(this._debounceHandle);for(const e of this._disposers)e()})}get dataSource(){const e=this._dataSourceFromSearch$.current;if(this.options.field){const t=this.options.field.value,n=new Set(e.map(e=>e.value)),a=("multiple"===this.mode?t:[t]).filter(e=>!n.has(e)).map(e=>({label:this._labelCache.get(e),value:e})).filter(e=>null!=e.label&&e.label.includes(this._searchValue));return e.concat(a)}return e}get selectProps(){return{mode:this.mode,showSearch:!0,filterLocal:!1,searchValue:this._searchValue,onSearch:this.setSearchValue,dataSource:this.dataSource,state:"loading"===this._dataSourceFromSearch$.status||this._isFetchingLabel?"loading":void 0}}}try{fe.displayName="RemoteSearch",fe.__docgenInfo={description:"\u8fdc\u7a0b\u641c\u7d22\u8f85\u52a9\u51fd\u6570\uff0c\u7528\u4e8e\u7b80\u5316 Select \u8fdc\u7a0b\u641c\u7d22\u7684\u5b9e\u73b0.\n\n\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u7279\u6027\uff1a\n- \u641c\u7d22\u9632\u6296\uff1a \u9ed8\u8ba4\u4e3a 200ms\uff0c\u53ef\u901a\u8fc7 options.debounceTime \u8fdb\u884c\u8c03\u6574\n- label \u7f13\u5b58\uff1a \u5f53 value \u52a8\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f18\u5148\u4f7f\u7528\u5185\u90e8\u7f13\u5b58\u7684 label\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u6309\u9700\u83b7\u53d6 label\n  \uff08\u9700\u8981\u914d\u7f6e options.field & options.fetchLabel\uff09\n- loading \u72b6\u6001\uff1a dataSource \u52a0\u8f7d\u8fc7\u7a0b\u4e2d\uff0c\u81ea\u52a8\u8bbe\u7f6e state='loading'\n- \u591a\u9009\uff1a\u652f\u6301\u591a\u9009\u6a21\u5f0f\u4e0b\u7684\u8fdc\u7a0b\u641c\u7d22",displayName:"RemoteSearch",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/helpers/RemoteSearch.tsx#RemoteSearch"]={docgenInfo:fe.__docgenInfo,name:"RemoteSearch",path:"../xform/src/helpers/RemoteSearch.tsx#RemoteSearch"})}catch(be){}},238:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));var a=n(3),r=n(171),o=n(193),l=n(175),i=n(181),s=n(0),c=n.n(s);function m({children:e,fallback:t}){return"undefined"==typeof document||null==e?null!=t?t:null:c.a.createElement(c.a.Fragment,null,e())}const d={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/helpers.tsx",loc:{start:{line:8,column:0},end:{line:20,column:1}},name:"BrowserOnly",value:m,source:" function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }function BrowserOnly({\n  children,\n  fallback,\n}\n\n\n) {\n  if (typeof document === 'undefined' || children == null) {\n    return _nullishCoalesce(fallback, () => ( null));\n  }\n\n  return <>{children()}</>;\n}",deps:()=>[],provides:{React:c.a}},u=e=>c.a.createElement(m,null,()=>{const t=n(502).default;return c.a.createElement(t,Object(a.a)({style:{marginTop:8,fontSize:12,...e.style}},e))}),p={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/helpers.tsx",loc:{start:{line:22,column:7},end:{line:31,column:2}},name:"BrowserOnlyReactJson",value:u,source:"const BrowserOnlyReactJson = (props) => {\n  return (\n    <BrowserOnly>\n      {() => {\n        const ReactJson = require('react-json-view').default;\n        return <ReactJson style={{ marginTop: 8, fontSize: 12, ...props.style }} {...props} />;\n      }}\n    </BrowserOnly>\n  );\n};",deps:()=>[d],provides:{}};u.__doc_info=p,u.__inner_source="(props) => {\n  return (\n    <BrowserOnly>\n      {() => {\n        const ReactJson = require('react-json-view').default;\n        return <ReactJson style={{ marginTop: 8, fontSize: 12, ...props.style }} {...props} />;\n      }}\n    </BrowserOnly>\n  );\n}";const f=Object(i.b)(({style:e,defaultShow:t})=>{var n;const a=Object(o.i)(),i=Object(l.r)(a.values),s=null!==(n=a.state.showReactJson)&&void 0!==n?n:t;return c.a.createElement("div",{style:e},c.a.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},c.a.createElement(r.Switch,{checked:Boolean(s),onChange:Object(l.c)(e=>{a.state.showReactJson=e})}),"\u663e\u793a JSON"),s&&c.a.createElement(u,{name:"\u8868\u5355\u72b6\u6001\u9884\u89c8",src:i}))});i.b,c.a,o.i,l.r,r.Switch,l.c;try{u.displayName="BrowserOnlyReactJson",u.__docgenInfo={description:"",displayName:"BrowserOnlyReactJson",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../story/src/xform/helpers.tsx#BrowserOnlyReactJson"]={docgenInfo:u.__docgenInfo,name:"BrowserOnlyReactJson",path:"../story/src/xform/helpers.tsx#BrowserOnlyReactJson"})}catch(b){}try{f.displayName="ValuePreview",f.__docgenInfo={description:"",displayName:"ValuePreview",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../story/src/xform/helpers.tsx#ValuePreview"]={docgenInfo:f.__docgenInfo,name:"ValuePreview",path:"../story/src/xform/helpers.tsx#ValuePreview"})}catch(b){}},501:function(e,t,n){var a={"./af":245,"./af.js":245,"./ar":246,"./ar-dz":247,"./ar-dz.js":247,"./ar-kw":248,"./ar-kw.js":248,"./ar-ly":249,"./ar-ly.js":249,"./ar-ma":250,"./ar-ma.js":250,"./ar-sa":251,"./ar-sa.js":251,"./ar-tn":252,"./ar-tn.js":252,"./ar.js":246,"./az":253,"./az.js":253,"./be":254,"./be.js":254,"./bg":255,"./bg.js":255,"./bm":256,"./bm.js":256,"./bn":257,"./bn-bd":258,"./bn-bd.js":258,"./bn.js":257,"./bo":259,"./bo.js":259,"./br":260,"./br.js":260,"./bs":261,"./bs.js":261,"./ca":262,"./ca.js":262,"./cs":263,"./cs.js":263,"./cv":264,"./cv.js":264,"./cy":265,"./cy.js":265,"./da":266,"./da.js":266,"./de":267,"./de-at":268,"./de-at.js":268,"./de-ch":269,"./de-ch.js":269,"./de.js":267,"./dv":270,"./dv.js":270,"./el":271,"./el.js":271,"./en-au":272,"./en-au.js":272,"./en-ca":273,"./en-ca.js":273,"./en-gb":274,"./en-gb.js":274,"./en-ie":275,"./en-ie.js":275,"./en-il":276,"./en-il.js":276,"./en-in":277,"./en-in.js":277,"./en-nz":278,"./en-nz.js":278,"./en-sg":279,"./en-sg.js":279,"./eo":280,"./eo.js":280,"./es":281,"./es-do":282,"./es-do.js":282,"./es-mx":283,"./es-mx.js":283,"./es-us":284,"./es-us.js":284,"./es.js":281,"./et":285,"./et.js":285,"./eu":286,"./eu.js":286,"./fa":287,"./fa.js":287,"./fi":288,"./fi.js":288,"./fil":289,"./fil.js":289,"./fo":290,"./fo.js":290,"./fr":291,"./fr-ca":292,"./fr-ca.js":292,"./fr-ch":293,"./fr-ch.js":293,"./fr.js":291,"./fy":294,"./fy.js":294,"./ga":295,"./ga.js":295,"./gd":296,"./gd.js":296,"./gl":297,"./gl.js":297,"./gom-deva":298,"./gom-deva.js":298,"./gom-latn":299,"./gom-latn.js":299,"./gu":300,"./gu.js":300,"./he":301,"./he.js":301,"./hi":302,"./hi.js":302,"./hr":303,"./hr.js":303,"./hu":304,"./hu.js":304,"./hy-am":305,"./hy-am.js":305,"./id":306,"./id.js":306,"./is":307,"./is.js":307,"./it":308,"./it-ch":309,"./it-ch.js":309,"./it.js":308,"./ja":310,"./ja.js":310,"./jv":311,"./jv.js":311,"./ka":312,"./ka.js":312,"./kk":313,"./kk.js":313,"./km":314,"./km.js":314,"./kn":315,"./kn.js":315,"./ko":316,"./ko.js":316,"./ku":317,"./ku.js":317,"./ky":318,"./ky.js":318,"./lb":319,"./lb.js":319,"./lo":320,"./lo.js":320,"./lt":321,"./lt.js":321,"./lv":322,"./lv.js":322,"./me":323,"./me.js":323,"./mi":324,"./mi.js":324,"./mk":325,"./mk.js":325,"./ml":326,"./ml.js":326,"./mn":327,"./mn.js":327,"./mr":328,"./mr.js":328,"./ms":329,"./ms-my":330,"./ms-my.js":330,"./ms.js":329,"./mt":331,"./mt.js":331,"./my":332,"./my.js":332,"./nb":333,"./nb.js":333,"./ne":334,"./ne.js":334,"./nl":335,"./nl-be":336,"./nl-be.js":336,"./nl.js":335,"./nn":337,"./nn.js":337,"./oc-lnc":338,"./oc-lnc.js":338,"./pa-in":339,"./pa-in.js":339,"./pl":340,"./pl.js":340,"./pt":341,"./pt-br":342,"./pt-br.js":342,"./pt.js":341,"./ro":343,"./ro.js":343,"./ru":344,"./ru.js":344,"./sd":345,"./sd.js":345,"./se":346,"./se.js":346,"./si":347,"./si.js":347,"./sk":348,"./sk.js":348,"./sl":349,"./sl.js":349,"./sq":350,"./sq.js":350,"./sr":351,"./sr-cyrl":352,"./sr-cyrl.js":352,"./sr.js":351,"./ss":353,"./ss.js":353,"./sv":354,"./sv.js":354,"./sw":355,"./sw.js":355,"./ta":356,"./ta.js":356,"./te":357,"./te.js":357,"./tet":358,"./tet.js":358,"./tg":359,"./tg.js":359,"./th":360,"./th.js":360,"./tk":361,"./tk.js":361,"./tl-ph":362,"./tl-ph.js":362,"./tlh":363,"./tlh.js":363,"./tr":364,"./tr.js":364,"./tzl":365,"./tzl.js":365,"./tzm":366,"./tzm-latn":367,"./tzm-latn.js":367,"./tzm.js":366,"./ug-cn":368,"./ug-cn.js":368,"./uk":369,"./uk.js":369,"./ur":370,"./ur.js":370,"./uz":371,"./uz-latn":372,"./uz-latn.js":372,"./uz.js":371,"./vi":373,"./vi.js":373,"./x-pseudo":374,"./x-pseudo.js":374,"./yo":375,"./yo.js":375,"./zh-cn":376,"./zh-cn.js":376,"./zh-hk":377,"./zh-hk.js":377,"./zh-mo":378,"./zh-mo.js":378,"./zh-tw":379,"./zh-tw.js":379};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=501},503:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return B}));var a=n(3),r=n(171),o=n(193),l=n(181),i=n(170),s=n.n(i),c=n(0),m=n.n(c),d=n(238);function u({name:e,label:t,...n}){return m.a.createElement("div",Object(a.a)({},n,{style:{padding:8,border:"1px dashed #aaa",...n.style}}),m.a.createElement("p",{style:{fontWeight:"bold",margin:"0 0 8px 8px"}},t),m.a.createElement(o.b.Object,{name:e},m.a.createElement(o.c,{component:"input",name:"name",label:"\u59d3\u540d",componentProps:{style:{width:120}}}),m.a.createElement(o.c,{component:"input",name:"contact",label:"\u8054\u7cfb\u65b9\u5f0f",componentProps:{style:{width:180}}}),m.a.createElement(o.c,{style:{marginBottom:0},component:"singleSelect",name:"address.city",label:"\u5c45\u4f4f\u57ce\u5e02",required:!0,componentProps:{style:{width:100},dataSource:"\u676d\u5dde\uff0c\u4e0a\u6d77\uff0c\u5317\u4eac\uff0c\u6df1\u5733\uff0c\u5e7f\u5dde\uff0c\u6b66\u6c49\uff0c\u6210\u90fd".split("\uff0c")}})))}const p={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:10,column:0},end:{line:35,column:1}},name:"PersonForm",value:u,source:'function PersonForm({\n  name,\n  label,\n  ...others\n}) {\n  return (\n    <div {...others} style={{ padding: 8, border: \'1px dashed #aaa\', ...others.style }}>\n      <p style={{ fontWeight: \'bold\', margin: \'0 0 8px 8px\' }}>{label}</p>\n      <Form.Object name={name}>\n        <FormItem component="input" name="name" label="\u59d3\u540d" componentProps={{ style: { width: 120 } }} />\n        <FormItem component="input" name="contact" label="\u8054\u7cfb\u65b9\u5f0f" componentProps={{ style: { width: 180 } }} />\n        <FormItem\n          style={{ marginBottom: 0 }}\n          component="singleSelect"\n          name="address.city"\n          label="\u5c45\u4f4f\u57ce\u5e02"\n          required\n          componentProps={{\n            style: { width: 100 },\n            dataSource: \'\u676d\u5dde\uff0c\u4e0a\u6d77\uff0c\u5317\u4eac\uff0c\u6df1\u5733\uff0c\u5e7f\u5dde\uff0c\u6b66\u6c49\uff0c\u6210\u90fd\'.split(\'\uff0c\'),\n          }}\n        />\n      </Form.Object>\n    </div>\n  );\n}',deps:()=>[],provides:{React:m.a,Form:o.b,FormItem:o.c}};function f(){return m.a.createElement(o.b,{defaultValue:{me:{name:"rex design",gender:"\u7537",age:"1",contact:"alibaba.github.io/rex-design/",address:{city:"\u676d\u5dde"}}},layout:{labelWidth:80,formItemGap:8}},m.a.createElement("h4",null,"\u5bb6\u5ead\u4fe1\u606f\u767b\u8bb0\u8868"),m.a.createElement("div",{style:{display:"grid",grid:"auto-flow / repeat(auto-fill, minmax(280px, auto))",gap:8}},m.a.createElement(u,{name:"me",label:"\u4e2a\u4eba\u4fe1\u606f"}),m.a.createElement(u,{name:"father",label:"\u7236\u4eb2"}),m.a.createElement(u,{name:"mother",label:"\u6bcd\u4eb2"}),m.a.createElement(u,{name:"urgency",label:"\u5176\u4ed6\u7d27\u6025\u8054\u7cfb\u4eba"})),m.a.createElement(d.b,null))}const b={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:37,column:7},end:{line:62,column:1}},name:"ObjectExample",value:f,source:'function ObjectExample() {\n  return (\n    <Form\n      defaultValue={{\n        me: {\n          name: \'rex design\',\n          gender: \'\u7537\',\n          age: \'1\',\n          contact: \'alibaba.github.io/rex-design/\',\n          address: { city: \'\u676d\u5dde\' },\n        },\n      }}\n      layout={{ labelWidth: 80, formItemGap: 8 }}\n    >\n      <h4>\u5bb6\u5ead\u4fe1\u606f\u767b\u8bb0\u8868</h4>\n      <div style={{ display: \'grid\', grid: \'auto-flow / repeat(auto-fill, minmax(280px, auto))\', gap: 8 }}>\n        <PersonForm name="me" label="\u4e2a\u4eba\u4fe1\u606f" />\n        <PersonForm name="father" label="\u7236\u4eb2" />\n        <PersonForm name="mother" label="\u6bcd\u4eb2" />\n        <PersonForm name="urgency" label="\u5176\u4ed6\u7d27\u6025\u8054\u7cfb\u4eba" />\n      </div>\n\n      <ValuePreview />\n    </Form>\n  );\n}',deps:()=>[p],provides:{Form:o.b,ValuePreview:d.b}};f.__doc_info=b,f.__inner_source='function ObjectExample() {\n  return (\n    <Form\n      defaultValue={{\n        me: {\n          name: \'rex design\',\n          gender: \'\u7537\',\n          age: \'1\',\n          contact: \'alibaba.github.io/rex-design/\',\n          address: { city: \'\u676d\u5dde\' },\n        },\n      }}\n      layout={{ labelWidth: 80, formItemGap: 8 }}\n    >\n      <h4>\u5bb6\u5ead\u4fe1\u606f\u767b\u8bb0\u8868</h4>\n      <div style={{ display: \'grid\', grid: \'auto-flow / repeat(auto-fill, minmax(280px, auto))\', gap: 8 }}>\n        <PersonForm name="me" label="\u4e2a\u4eba\u4fe1\u606f" />\n        <PersonForm name="father" label="\u7236\u4eb2" />\n        <PersonForm name="mother" label="\u6bcd\u4eb2" />\n        <PersonForm name="urgency" label="\u5176\u4ed6\u7d27\u6025\u8054\u7cfb\u4eba" />\n      </div>\n\n      <ValuePreview />\n    </Form>\n  );\n}';const h=["\u97e9\u90fd\u8863\u820d","ZARA","\u4f18\u8863\u5e93","\u592a\u5e73\u9e1f"],y={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:64,column:0},end:{line:64,column:46}},name:"BRANDS",value:h,source:"const BRANDS = ['\u97e9\u90fd\u8863\u820d', 'ZARA', '\u4f18\u8863\u5e93', '\u592a\u5e73\u9e1f'];",deps:()=>[],provides:{}},g="\u901a\u52e4\uff0c\u767e\u642d\uff0c\u65f6\u5c1a\uff0c\u4f11\u95f2\uff0c\u539f\u521b\u8bbe\u8ba1\uff0c\u590d\u53e4\uff0c\u6c11\u65cf\u98ce\uff0c\u4f18\u96c5\uff0c\u6027\u611f\uff0c\u6734\u5b9e\uff0c\u5c45\u5bb6".split("\uff0c"),v={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:65,column:0},end:{line:65,column:64}},name:"STYLES",value:g,source:"const STYLES = '\u901a\u52e4\uff0c\u767e\u642d\uff0c\u65f6\u5c1a\uff0c\u4f11\u95f2\uff0c\u539f\u521b\u8bbe\u8ba1\uff0c\u590d\u53e4\uff0c\u6c11\u65cf\u98ce\uff0c\u4f18\u96c5\uff0c\u6027\u611f\uff0c\u6734\u5b9e\uff0c\u5c45\u5bb6'.split('\uff0c');",deps:()=>[],provides:{}};function x(e){r.Toaster.show({placement:"top-right",content:m.a.createElement("div",null,m.a.createElement("p",{style:{marginBottom:4,color:"--rex-colors-green-60"}},"\u6b63\u5728\u63d0\u4ea4..."),m.a.createElement("span",{style:{fontFamily:"monospace"}},JSON.stringify(e,null,2)))})}const S={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:67,column:0},end:{line:77,column:1}},name:"showSubmitToast",value:x,source:"function showSubmitToast(values) {\n  Toaster.show({\n    placement: 'top-right',\n    content: (\n      <div>\n        <p style={{ marginBottom: 4, color: '--rex-colors-green-60' }}>\u6b63\u5728\u63d0\u4ea4...</p>\n        <span style={{ fontFamily: 'monospace' }}>{JSON.stringify(values, null, 2)}</span>\n      </div>\n    ),\n  });\n}",deps:()=>[],provides:{Toaster:r.Toaster}};function O(e){r.Toaster.show({placement:"top-right",content:m.a.createElement("div",null,m.a.createElement("p",{style:{marginBottom:4,color:"var(--rex-colors-red-60)"}},"\u8868\u5355\u4e2d\u5305\u542b\u9519\u8bef\uff01"),m.a.createElement("span",{style:{fontFamily:"monospace"}},JSON.stringify(e,null,2)))})}const _={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:79,column:0},end:{line:89,column:1}},name:"showErrorToast",value:O,source:"function showErrorToast(errors) {\n  Toaster.show({\n    placement: 'top-right',\n    content: (\n      <div>\n        <p style={{ marginBottom: 4, color: 'var(--rex-colors-red-60)' }}>\u8868\u5355\u4e2d\u5305\u542b\u9519\u8bef\uff01</p>\n        <span style={{ fontFamily: 'monospace' }}>{JSON.stringify(errors, null, 2)}</span>\n      </div>\n    ),\n  });\n}",deps:()=>[],provides:{Toaster:r.Toaster}};function E(){return m.a.createElement(o.b,{defaultValue:{tickets:[{name:"feichao",date:s()().format("YYYY-MM-DD")}]},onSubmit:e=>{console.log("onSubmit:",e),x(e)},onError:e=>{console.log("onError:",e),O(e)},onReset:e=>{e.values={tickets:[{name:"feichao",date:s()().format("YYYY-MM-DD")}]}}},m.a.createElement("h4",null,"\u5ba2\u6237\u6ee1\u610f\u5ea6\u8c03\u67e5\u5217\u8868"),m.a.createElement(o.b.Array,{name:"tickets",layout:Object(o.e)({showItemOrder:!0})},m.a.createElement(o.c,{component:"input",label:"\u5ba2\u6237\u540d\u79f0",name:"name",required:!0,componentProps:{style:{maxWidth:200}}}),m.a.createElement(o.c,{component:"datePicker",label:"\u8d2d\u4e70\u65e5\u671f",name:"date",required:!0}),m.a.createElement(o.c,{component:"testButtonGroup",label:"\u54c1\u724c",name:"brand",componentProps:{items:h},required:!0}),m.a.createElement(o.c,{component:"singleSelect",label:"\u98ce\u683c",name:"style",required:!0,componentProps:{dataSource:g,style:{maxWidth:200}}}),m.a.createElement(o.c,{component:"testButtonGroup",name:"satisfaction",label:"\u5ba2\u6237\u6ee1\u610f\u5ea6",required:!0,componentProps:{items:"\u975e\u5e38\u6ee1\u610f\uff0c\u6ee1\u610f\uff0c\u57fa\u672c\u6ee1\u610f\uff0c\u4e0d\u6ee1\u610f\uff0c\u975e\u5e38\u4e0d\u6ee1\u610f".split("\uff0c")}}),m.a.createElement(o.c,{component:"input",label:"\u5ba2\u6237\u8054\u7cfb\u65b9\u5f0f",name:"contact",componentProps:{style:{maxWidth:200}}}),m.a.createElement(o.c,{component:"input",label:"\u5ba2\u6237\u8054\u7cfb\u5730\u5740",name:"address"})),m.a.createElement(r.Box,{mt:"m"},m.a.createElement(o.b.Submit,null),m.a.createElement(o.b.Reset,null)),m.a.createElement(d.b,null))}const F={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:91,column:7},end:{line:144,column:1}},name:"ArrayExample",value:E,source:'function ArrayExample() {\n  return (\n    <Form\n      defaultValue={{ tickets: [{ name: \'feichao\', date: dayjs().format(\'YYYY-MM-DD\') }] }}\n      onSubmit={(values) => {\n        console.log(\'onSubmit:\', values);\n        showSubmitToast(values);\n      }}\n      onError={(errors) => {\n        console.log(\'onError:\', errors);\n        showErrorToast(errors);\n      }}\n      onReset={(model) => {\n        model.values = { tickets: [{ name: \'feichao\', date: dayjs().format(\'YYYY-MM-DD\') }] };\n      }}\n    >\n      <h4>\u5ba2\u6237\u6ee1\u610f\u5ea6\u8c03\u67e5\u5217\u8868</h4>\n      <Form.Array name="tickets" layout={arrayCard({ showItemOrder: true })}>\n        <FormItem\n          component="input"\n          label="\u5ba2\u6237\u540d\u79f0"\n          name="name"\n          required\n          componentProps={{ style: { maxWidth: 200 } }}\n        />\n        <FormItem component="datePicker" label="\u8d2d\u4e70\u65e5\u671f" name="date" required />\n        <FormItem component="testButtonGroup" label="\u54c1\u724c" name="brand" componentProps={{ items: BRANDS }} required />\n        <FormItem\n          component="singleSelect"\n          label="\u98ce\u683c"\n          name="style"\n          required\n          componentProps={{ dataSource: STYLES, style: { maxWidth: 200 } }}\n        />\n        <FormItem\n          component="testButtonGroup"\n          name="satisfaction"\n          label="\u5ba2\u6237\u6ee1\u610f\u5ea6"\n          required\n          componentProps={{ items: \'\u975e\u5e38\u6ee1\u610f\uff0c\u6ee1\u610f\uff0c\u57fa\u672c\u6ee1\u610f\uff0c\u4e0d\u6ee1\u610f\uff0c\u975e\u5e38\u4e0d\u6ee1\u610f\'.split(\'\uff0c\') }}\n        />\n        <FormItem component="input" label="\u5ba2\u6237\u8054\u7cfb\u65b9\u5f0f" name="contact" componentProps={{ style: { maxWidth: 200 } }} />\n        <FormItem component="input" label="\u5ba2\u6237\u8054\u7cfb\u5730\u5740" name="address" />\n      </Form.Array>\n\n      <Box mt="m">\n        <Form.Submit />\n        <Form.Reset />\n      </Box>\n\n      <ValuePreview />\n    </Form>\n  );\n}',deps:()=>[S,_,y,v],provides:{Form:o.b,dayjs:s.a,arrayCard:o.e,FormItem:o.c,Box:r.Box,ValuePreview:d.b}};function j(){return m.a.createElement(o.b,{defaultValue:{texts:[]}},m.a.createElement(o.b.Array,{name:"texts",layout:Object(o.e)({showItemOrder:!0}),itemFactory:()=>""},m.a.createElement(o.c,{component:"input",label:"\u59d3\u540d",name:"&",componentProps:{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u540d\u5b57"}})),m.a.createElement(d.b,null))}E.__doc_info=F,E.__inner_source='function ArrayExample() {\n  return (\n    <Form\n      defaultValue={{ tickets: [{ name: \'feichao\', date: dayjs().format(\'YYYY-MM-DD\') }] }}\n      onSubmit={(values) => {\n        console.log(\'onSubmit:\', values);\n        showSubmitToast(values);\n      }}\n      onError={(errors) => {\n        console.log(\'onError:\', errors);\n        showErrorToast(errors);\n      }}\n      onReset={(model) => {\n        model.values = { tickets: [{ name: \'feichao\', date: dayjs().format(\'YYYY-MM-DD\') }] };\n      }}\n    >\n      <h4>\u5ba2\u6237\u6ee1\u610f\u5ea6\u8c03\u67e5\u5217\u8868</h4>\n      <Form.Array name="tickets" layout={arrayCard({ showItemOrder: true })}>\n        <FormItem\n          component="input"\n          label="\u5ba2\u6237\u540d\u79f0"\n          name="name"\n          required\n          componentProps={{ style: { maxWidth: 200 } }}\n        />\n        <FormItem component="datePicker" label="\u8d2d\u4e70\u65e5\u671f" name="date" required />\n        <FormItem component="testButtonGroup" label="\u54c1\u724c" name="brand" componentProps={{ items: BRANDS }} required />\n        <FormItem\n          component="singleSelect"\n          label="\u98ce\u683c"\n          name="style"\n          required\n          componentProps={{ dataSource: STYLES, style: { maxWidth: 200 } }}\n        />\n        <FormItem\n          component="testButtonGroup"\n          name="satisfaction"\n          label="\u5ba2\u6237\u6ee1\u610f\u5ea6"\n          required\n          componentProps={{ items: \'\u975e\u5e38\u6ee1\u610f\uff0c\u6ee1\u610f\uff0c\u57fa\u672c\u6ee1\u610f\uff0c\u4e0d\u6ee1\u610f\uff0c\u975e\u5e38\u4e0d\u6ee1\u610f\'.split(\'\uff0c\') }}\n        />\n        <FormItem component="input" label="\u5ba2\u6237\u8054\u7cfb\u65b9\u5f0f" name="contact" componentProps={{ style: { maxWidth: 200 } }} />\n        <FormItem component="input" label="\u5ba2\u6237\u8054\u7cfb\u5730\u5740" name="address" />\n      </Form.Array>\n\n      <Box mt="m">\n        <Form.Submit />\n        <Form.Reset />\n      </Box>\n\n      <ValuePreview />\n    </Form>\n  );\n}';const I={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:146,column:7},end:{line:155,column:1}},name:"ArrayOfString",value:j,source:'function ArrayOfString() {\n  return (\n    <Form defaultValue={{ texts: [] }}>\n      <Form.Array name="texts" layout={arrayCard({ showItemOrder: true })} itemFactory={() => \'\'}>\n        <FormItem component="input" label="\u59d3\u540d" name="&" componentProps={{ placeholder: \'\u8bf7\u8f93\u5165\u4f60\u7684\u540d\u5b57\' }} />\n      </Form.Array>\n      <ValuePreview />\n    </Form>\n  );\n}',deps:()=>[],provides:{Form:o.b,arrayCard:o.e,FormItem:o.c,ValuePreview:d.b}};j.__doc_info=I,j.__inner_source='function ArrayOfString() {\n  return (\n    <Form defaultValue={{ texts: [] }}>\n      <Form.Array name="texts" layout={arrayCard({ showItemOrder: true })} itemFactory={() => \'\'}>\n        <FormItem component="input" label="\u59d3\u540d" name="&" componentProps={{ placeholder: \'\u8bf7\u8f93\u5165\u4f60\u7684\u540d\u5b57\' }} />\n      </Form.Array>\n      <ValuePreview />\n    </Form>\n  );\n}';const V=[{prov:"\u6d59\u6c5f",cities:"\u676d\u5dde\u3001\u7ecd\u5174\u3001\u5b81\u6ce2\u3001\u5609\u5174\u3001\u5176\u4ed6".split("\u3001")},{prov:"\u6c5f\u82cf",cities:"\u5357\u4eac\u3001\u5e38\u5dde\u3001\u9547\u6c5f\u3001\u82cf\u5dde\u3001\u5176\u4ed6".split("\u3001")},{prov:"\u798f\u5efa",cities:"\u53a6\u95e8\u3001\u798f\u5dde\u3001\u8386\u7530\u3001\u4e09\u660e\u3001\u5176\u4ed6".split("\u3001")}],C={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:157,column:0},end:{line:161,column:2}},name:"ALL_CITIES",value:V,source:"const ALL_CITIES = [\n  { prov: '\u6d59\u6c5f', cities: '\u676d\u5dde\u3001\u7ecd\u5174\u3001\u5b81\u6ce2\u3001\u5609\u5174\u3001\u5176\u4ed6'.split('\u3001') },\n  { prov: '\u6c5f\u82cf', cities: '\u5357\u4eac\u3001\u5e38\u5dde\u3001\u9547\u6c5f\u3001\u82cf\u5dde\u3001\u5176\u4ed6'.split('\u3001') },\n  { prov: '\u798f\u5efa', cities: '\u53a6\u95e8\u3001\u798f\u5dde\u3001\u8386\u7530\u3001\u4e09\u660e\u3001\u5176\u4ed6'.split('\u3001') },\n];",deps:()=>[],provides:{}},w=e=>new Promise(t=>{setTimeout(t,e)}),N={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:163,column:0},end:{line:166,column:5}},name:"delay",value:w,source:"const delay = (ms) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });",deps:()=>[],provides:{}},A=new o.d({prov:"\u6d59\u6c5f",cities:[],districts:[]}),T={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:168,column:0},end:{line:172,column:3}},name:"model3",value:A,source:"const model3 = new FormModel({\n  prov: '\u6d59\u6c5f',\n  cities: [] ,\n  districts: [] ,\n});",deps:()=>[],provides:{FormModel:o.d}},k=new o.a(async()=>{const e=A.getValue("prov");return await w(1e3),V.find(t=>t.prov===e).cities},[]),R={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:174,column:0},end:{line:181,column:7}},name:"cityDataSource$",value:k,source:"const cityDataSource$ = new AsyncValue(async () => {\n  // \u4f9d\u8d56\u6536\u96c6\u9700\u8981\u53d1\u751f\u5728\u540c\u6b65\u4ee3\u7801\u5757\u4e2d\n  const prov = model3.getValue('prov');\n\n  // \u6839\u636e\u7701\u4efd\u62c9\u53d6\u57ce\u5e02\u5217\u8868\uff0c 1000ms \u5ef6\u8fdf\u7528\u4e8e\u6a21\u62df\u5b9e\u9645\u60c5\u51b5\n  await delay(1000);\n  return ALL_CITIES.find((item) => item.prov === prov).cities;\n}, []);",deps:()=>[T,N,C],provides:{AsyncValue:o.a}},q=new o.a(async()=>{const e=A.getValue("cities");return await w(1e3),e.flatMap(e=>[e+"_001\u533a",e+"_002\u533a",e+"_003\u533a"])},[]),P={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:183,column:0},end:{line:190,column:7}},name:"districtDataSource$",value:q,source:"const districtDataSource$ = new AsyncValue(async () => {\n  // \u4f9d\u8d56\u6536\u96c6\u9700\u8981\u53d1\u751f\u5728\u540c\u6b65\u4ee3\u7801\u5757\u4e2d\n  const cities = model3.getValue('cities');\n\n  // \u6839\u636e\u7701\u4efd\u62c9\u53d6\u57ce\u5e02\u5217\u8868\uff0c 1000ms \u5ef6\u8fdf\u7528\u4e8e\u6a21\u62df\u5b9e\u9645\u60c5\u51b5\n  await delay(1000);\n  return cities.flatMap((city) => [`${city}_001\u533a`, `${city}_002\u533a`, `${city}_003\u533a`]);\n}, []);",deps:()=>[T,N],provides:{AsyncValue:o.a}},M=Object(l.b)(()=>{const e=A.getField("prov"),t=A.getField("cities"),n=A.getField("districts");return m.a.createElement(o.b,{model:A},m.a.createElement(o.c,{component:"singleSelect",label:"\u7701\u4efd(\u5355\u9009)",name:"prov",componentProps:{dataSource:V.map(e=>e.prov)}}),m.a.createElement(o.c,{component:"multiSelect",label:"\u57ce\u5e02(\u591a\u9009)",name:"cities",help:"loading"===k.status?m.a.createElement("span",{style:{color:"red"}},"loading..."):void 0,componentProps:{hasClear:!0,dataSource:k.current}}),m.a.createElement(o.c,{component:"multiSelect",label:"\u884c\u653f\u533a(\u591a\u9009)",name:"districts",help:"loading"===q.status?m.a.createElement("span",{style:{color:"red"}},"loading..."):void 0,componentProps:{hasClear:!0,dataSource:q.current}}),m.a.createElement(o.b.Effect,{watch:e,effect:()=>{t.value=[]}}),m.a.createElement(o.b.Effect,{watch:k,effect:e=>{t.value=e.slice(0,1)}}),m.a.createElement(o.b.Effect,{watch:t,effect:e=>{n.value=n.value.filter(t=>e.includes(t.slice(0,2)))}}),m.a.createElement(d.b,null))}),L={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:192,column:0},end:{line:254,column:3}},name:"AsyncEffectInner",value:M,source:'const AsyncEffectInner = observer(() => {\n  const prov = model3.getField(\'prov\');\n  const cities = model3.getField(\'cities\');\n  const districts = model3.getField(\'districts\');\n\n  return (\n    <Form model={model3}>\n      <FormItem\n        component="singleSelect"\n        label="\u7701\u4efd(\u5355\u9009)"\n        name="prov"\n        componentProps={{ dataSource: ALL_CITIES.map((item) => item.prov) }}\n      />\n      <FormItem\n        component="multiSelect"\n        label="\u57ce\u5e02(\u591a\u9009)"\n        name="cities"\n        help={cityDataSource$.status === \'loading\' ? <span style={{ color: \'red\' }}>loading...</span> : undefined}\n        componentProps={{\n          hasClear: true,\n          dataSource: cityDataSource$.current,\n        }}\n      />\n      <FormItem\n        component="multiSelect"\n        label="\u884c\u653f\u533a(\u591a\u9009)"\n        name="districts"\n        help={districtDataSource$.status === \'loading\' ? <span style={{ color: \'red\' }}>loading...</span> : undefined}\n        componentProps={{\n          hasClear: true,\n          dataSource: districtDataSource$.current,\n        }}\n      />\n\n      {/* \u5207\u6362\u300c\u7701\u4efd\u300d\u65f6\uff0c\u6e05\u7a7a\u57ce\u5e02 */}\n      <Form.Effect\n        watch={prov}\n        effect={() => {\n          cities.value = [];\n        }}\n      />\n\n      {/* \u57ce\u5e02\u5217\u8868\u52a0\u8f7d\u5b8c\u6210\u65f6\uff0c\u81ea\u52a8\u8bbe\u7f6e\u4e3a\u7b2c\u4e00\u4e2a\u57ce\u5e02 */}\n      <Form.Effect\n        watch={cityDataSource$}\n        effect={(cityList) => {\n          cities.value = cityList.slice(0, 1);\n        }}\n      />\n\n      {/* \u5207\u6362\u57ce\u5e02\u65f6\uff0c\u79fb\u9664\u65e0\u6548\u7684\u884c\u653f\u533a */}\n      <Form.Effect\n        watch={cities}\n        effect={(cities) => {\n          const isValid = (district) => cities.includes(district.slice(0, 2));\n          districts.value = districts.value.filter(isValid);\n        }}\n      />\n\n      <ValuePreview />\n    </Form>\n  );\n});',deps:()=>[T,C,R,P],provides:{observer:l.b,Form:o.b,FormItem:o.c,ValuePreview:d.b}};function B(){return m.a.createElement(M,null)}const Y={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/xform/2-advanced-examples.stories.tsx",loc:{start:{line:256,column:7},end:{line:258,column:1}},name:"AsyncEffect",value:B,source:"function AsyncEffect() {\n  return <AsyncEffectInner />;\n}",deps:()=>[L],provides:{}};B.__inner_source="function AsyncEffect() {\n  return <AsyncEffectInner />;\n}",B.__doc_info=Y}}]);