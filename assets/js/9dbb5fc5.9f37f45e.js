(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{202:function(e,t,n){"use strict";n.d(t,"h",(function(){return x})),n.d(t,"b",(function(){return C})),n.d(t,"d",(function(){return T})),n.d(t,"a",(function(){return q})),n.d(t,"c",(function(){return D})),n.d(t,"e",(function(){return W})),n.d(t,"f",(function(){return Q})),n.d(t,"g",(function(){return w}));var r=n(7),a=n(163),o=n(177),l=n(0),i=n.n(l),d=n(212),c=n.n(d);function u(e){e.subModels.forEach((function(e,t){e.name=String(t)}))}function m(e,t,n){if(null!=e){var r=e.splice(t,1)[0];e.splice(n,0,r)}}function s(e,t,n){if(null!=e){var r=e[t];e[t]=e[n],e[n]=r}}function p(e){return String(Number.parseInt(e))===e}function b(e){return p(e)?"array":"object"}function f(e,t,n){for(var r=Array.isArray(t)?t:v(t),o=e,l=0;l<r.length;l+=1){if(!a.isObservable(o))return n;o=a.get(o,r[l])}return void 0===o?n:o}function y(e,t,n){for(var r=Array.isArray(t)?t:v(t),o=r.length-1,l=e,i=0;i<o;i+=1){var d=r[i];if(null==a.get(l,d)&&(p(r[i+1])?a.set(l,d,[]):a.set(l,d,{})),l=a.get(l,d),!a.isObservable(l))return}a.isObservable(l)&&a.set(l,r[o],n)}var O={append:Object(a.action)((function(e,t){var n;null==e.values&&(e.values=[]),e.values.push(null!==(n=null==t?void 0:t(e))&&void 0!==n?n:{})})),delete:Object(a.action)((function(e,t){c()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),e.values.splice(t,1),e._proxy.subModels.splice(t,1),u(e._proxy)})),moveUp:Object(a.action)((function(e,t){0!==t&&(c()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),s(e.values,t,t-1),s(e._proxy.subModels,t,t-1),u(e._proxy))})),moveDown:Object(a.action)((function(e,t){t!==e.values.length-1&&(c()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),s(e.values,t,t+1),s(e._proxy.subModels,t,t+1),u(e._proxy))})),clear:Object(a.action)((function(e){null!=e.values&&0!==e.values.length&&(c()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),e.values=[],e._proxy.subModels.length=0)})),dragAndDrop:Object(a.action)((function(e,t,n){c()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),m(e.values,t,n),m(e._proxy.subModels,t,n),u(e._proxy)})),renderArrayItem:function(e,t,n){return i.a.createElement(F,{name:String(t)},n)},getKey:function(e,t){return e.getSubModel(String(t)).id}};function h(e,t){return void 0!==e?e:t}function v(e){return e.split(".")}try{b.displayName="keyToValueShape",b.__docgenInfo={description:"",displayName:"keyToValueShape",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#keyToValueShape"]={docgenInfo:b.__docgenInfo,name:"keyToValueShape",path:"../xform/src/core/utils.tsx#keyToValueShape"})}catch(Z){}try{f.displayName="observableGetIn",f.__docgenInfo={description:"lodash.get(...) for mobx observables",displayName:"observableGetIn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#observableGetIn"]={docgenInfo:f.__docgenInfo,name:"observableGetIn",path:"../xform/src/core/utils.tsx#observableGetIn"})}catch(Z){}try{y.displayName="observableSetIn",y.__docgenInfo={description:"lodash.set(...) for mobx observables",displayName:"observableSetIn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#observableSetIn"]={docgenInfo:y.__docgenInfo,name:"observableSetIn",path:"../xform/src/core/utils.tsx#observableSetIn"})}catch(Z){}try{h.displayName="composeState",h.__docgenInfo={description:"\u5408\u5e76\u53d7\u63a7\u72b6\u6001\u548c \u975e\u53d7\u63a7\u72b6\u6001",displayName:"composeState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#composeState"]={docgenInfo:h.__docgenInfo,name:"composeState",path:"../xform/src/core/utils.tsx#composeState"})}catch(Z){}try{v.displayName="splitToPath",v.__docgenInfo={description:"",displayName:"splitToPath",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#splitToPath"]={docgenInfo:v.__docgenInfo,name:"splitToPath",path:"../xform/src/core/utils.tsx#splitToPath"})}catch(Z){}var S=i.a.createContext(null),j=S.Provider,g=i.a.createContext({}),C=function(e){var t=e.children,n=Object(r.a)(e,["children"]),a=E();return i.a.createElement(g.Provider,{value:Object.assign({},a,n)},t)};function E(){return Object(l.useContext)(g)}function x(){return Object(l.useContext)(S)}var _=Object(o.a)((function(e){var t,n,r=e.name,a=e.children,o=e.layout,l=e.itemFactory,d=x();if("&"===r)throw new Error("XFormArray \u4e0d\u652f\u6301 name=&. path=("+(d.path.join(".")||"root")+")");var c=d.getSubArray(r),u=null!==(n=null===(t=c.values)||void 0===t?void 0:t.length)&&void 0!==n?n:0;return i.a.createElement(j,{value:c},o({arrayModel:c,itemCount:u,itemContent:a,itemFactory:l}))})),F=Object(o.a)((function(e){var t=e.name,n=e.children,r=x();return"&"===t?i.a.createElement(i.a.Fragment,null,n):i.a.createElement(j,{value:r.getSubModel(t),children:n})})),N=Object(o.a)((function(e){var t=e.name,n=e.required,r=e.children,o=e.defaultValue,l=x(),i=Object(a.computed)((function(){return"&"===t?l._asField():l.getField(t)})).get();i._useTrack(e);var d=h(i.value,o);return r({model:l,name:t,field:i,value:d,required:n,defaultValue:o})}));try{j.displayName="ModelProvider",j.__docgenInfo={description:"",displayName:"ModelProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#ModelProvider"]={docgenInfo:j.__docgenInfo,name:"ModelProvider",path:"../xform/src/core/components.tsx#ModelProvider"})}catch(Z){}try{C.displayName="FormEnvProvider",C.__docgenInfo={description:"",displayName:"FormEnvProvider",props:{isPreview:{defaultValue:null,description:"",name:"isPreview",required:!1,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"(submitValues: any, model: RootModel<unknown>) => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(errors: any, model: RootModel<unknown>) => void"}},onReset:{defaultValue:null,description:"",name:"onReset",required:!1,type:{name:"(model: RootModel<unknown>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#FormEnvProvider"]={docgenInfo:C.__docgenInfo,name:"FormEnvProvider",path:"../xform/src/core/components.tsx#FormEnvProvider"})}catch(Z){}try{_.displayName="XFormArray",_.__docgenInfo={description:"\u5bf9\u8c61\u6570\u7ec4\u8868\u5355",displayName:"XFormArray",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"(input: XFormArrayLayoutInput) => ReactElement<any, string | JSXElementConstructor<any>>"}},itemFactory:{defaultValue:null,description:"",name:"itemFactory",required:!1,type:{name:"(arrayModel: Model<unknown[]>) => any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#XFormArray"]={docgenInfo:_.__docgenInfo,name:"XFormArray",path:"../xform/src/core/components.tsx#XFormArray"})}catch(Z){}try{F.displayName="XFormObject",F.__docgenInfo={description:"\u4e3a\u8be5\u7ec4\u4ef6\u4e0b\u7684 XFormField \u6dfb\u52a0\u4e00\u4e2a\u6570\u636e\u5b57\u6bb5\u524d\u7f00",displayName:"XFormObject",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#XFormObject"]={docgenInfo:F.__docgenInfo,name:"XFormObject",path:"../xform/src/core/components.tsx#XFormObject"})}catch(Z){}try{N.displayName="XFormField",N.__docgenInfo={description:"\u8868\u5355\u5b57\u6bb5\uff08field\uff09\n\n\u5728 xform \u4e2d\uff0c\u4e00\u4e2a\u300c\u5b57\u6bb5\u300d\u5305\u542b\u4e00\u4e2a\u300c\u89c6\u56fe\u63a7\u4ef6\u5b9e\u4f8b\u300d\uff08\u4f8b\u5982 Input\uff0cSelect \u5b9e\u4f8b\uff09\u548c\u4e00\u4efd\u72b6\u6001\uff08\u4f8b\u5982 Input \u5305\u542b\u4e00\u4e2a\u5b57\u7b26\u4e32\u72b6\u6001\uff09\uff1b\nXFormField \u662f\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6 / \u57fa\u7840\u7ec4\u4ef6\uff0c\u6bcf\u4e2a\u5177\u4f53\u7684\u7ec4\u4ef6\u7c7b\u578b\uff08\u4f8b\u5982 Input\uff0cSelect \uff09\u90fd\u5e94\u8be5\u7ee7\u627f\u8be5\u7ec4\u4ef6\u5e76\u5c01\u88c5\u76f8\u5e94\u7684 FieldItem\uff1b",displayName:"XFormField",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"(value: any) => any"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"any"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"(value: any) => boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#XFormField"]={docgenInfo:N.__docgenInfo,name:"XFormField",path:"../xform/src/core/components.tsx#XFormField"})}catch(Z){}var R=n(215),A=function(){function e(e,t){this.fieldMap=new Map,this.model=e,this.valueShape=t,this.subModels="array"===t?[]:{}}var t=e.prototype;return t.iterateModels=function(e){!function t(n){Object.values(n.subModels).forEach((function(n){e(n),t(n._proxy)}))}(this)},t.iterateFields=function(e){this.fieldMap.forEach(e),this.iterateModels((function(t){t._proxy.fieldMap.forEach(e)}))},t.getSubModel=function(e,t){void 0===t&&(t="object");for(var n=Array.isArray(e)?e:v(e),r=this.model,a=0;a<n.length-1;a++)r=r._proxy._getSubModel(n[a],b(n[a+1]));return r._proxy._getSubModel(n[n.length-1],t)},t._getSubModel=function(e,t){void 0===t&&(t="object"),c()(!e.includes("."),"name \u4e2d\u4e0d\u80fd\u5305\u542b .");var n=this.subModels[e];return null==n&&(n=new V(this.model,e,t),this.subModels[e]=n),n},t.getField=function(e){var t=Array.isArray(e)?e:v(e);if(t.length>1)return this.getSubModel(t[0],b(t[1])).getField(t.slice(1));var n=t[0],r=this.fieldMap.get(n);return null==r&&(r=new M(this.model,n),this.fieldMap.set(n,r)),r},e}(),I=[],T=function(){function e(e){void 0===e&&(e={}),this._nextModelId=1,this._nextFieldId=1,this.state={},this.root=this,this.parent=this,this.path=I,this.valueShape="object",this._proxy=new A(this,"object"),this.values=e,Object(a.makeObservable)(this,{values:a.observable,state:a.observable,setValue:a.action})}var t=e.prototype;return t.getNextModelId=function(){return"Model_"+this._nextModelId++},t.getNextFieldId=function(){return"Field_"+this._nextFieldId++},t.getValue=function(e,t){return f(this.values,e,t)},t.setValue=function(e,t){y(this.values,e,t)},t.getSubModel=function(e){return this._proxy.getSubModel(e,"object")},t.getSubArray=function(e){return this._proxy.getSubModel(e,"array")},t.getField=function(e){return this._proxy.getField(e)},t._asField=function(){throw new Error("RootModel \u4e0b\u4e0d\u652f\u6301\u4f7f\u7528 name=& \u7684 Field")},e}(),V=function(){function e(e,t,n){this.state={},c()(!t.includes("."),"name \u4e2d\u4e0d\u80fd\u5305\u542b ."),this.root=e.root,this.parent=e,this.name=t,this.valueShape=n,this._proxy=new A(this,n),this.id=this.root.getNextModelId(),Object(a.makeObservable)(this,{values:a.computed,state:a.observable,setValue:a.action,name:a.observable},{name:this.id+"("+this.name+")"})}var t=e.prototype;return t.getSubModel=function(e){return this._proxy.getSubModel(e,"object")},t.getSubArray=function(e){return this._proxy.getSubModel(e,"array")},t.getField=function(e){return this._proxy.getField(e)},t.getValue=function(e,t){return f(this.values,e,t)},t.setValue=function(e,t){null==this.values&&(this.values="array"===this.valueShape?[]:{}),y(this.values,e,t)},t._asField=function(){return this.parent.getField(this.name)},Object(R.a)(e,[{key:"path",get:function(){return[].concat(this.parent.path,[this.name])}},{key:"values",get:function(){return this.parent.getValue(this.name)},set:function(e){this.parent.setValue(this.name,e)}}]),e}(),M=function(){function e(e,t){this.config=null,this.mountCount=0,this.state={},this.parent=e,this.name=t,this.id=this.parent.root.getNextFieldId(),Object(a.makeObservable)(this,{state:a.observable,name:a.observable.ref,value:a.computed,path:a.computed,config:!1,mountCount:!1},{name:this.id+"("+this.name+")"})}return e.prototype._useTrack=function(e){var t=this;Object(l.useLayoutEffect)((function(){return t.config=e,t.mountCount+=1,function(){t.config=null,t.mountCount-=1}}),[e])},Object(R.a)(e,[{key:"value",get:function(){return this.parent.getValue(this.name)},set:function(e){this.parent.setValue(this.name,e)}},{key:"path",get:function(){return this.parent.path.concat([this.name])}}]),e}(),k=n(157),P={validate:Object(a.action)((function(e){if(null!=e.config){var t,n=e.config,r=n.validate,a=n.required,o=n.defaultValue,l=n.isEmpty,i=e.value;return t=a&&l(i)?"\u8be5\u5b57\u6bb5\u662f\u5fc5\u586b\u5b57\u6bb5":null==r?void 0:r(h(i,o)),e.state.error=t,t}})),handleBlur:function(e){P.validate(e)},handleChange:Object(a.action)((function(e,t){e.value=t,P.validate(e)}))},w={clearError:Object(a.action)((function(e){e._proxy.iterateFields((function(e){e.state.error=null}))})),validateAll:Object(a.action)((function(e){var t=Object(a.observable)("array"===e.valueShape?[]:{}),n=!1;return e._proxy.iterateFields((function(e){if(0!==e.mountCount){var r=P.validate(e);r&&(n=!0,y(t,e.path,r))}})),{hasError:n,errors:Object(a.toJS)(t)}}))};function q(e){var t=e.model,n=e.defaultValue,r=e.isPreview,a=e.isInline,o=e.labelPosition,d=e.onSubmit,c=e.onError,u=e.onReset,m=e.children,s=e.className,p=e.style,b=h(t,Object(l.useState)((function(){return new T(n)}))[0]);return i.a.createElement(C,{isPreview:r,onError:c,onReset:u,onSubmit:d},i.a.createElement(j,{value:b},i.a.createElement(k.FormLayout,{labelPosition:o,isInline:a,style:p,className:s},m)))}var B=Object(o.a)((function(e){var t=e.watch,n=e.effect,r=x(),o=r.getField(t);return Object(l.useEffect)((function(){return Object(a.reaction)((function(){return Object(a.toJS)(o.value)}),(function(e,t){return n(e,{model:r,prev:t,next:e})}))}),[r,t,o,n]),null})),L=Object(o.a)((function(e){return(0,e.children)(x())}));q.Submit=function(e){var t=e.type,n=void 0===t?"primary":t,o=e.children,l=void 0===o?"\u63d0\u4ea4":o,d=Object(r.a)(e,["type","children"]),c=x().root,u=E(),m=u.onSubmit,s=u.onError;return i.a.createElement(k.Button,Object.assign({onClick:function(){var e=w.validateAll(c),t=e.hasError,n=e.errors;if(t)null==s||s(n,c);else if("function"==typeof m){var r=Object(a.observable)("array"===c.valueShape?[]:{});c._proxy.iterateFields((function(e){if(0!==e.mountCount){var t=e.path,n=e.value;y(r,t,n)}})),m(Object(a.toJS)(r),c)}},type:n,children:l},d))},q.Reset=function(e){var t=e.children,n=void 0===t?"\u91cd\u7f6e":t,o=Object(r.a)(e,["children"]),l=x().root,d=E().onReset;return i.a.createElement(k.Button,Object.assign({onClick:Object(a.action)((function(){l.values={},w.clearError(l),null==d||d(l)})),children:n},o))},q.Effect=B,q.Array=_,q.Object=F,q.Field=N,q.ModelProvider=j,q.ModelConsumer=L;try{q.displayName="Form",q.__docgenInfo={description:"",displayName:"Form",props:{model:{defaultValue:null,description:"\u53d7\u63a7\u7528\u6cd5\u3002 xform \u6a21\u578b\u5bf9\u8c61\uff0c\u4e00\u822c\u7531\u4e0a\u5c42\u901a\u8fc7 new RootModel(...) \u521b\u5efa\u800c\u6210",name:"model",required:!1,type:{name:"IModel<unknown>"}},defaultValue:{defaultValue:null,description:"\u975e\u53d7\u63a7\u7528\u6cd5\u3002 \u8868\u5355\u7684\u9ed8\u8ba4\u503c",name:"defaultValue",required:!1,type:{name:"any"}},onSubmit:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onSubmit",required:!1,type:{name:"(submitValues: any, model: RootModel<unknown>) => void"}},onError:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u51fa\u9519\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onError",required:!1,type:{name:"(errors: any, model: RootModel<unknown>) => void"}},onReset:{defaultValue:null,description:"\u6e05\u7a7a\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Reset /> \u4f7f\u7528",name:"onReset",required:!1,type:{name:"(model: RootModel<unknown>) => void"}},isPreview:{defaultValue:{value:"false"},description:"\u662f\u5426\u4e3a\u9884\u89c8\u6001",name:"isPreview",required:!1,type:{name:"boolean"}},isInline:{defaultValue:{value:"false"},description:"\u662f\u5426\u5185\u8054\u5e03\u5c40\n@category \u5e03\u5c40",name:"isInline",required:!1,type:{name:"boolean"}},labelPosition:{defaultValue:{value:"'top'"},description:"\u6807\u7b7e\u4f4d\u7f6e\n@category \u5e03\u5c40",name:"labelPosition",required:!1,type:{name:'"top" | "left"'}},style:{defaultValue:null,description:"@category \u5e03\u5c40",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"@category \u5e03\u5c40",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form"]={docgenInfo:q.__docgenInfo,name:"Form",path:"../xform/src/form.tsx#Form"})}catch(Z){}try{q.Submit.displayName="Form.Submit",q.Submit.__docgenInfo={description:"",displayName:"Form.Submit",props:{shape:{defaultValue:null,description:"",name:"shape",required:!1,type:{name:'"solid" | "text" | "link" | "warning" | "ghost"'}},type:{defaultValue:{value:"primary"},description:"",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"",name:"isFullWidth",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},leftElement:{defaultValue:null,description:"",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"",name:"rightElement",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Submit"]={docgenInfo:q.Submit.__docgenInfo,name:"Form.Submit",path:"../xform/src/form.tsx#Form.Submit"})}catch(Z){}try{q.Reset.displayName="Form.Reset",q.Reset.__docgenInfo={description:"",displayName:"Form.Reset",props:{shape:{defaultValue:null,description:"",name:"shape",required:!1,type:{name:'"solid" | "text" | "link" | "warning" | "ghost"'}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"",name:"isFullWidth",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},leftElement:{defaultValue:null,description:"",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"",name:"rightElement",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Reset"]={docgenInfo:q.Reset.__docgenInfo,name:"Form.Reset",path:"../xform/src/form.tsx#Form.Reset"})}catch(Z){}try{q.Effect.displayName="Form.Effect",q.Effect.__docgenInfo={description:"",displayName:"Form.Effect",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Effect"]={docgenInfo:q.Effect.__docgenInfo,name:"Form.Effect",path:"../xform/src/form.tsx#Form.Effect"})}catch(Z){}try{q.Array.displayName="Form.Array",q.Array.__docgenInfo={description:"",displayName:"Form.Array",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"(input: XFormArrayLayoutInput) => ReactElement<any, string | JSXElementConstructor<any>>"}},itemFactory:{defaultValue:null,description:"",name:"itemFactory",required:!1,type:{name:"(arrayModel: Model<unknown[]>) => any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Array"]={docgenInfo:q.Array.__docgenInfo,name:"Form.Array",path:"../xform/src/form.tsx#Form.Array"})}catch(Z){}try{q.Object.displayName="Form.Object",q.Object.__docgenInfo={description:"",displayName:"Form.Object",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Object"]={docgenInfo:q.Object.__docgenInfo,name:"Form.Object",path:"../xform/src/form.tsx#Form.Object"})}catch(Z){}try{q.Field.displayName="Form.Field",q.Field.__docgenInfo={description:"",displayName:"Form.Field",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"(value: any) => any"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"any"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"(value: any) => boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Field"]={docgenInfo:q.Field.__docgenInfo,name:"Form.Field",path:"../xform/src/form.tsx#Form.Field"})}catch(Z){}try{q.ModelConsumer.displayName="Form.ModelConsumer",q.ModelConsumer.__docgenInfo={description:"",displayName:"Form.ModelConsumer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.ModelConsumer"]={docgenInfo:q.ModelConsumer.__docgenInfo,name:"Form.ModelConsumer",path:"../xform/src/form.tsx#Form.ModelConsumer"})}catch(Z){}function K(e){var t;return null!==(t=e.value)&&void 0!==t?t:e.defaultValue}function Y(e){return!e}function X(e){return null==e}function U(e){return null==e||Array.isArray(e)&&0===e.length}var z={};function G(e,t){function n(n){var a=n.defaultValue,o=void 0===a?t.fallbackValue:a,l=n.componentProps,d=n.value,c=n.onChange,u=n.onBlur,m=Object(r.a)(n,["defaultValue","componentProps","value","onChange","onBlur"]),s=E().isPreview;return i.a.createElement(N,Object.assign({defaultValue:o,isEmpty:t.isEmpty},m),(function(n){n.model,n.name;var r=n.field,a=n.value,o=n.required,p=r.state.error,b=Object.assign({},l,{value:void 0!==d?d:a,onChange:void 0!==c?c:function(e){return P.handleChange(r,e)},onBlur:void 0!==u?u:function(){return P.handleBlur(r)},status:p?"error":void 0});return i.a.createElement(k.FormControl,{label:m.label,required:o,error:p},s?t.previewRender(b):i.a.createElement(e,Object.assign({},b)))}))}n.displayName="FormItem("+t.name+")",z[t.name]=n}function D(e){var t=e.component,n=Object(r.a)(e,["component"]),a=z[t];return null==a?i.a.createElement(k.FormControl,null,i.a.createElement("div",{style:{border:"1px dashed var(--rex-colors-error-hover)",fontSize:14,padding:4,color:"var(--rex-colors-error-normal)"}},i.a.createElement("code",null,"<FormItem component='",t,"' />")," \u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7ec4\u4ef6\uff0c\u8bf7\u68c0\u67e5\u7ec4\u4ef6\u540d\u79f0\u662f\u5426\u62fc\u5199\u6b63\u786e")):i.a.createElement(a,n)}G(k.Switch,{name:"switch",previewRender:function(e){var t;return(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)?"\u662f":"\u5426"},fallbackValue:!1,isEmpty:Y}),G(k.CheckboxGroup,{name:"checkboxGroup",fallbackValue:[],previewRender:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:e.defaultValue,r=new k.ListStore(e.dataSource);return n.map((function(e){var t=r.getItem(e);return t?t.label:e})).join("\u3001")},isEmpty:function(e){return null==e||0===e.length}}),G(k.RadioGroup,{name:"radioGroup",fallbackValue:null,previewRender:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:e.defaultValue,r=new k.ListStore(e.dataSource).getItem(n);return r?r.label:n},isEmpty:Y}),G(k.DatePicker,{name:"datePicker",previewRender:K,fallbackValue:null,isEmpty:Y}),G(k.DateRangePicker,{name:"dateRangePicker",previewRender:function(e){var t,n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return(n[0]||"-")+" ~ "+(n[1]||"-")},fallbackValue:["",""],isEmpty:Y}),G(k.TimePicker,{name:"timePicker",previewRender:K,fallbackValue:"",isEmpty:Y}),G(k.FilePicker,{name:"filePicker",previewRender:function(e){var t,n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return i.a.createElement(k.Flex,{spacing:"s",direction:"column"},n.map((function(e){var t=e.id,n=e.name,r=e.url;return i.a.createElement(k.FlexItem,{key:t,bg:"fill.layer1",px:"m"},i.a.createElement(k.Link,{href:r},n))})))},fallbackValue:[],isEmpty:U}),G(k.MediaPicker,{name:"mediaPicker",previewRender:function(e){var t,n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return i.a.createElement(k.Flex,{spacing:"m"},n.map((function(e){var t=e.id,n=e.name,r=e.url,a=Object(k.colors)("fill.layer1")+" url("+r+") center center / 100% no-repeat";return i.a.createElement(k.Box,{key:t,size:"100px",title:n,display:"inline-block",style:{background:a}})})))},fallbackValue:[],isEmpty:U}),G(k.Input,{name:"input",previewRender:K,fallbackValue:"",isEmpty:Y}),G(k.Textarea,{name:"textarea",previewRender:K,fallbackValue:"",isEmpty:Y}),G(k.NumberInput,{name:"numberInput",previewRender:K,fallbackValue:null,isEmpty:X}),G(k.Range,{name:"range",previewRender:K,fallbackValue:0,isEmpty:X}),G(k.Select,{name:"select",previewRender:K,fallbackValue:null,isEmpty:X}),G(k.SingleSelect,{name:"singleSelect",previewRender:K,fallbackValue:null,isEmpty:Y}),G(k.MultiSelect,{name:"multiSelect",previewRender:K,fallbackValue:[],isEmpty:U}),G(k.TreeSelect,{name:"treeSelect",previewRender:K,fallbackValue:null,isEmpty:U}),G(k.SingleTreeSelect,{name:"singleTreeSelect",previewRender:K,fallbackValue:null,isEmpty:Y}),G(k.MultiTreeSelect,{name:"multiTreeSelect",previewRender:K,fallbackValue:[],isEmpty:U}),G((function(e){var t=e.items,n=e.value,a=e.onChange,o=Object(r.a)(e,["items","value","onChange"]);return i.a.createElement("div",Object.assign({style:{display:"flex",gap:8}},o),t.map((function(e){return i.a.createElement(k.Button,{key:e,type:e===n?"primary":"normal",onClick:function(){return a(e)}},e)})))}),{name:"testButtonGroup",fallbackValue:"",previewRender:K,isEmpty:Y});try{D.displayName="FormItem",D.__docgenInfo={description:"",displayName:"FormItem",props:{component:{defaultValue:null,description:"",name:"component",required:!0,type:{name:'"radioGroup" | "input" | "select" | "textarea" | "switch" | "singleSelect" | "multiSelect" | "treeSelect" | "checkboxGroup" | "datePicker" | "dateRangePicker" | "timePicker" | ... 6 more ... | "testButtonGroup"'}},componentProps:{defaultValue:null,description:"",name:"componentProps",required:!1,type:{name:"TextareaProps | RangeProps | TimePickerProps | SwitchProps | SelectProps | MultiSelectProps | ... 10 more ... | (HTMLProps<...> & { ...; })"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"any"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"(value: any) => any"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"(value: any) => boolean"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!1,type:{name:"ListNode<string>[] | (string | SelectItem)[] | ListNode<StringOrNumber>[] | TreeSelectItem[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-item.tsx#FormItem"]={docgenInfo:D.__docgenInfo,name:"FormItem",path:"../xform/src/form-item.tsx#FormItem"})}catch(Z){}var J=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},W=function(e){var t=void 0===e?{}:e,n=t.title,r=t.showItemCount,o=t.showItemOrder,l=t.style,d={position:"absolute",top:8,right:8,display:"flex",gap:8,zIndex:20};return function(e){var t=e.arrayModel,c=e.itemContent,u=e.itemCount,m=e.itemFactory;return i.a.createElement("div",{className:"xform-array",style:Object.assign({marginTop:16,marginBottom:8},l)},(n||r)&&i.a.createElement("h2",null,null!=n?n:"\u5217\u8868"," ",r&&"("+u+")"),0===u&&i.a.createElement("div",{style:{border:"1px dashed #aaa",marginTop:16,padding:8,position:"relative",fontSize:20}},"\u7a7a\u7a7a\u5982\u4e5f~~"),i.a.createElement("div",{className:"xform-array-items"},J(u).map((function(n){return i.a.createElement("div",{key:O.getKey(t,n),className:"xform-array-item",style:{border:"1px dashed #aaa",marginTop:16,padding:8,position:"relative"}},o&&i.a.createElement("code",{style:{fontSize:16}},t.path.join("."),"#",n),i.a.createElement(H,Object.assign({},e,{itemIndex:n,style:d})),O.renderArrayItem(t,n,c))}))),i.a.createElement("div",{style:{marginTop:12}},i.a.createElement(k.Button,{onClick:Object(a.action)((function(){O.append(t,m)}))},"\u6dfb\u52a0\u4e00\u9879")))}},H=Object(o.a)((function(e){var t=e.arrayModel,n=e.itemCount,r=e.itemIndex,o=e.style;return i.a.createElement("div",{style:o},i.a.createElement(k.Button,{size:"small",onClick:Object(a.action)((function(){O.delete(t,r)}))},"\u5220\u9664"),i.a.createElement(k.Button,{size:"small",disabled:0===r,onClick:Object(a.action)((function(){O.moveUp(t,r)}))},"\u4e0a\u79fb"),i.a.createElement(k.Button,{size:"small",disabled:r===n-1,onClick:Object(a.action)((function(){O.moveDown(t,r)}))},"\u4e0b\u79fb"))})),Q=function(e){var t=void 0===e?{}:e,n=t.defaultColumnWidth,r=t.orderColumn,a=t.operationColumn,o=t.className,l=t.style,d={display:"flex",gap:0};return function(e){var t=e.arrayModel,c=e.itemContent,u=e.itemCount,m=e.itemFactory,s=i.a.Children.toArray(c).filter((function(e){return e.type===D})).map((function(e){return Object.assign({name:"string"==typeof e.props.label?e.props.label:null,title:e.props.label},e.props["x-table-column"],{render:function(t,n){return i.a.createElement(F,{name:String(n.itemIndex)},i.a.cloneElement(e,{label:null,isInline:!0}))}})}));return null!=r&&s.unshift(Object.assign({name:"#"},r,{getValue:function(e){return e.itemIndex+1}})),null!=a&&s.push(Object.assign({name:""},a,{render:function(t,n){return i.a.createElement(H,Object.assign({},e,{itemIndex:n.itemIndex,style:d}))}})),i.a.createElement("div",{style:l,className:o},i.a.createElement(k.BaseTable,{className:"bordered",primaryKey:"rowKey",defaultColumnWidth:n,dataSource:J(u).map((function(e){return{rowKey:O.getKey(t,e),itemIndex:e}})),columns:s}),i.a.createElement("div",{style:{padding:4,height:48,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5"}},i.a.createElement(k.Button,{type:"primary",onClick:function(){O.append(t,m)}},"\u6dfb\u52a0\u4e00\u884c")))}};try{W.displayName="arrayCard",W.__docgenInfo={description:"",displayName:"arrayCard",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/array-layouts.tsx#arrayCard"]={docgenInfo:W.__docgenInfo,name:"arrayCard",path:"../xform/src/array-layouts.tsx#arrayCard"})}catch(Z){}try{Q.displayName="arrayTable",Q.__docgenInfo={description:"",displayName:"arrayTable",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/array-layouts.tsx#arrayTable"]={docgenInfo:Q.__docgenInfo,name:"arrayTable",path:"../xform/src/array-layouts.tsx#arrayTable"})}catch(Z){}},212:function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,o,l,i){if(!e){var d;if(void 0===t)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,l,i],u=0;(d=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw d.framesToPop=1,d}}},95:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return d})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return u})),n.d(t,"default",(function(){return p}));var r,a=n(3),o=n(7),l=(n(0),n(160)),i=n(202),d={id:"api",title:"API"},c={unversionedId:"xform/api",id:"xform/api",isDocsHomePage:!1,title:"API",description:"{\ud83d\ude80} \u8868\u793a\u8fdb\u9636 API\u3002",source:"@site/docs/xform/api.mdx",sourceDirName:"xform",slug:"/xform/api",permalink:"/rex-design/docs/xform/api",editUrl:"https://github.com/alibaba/rex-design/edit/main/packages/doc/docs/xform/api.mdx",version:"current",frontMatter:{id:"api",title:"API"},sidebar:"docs",previous:{title:"xform core",permalink:"/rex-design/docs/xform/core"}},u=[{value:"\u7ec4\u4ef6",id:"\u7ec4\u4ef6",children:[{value:"<code>Form</code>",id:"form",children:[]},{value:"<code>FormItem</code>",id:"formitem",children:[]},{value:"<code>Form.Submit</code>",id:"formsubmit",children:[]},{value:"<code>Form.Reset</code>",id:"formreset",children:[]},{value:"<code>Form.Effect</code>",id:"formeffect",children:[]},{value:"<code>Form.Array</code>",id:"formarray",children:[]},{value:"<code>Form.Object</code>",id:"formobject",children:[]},{value:"<code>Form.Field</code>",id:"formfield",children:[]}]},{value:"contexts &amp; hooks",id:"contexts--hooks",children:[{value:"<code>useModel</code>",id:"usemodel",children:[]},{value:"<code>Form.ModelConsumer</code>",id:"formmodelconsumer",children:[]},{value:"<code>Form.ModelProvider</code>",id:"formmodelprovider",children:[]},{value:"<code>useFormEnv</code>",id:"useformenv",children:[]},{value:"<code>FormEnvProvider</code>",id:"formenvprovider",children:[]}]},{value:"\u6570\u7ec4\u5e03\u5c40 {\ud83d\ude80}",id:"\u6570\u7ec4\u5e03\u5c40-",children:[{value:"<code>arrayCard</code>",id:"arraycard",children:[]},{value:"<code>arrayTable</code>",id:"arraytable",children:[]}]},{value:"\u6a21\u578b\u4e0e\u5de5\u5177",id:"\u6a21\u578b\u4e0e\u5de5\u5177",children:[{value:"<code>Model</code>",id:"model",children:[]},{value:"<code>Field</code>",id:"field",children:[]},{value:"<code>modelUtils.clearError</code>",id:"modelutilsclearerror",children:[]},{value:"<code>modelUtils.validateAll</code>",id:"modelutilsvalidateall",children:[]},{value:"<code>fieldUtils.validate</code>",id:"fieldutilsvalidate",children:[]},{value:"<code>fieldUtils.handleBlur</code>",id:"fieldutilshandleblur",children:[]},{value:"<code>fieldUtils.handleChange</code>",id:"fieldutilshandlechange",children:[]},{value:"<code>makeAsyncValue</code>",id:"makeasyncvalue",children:[]}]}],m=(r="PropsTable",function(e){return console.warn("Component "+r+" was not imported, exported, or provided by MDXProvider as global scope"),Object(l.b)("div",e)}),s={toc:u};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"{\ud83d\ude80} \u8868\u793a\u8fdb\u9636 API\u3002"),Object(l.b)("h2",{id:"\u7ec4\u4ef6"},"\u7ec4\u4ef6"),Object(l.b)("h3",{id:"form"},Object(l.b)("inlineCode",{parentName:"h3"},"Form")),Object(l.b)("p",null,"\u8868\u5355\u7ec4\u4ef6\uff0c\u6e32\u67d3\u4e00\u4e2a div \u5e76\u521b\u5efa\u8868\u5355\u6240\u9700\u7684\u4e0a\u4e0b\u6587\uff0c\u5305\u62ec\u4ee5\u4e0b React Context\uff1a"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"FormEnvProvider\uff1a\u8868\u5355\u7684\u73af\u5883\u53d8\u91cf\uff0c\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(l.b)("a",{parentName:"li",href:"#useformenv"},Object(l.b)("inlineCode",{parentName:"a"},"useFormEnv"))," \u83b7\u53d6\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf"),Object(l.b)("li",{parentName:"ul"},"ModelProvider\uff1a\u6a21\u578b\u5bf9\u8c61\uff0c\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(l.b)("a",{parentName:"li",href:"#usemodel"},Object(l.b)("inlineCode",{parentName:"a"},"useModel"))," \u83b7\u53d6\u6a21\u578b\u5bf9\u8c61"),Object(l.b)("li",{parentName:"ul"},"FormLayout\uff1a \u6765\u81ea ",Object(l.b)("inlineCode",{parentName:"li"},"@rexd/core")," \u7684\u8868\u5355\u5e03\u5c40\u80fd\u529b")),Object(l.b)(m,{component:i.a,mdxType:"PropsTable"}),Object(l.b)("h3",{id:"formitem"},Object(l.b)("inlineCode",{parentName:"h3"},"FormItem")),Object(l.b)("p",null,"\u8868\u5355\u9879 \u7ec4\u4ef6\uff0c\u6e32\u67d3\u4e00\u4e2a FormControl\uff0c\u5305\u542b\u9879\u76ee\u6807\u7b7e\uff08label\uff09\u3001\u9519\u8bef\u4fe1\u606f\u3001\u53ef\u9009\u7684\u5e2e\u52a9\u4fe1\u606f\uff0c\u4ee5\u53ca\u5177\u4f53\u7684\u63a7\u4ef6\u5b9e\u4f8b\uff08\u4f8b\u5982\u4e00\u4e2a\u8f93\u5165\u6846\uff09\u3002"),Object(l.b)(m,{props:[{name:"component",required:!0,type:"string",description:"\u7ec4\u4ef6\u7c7b\u578b"},{name:"name",required:!0,type:"string",description:"\u5b57\u6bb5\u6570\u636e\u7d22\u5f15"},{name:"label",required:!0,type:"ReactNode",description:"\u5b57\u6bb5\u7684\u663e\u793a\u540d\u79f0"},{name:"defaultValue",description:"\u9ed8\u8ba4\u503c"},{name:"componentProps",description:"\u7ec4\u4ef6\u7684 props"},{category:"\u6821\u9a8c",name:"validate",type:"(value: any) => any",description:"\u6821\u9a8c\u65b9\u6cd5"},{category:"\u6821\u9a8c",name:"required",type:"boolean",defaultValue:"false",description:"\u5b57\u6bb5\u662f\u5426\u5fc5\u586b"},{category:"\u6821\u9a8c",name:"requiredMessage",type:"string",description:"\u5f00\u53d1\u4e2d. \u5fc5\u586b\u5b57\u6bb5\u7684\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f"},{name:"dataSource",description:"\u6570\u636e\u6e90\uff08\u5373\u5c06\u88ab\u79fb\u9664\uff0c\u8bf7\u4f7f\u7528 componentProps.dataSource \u4ee3\u66ff\uff09"},{category:"{\ud83d\ude80}",name:"value",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 value"},{category:"{\ud83d\ude80}",name:"onChange",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 onChange"},{category:"{\ud83d\ude80}",name:"onBlur",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 onBlur"},{category:"{\ud83d\ude80}",name:"items",description:"\u6d4b\u8bd5\u7528\uff0c\u5373\u5c06\u88ab\u79fb\u9664\uff0c\u52ff\u4f7f\u7528"}],mdxType:"PropsTable"}),Object(l.b)("h3",{id:"formsubmit"},Object(l.b)("inlineCode",{parentName:"h3"},"Form.Submit")),Object(l.b)("p",null,"\u8868\u5355\u63d0\u4ea4",Object(l.b)("a",{parentName:"p",href:"../button"},"\u6309\u94ae"),"\uff0c\u70b9\u51fb\u65f6..."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u89e6\u53d1\u6240\u6709\u5b57\u6bb5\u7684\u6821\u9a8c"),Object(l.b)("li",{parentName:"ul"},"\u5982\u679c\u6821\u9a8c\u901a\u8fc7\uff0c\u5219\u8c03\u7528 ",Object(l.b)("inlineCode",{parentName:"li"},"onSubmit(submitValues, model)")),Object(l.b)("li",{parentName:"ul"},"\u5982\u679c\u53d1\u751f\u9519\u8bef\uff0c\u5219\u8c03\u7528 ",Object(l.b)("inlineCode",{parentName:"li"},"onSubmit(erros, model)"))),Object(l.b)("h3",{id:"formreset"},Object(l.b)("inlineCode",{parentName:"h3"},"Form.Reset")),Object(l.b)("p",null,"\u8868\u5355\u91cd\u7f6e",Object(l.b)("a",{parentName:"p",href:"../button"},"\u6309\u94ae"),"\uff0c\u70b9\u51fb\u65f6\u5c06\u6e05\u7a7a values \u4e0e\u6821\u9a8c\u9519\u8bef\uff0c\u7136\u540e\u89e6\u53d1 ",Object(l.b)("inlineCode",{parentName:"p"},"onReset"),"\u3002"),Object(l.b)("h3",{id:"formeffect"},Object(l.b)("inlineCode",{parentName:"h3"},"Form.Effect")),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"<Form.Effect watch={watch} effect={effect} />")),Object(l.b)("p",null,"\u521b\u5efa\u8868\u5355\u8054\u52a8\uff0c\u6bcf\u5f53 watch \u5bf9\u5e94\u7684\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0ceffect \u90fd\u4f1a\u88ab\u8c03\u7528\u3002\u6ce8\u610f\u5d4c\u5957\u5b57\u6bb5\u7684\u53d8\u66f4\u4e5f\u4f1a\u89e6\u53d1 effect\u3002"),Object(l.b)("p",null,"effect \u88ab\u8c03\u7528\u65f6\uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u4e24\u4e2a\u53c2\u6570\uff1a"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"value: any")," \u65b0\u7684\u503c"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"detail: { prev: any, model: IModel, next: any }")," \u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542b\u65e7\u7684\u503c\uff0c\u65b0\u7684\u503c\uff0c\u4ee5\u53ca\u5f53\u524d\u6a21\u578b")),Object(l.b)("h3",{id:"formarray"},Object(l.b)("inlineCode",{parentName:"h3"},"Form.Array")),Object(l.b)("p",null,Object(l.b)("a",{parentName:"p",href:"advanced#formarray"},"{\ud83d\ude80} \u7528\u6cd5"),"\u3002 \u4ee5\u5f53\u524d model \u4e3a\u57fa\u7840\uff0c\u4e3a\u5176\u5b50\u8282\u70b9\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684 sub model\uff0c\u5e76\u5c06\u5b50\u8282\u70b9\u4e2d\u7684\u8868\u5355\u503c\u6536\u96c6\u5230\u5f53\u524d model \u4e2d ",Object(l.b)("inlineCode",{parentName:"p"},"{name}.{itemIndex}")," \u5bf9\u5e94\u7684\u4f4d\u7f6e\u3002"),Object(l.b)(m,{props:[{name:"name",type:"string",required:!0,description:"\u5b57\u6bb5\u7d22\u5f15"},{name:"layout",type:"(input: XFormArrayLayoutInput) => React.ReactElement",required:!0,description:"\u6570\u7ec4\u5e03\u5c40\uff0c\u63a7\u5236\u8868\u5355\u5982\u4f55\u5bf9\u6570\u7ec4\u8fdb\u884c\u5e03\u5c40\uff0c\u5305\u62ec\u6570\u7ec4\u4e2d\u6bcf\u4e00\u4e2a\u5143\u7d20\u7684\u5e03\u5c40 \u4ee5\u53ca \u76f8\u5173\u7684\u64cd\u4f5c\u6309\u94ae\uff08\u6dfb\u52a0\u3001\u5220\u9664\u3001\u4e0a\u79fb\u3001\u4e0b\u79fb\u7b49\uff09"},{name:"itemFactory",type:"(arrayModel: Model) => any",defaultValue:"() => ({})",description:"\u6570\u7ec4\u4e2d\u65b0\u589e\u5143\u7d20\u7684\u521d\u59cb\u503c, \u9ed8\u8ba4\u4e3a\u4e00\u4e2a\u603b\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7a7a\u5bf9\u8c61\u7684\u51fd\u6570"}],mdxType:"PropsTable"}),Object(l.b)("h3",{id:"formobject"},Object(l.b)("inlineCode",{parentName:"h3"},"Form.Object")),Object(l.b)("p",null,Object(l.b)("a",{parentName:"p",href:"advanced#formobject"},"{\ud83d\ude80} \u7528\u6cd5"),"\u3002 \u4ee5\u5f53\u524d model \u4e3a\u57fa\u7840\uff0c\u4e3a\u5176\u5b50\u8282\u70b9\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684 sub model\uff0c\u5e76\u5c06\u5b50\u8282\u70b9\u4e2d\u7684\u8868\u5355\u503c\u6536\u96c6\u5230\u5f53\u524d model \u4e2d name \u5bf9\u5e94\u7684\u4f4d\u7f6e"),Object(l.b)(m,{props:[{name:"name",type:"string",required:!0,description:"\u5b57\u6bb5\u7d22\u5f15"}],mdxType:"PropsTable"}),Object(l.b)("h3",{id:"formfield"},Object(l.b)("inlineCode",{parentName:"h3"},"Form.Field")),Object(l.b)("p",null,"{\ud83d\ude80} \u7528\u4e8e\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u8868\u5355\u9879\u7ec4\u4ef6\u3002"),Object(l.b)("p",null,"TODO \u7528\u6cd5\u4ecb\u7ecd"),Object(l.b)("h2",{id:"contexts--hooks"},"contexts & hooks"),Object(l.b)("h3",{id:"usemodel"},Object(l.b)("inlineCode",{parentName:"h3"},"useModel")),Object(l.b)("p",null,"\u83b7\u53d6\u5f53\u524d\u5c42\u7ea7\u7684\u6a21\u578b\u5bf9\u8c61\u3002"),Object(l.b)("h3",{id:"formmodelconsumer"},Object(l.b)("inlineCode",{parentName:"h3"},"Form.ModelConsumer")),Object(l.b)("p",null,"ModelContext \u7684 ",Object(l.b)("a",{parentName:"p",href:"https://zh-hans.reactjs.org/docs/context.html#contextconsumer"},Object(l.b)("inlineCode",{parentName:"a"},"Consumer")),"\uff0c\u53ef\u7528\u4e8e\u8ba2\u9605\u5f53\u524d\u5c42\u7ea7\u7684 model\u3002"),Object(l.b)("p",null,"\u8be5\u7ec4\u4ef6\u5df2\u7ecf\u88ab\u5305\u88f9\u5728 ",Object(l.b)("a",{parentName:"p",href:"https://mobx.js.org/react-integration.html"},"observer")," \u4e2d\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5728 ",Object(l.b)("a",{parentName:"p",href:"https://zh-hans.reactjs.org/docs/render-props.html"},"render prop")," \u4e2d\u8bfb\u53d6 mobx observable \u5bf9\u8c61\u3002"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"<Form.ModelConsumer>\n  {(model) => {\n    const person = model.getSubModel('person');\n    return <span>\u59d3\u540d\uff1a {person.getValue('name')}</span>;\n  }}\n</Form.ModelConsumer>\n")),Object(l.b)("h3",{id:"formmodelprovider"},Object(l.b)("inlineCode",{parentName:"h3"},"Form.ModelProvider")),Object(l.b)("p",null,"{\ud83d\ude80} \u4e3b\u52a8\u5728 react context \u4e2d\u8bbe\u7f6e\u6a21\u578b\u5bf9\u8c61\u3002"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"<Form.ModelProvider value={model}>{children}</Form.ModelProvider>")),Object(l.b)("h3",{id:"useformenv"},Object(l.b)("inlineCode",{parentName:"h3"},"useFormEnv")),Object(l.b)("p",null,"{\ud83d\ude80} \u83b7\u53d6\u5f53\u524d\u5c42\u7ea7\u7684\u73af\u5883\u53d8\u91cf\u3002"),Object(l.b)("h3",{id:"formenvprovider"},Object(l.b)("inlineCode",{parentName:"h3"},"FormEnvProvider")),Object(l.b)("p",null,"{\ud83d\ude80} \u5728\u6307\u5b9a\u7684\u5c42\u7ea7\u8986\u76d6\u8868\u5355\u7684\u73af\u5883\u53d8\u91cf\u3002"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"<Form />")," \u6e32\u67d3\u65f6\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u5355\u72ec\u4f7f\u7528 ",Object(l.b)("inlineCode",{parentName:"p"},"<FormEnvProvider />"),"\u3002 \u76ee\u524d\u9ed8\u8ba4\u652f\u6301\u8bbe\u7f6e ",Object(l.b)("inlineCode",{parentName:"p"},"isPreview"),"\uff1a"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},'<Form>\n  <FormItem name="aaa" />\n  <FormItem name="bbb" />\n\n  <FormEnvProvider isPreview>\n    {/* ccc \u548c ddd \u603b\u662f\u4f1a\u5904\u4e8e\u9884\u89c8\u6001 */}\n    <FormItem name="ccc" />\n    <FormItem name="ddd" />\n  </FormEnvProvider>\n</Form>\n')),Object(l.b)("p",null,"FormEnvProvider \u63a5\u53d7\u4efb\u610f\u7684 props\uff0c\u8bbe\u7f6e\u540e\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(l.b)("inlineCode",{parentName:"p"},"useFormEnv()")," \u83b7\u53d6\u5230\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf\uff08\u6ce8\u610f TypeScript \u7c7b\u578b\u4fe1\u606f\u8981\u8fdb\u884c\u76f8\u5e94\u7684\u62d3\u5c55\uff09\u3002"),Object(l.b)("p",null,"\u8bbe\u7f6e FormEnvProvider \u65f6\uff0c\u65b0\u7684\u73af\u5883\u53d8\u91cf\u4f1a\u4e0e\u4e0a\u5c42\u7684\u73af\u5883\u53d8\u91cf\u8fdb\u884c\u5408\u5e76\uff0c\u7136\u540e\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002"),Object(l.b)("h2",{id:"\u6570\u7ec4\u5e03\u5c40-"},"\u6570\u7ec4\u5e03\u5c40 {\ud83d\ude80}"),Object(l.b)("p",null,"\u9700\u8981\u914d\u5408 ",Object(l.b)("inlineCode",{parentName:"p"},"Form.Array")," \u4f7f\u7528"),Object(l.b)("h3",{id:"arraycard"},Object(l.b)("inlineCode",{parentName:"h3"},"arrayCard")),Object(l.b)("p",null,"{\ud83d\ude80} \u5361\u7247\u5e03\u5c40"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-tsx"},"interface ArrayCardOptions {\n  title?: string;\n  showItemCount?: boolean;\n  showItemOrder?: boolean;\n  style?: React.CSSProperties;\n}\n")),Object(l.b)("h3",{id:"arraytable"},Object(l.b)("inlineCode",{parentName:"h3"},"arrayTable")),Object(l.b)("p",null,"{\ud83d\ude80} \u8868\u683c\u5e03\u5c40"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-tsx"},"interface ArrayTableOptions {\n  defaultColumnWidth?: number;\n  operationColumn?: Partial<Column>;\n  orderColumn?: Partial<Column>;\n  style?: React.CSSProperties;\n  className?: string;\n}\n")),Object(l.b)("h2",{id:"\u6a21\u578b\u4e0e\u5de5\u5177"},"\u6a21\u578b\u4e0e\u5de5\u5177"),Object(l.b)("h3",{id:"model"},Object(l.b)("inlineCode",{parentName:"h3"},"Model")),Object(l.b)("p",null,"Model \u8868\u793a\u300c\u4e00\u4e2a\u5bf9\u8c61\u6216\u6570\u7ec4\u5bf9\u5e94\u7684\u8868\u5355\u6a21\u578b\u90e8\u5206\u300d\u3002"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.getSubModel(name): Model")," \u83b7\u53d6\u4e00\u4e2a\u5b50\u6a21\u578b"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.getSubArray(name): Model")," \u83b7\u53d6\u4e00\u4e2a\u5b50\u6a21\u578b\uff0c\u4f46\u83b7\u53d6\u7684\u5b50\u6a21\u578b\u7684\u6570\u636e\u683c\u5f0f\u4e3a\u6570\u7ec4"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.getField(name): Field")," \u83b7\u53d6 name \u5bf9\u5e94\u7684\u5b57\u6bb5\u5bf9\u8c61"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.root: RootModel")," \u6307\u5411 RootModel"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.path: string[]")," \u4ece RootModel \u5230\u5f53\u524d model \u7684\u6570\u636e\u8def\u5f84"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.parent: IModel")," \u6307\u5411\u4e0a\u4e00\u7ea7\u7684 model"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.values")," \u6a21\u578b\u4e0a\u7684\u6570\u636e\uff0c\u8fd9\u662f\u4e00\u4e2a mobx computed \u5b57\u6bb5"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.getValue(name, defaultValue)")," \u4ee5\u5f53\u524d\u6a21\u578b\u4e3a\u8d77\u59cb\u8def\u5f84\uff0c\u8bfb\u53d6 name \u5904\u7684\u6570\u636e"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.setValue(name, value)")," \u4ee5\u5f53\u524d\u6a21\u578b\u4e3a\u8d77\u59cb\u8def\u5f84\uff0c\u4fee\u6539 name \u5904\u7684\u6570\u636e"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.state")," \u6a21\u578b\u7ea7\u522b\u7684\u72b6\u6001\uff0c\u8fd9\u662f\u4e00\u4e2a mobx observable \u5bf9\u8c61\uff0c\u9ed8\u8ba4\u4e3a ",Object(l.b)("inlineCode",{parentName:"li"},"{}"),"\uff0c\u4e00\u822c\u7528\u6765\u7ba1\u7406\u4e00\u4e9b\u8868\u5355\u7684 UI \u72b6\u6001\u3002"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"model.id: string")," \u6a21\u578b\u5728\u6240\u5c5e RootModel \u5185\u7684\u552f\u4e00 id")),Object(l.b)("h3",{id:"field"},Object(l.b)("inlineCode",{parentName:"h3"},"Field")),Object(l.b)("p",null,"Field \u7528\u6765\u8868\u793a\u300c\u4e00\u4e2a \u89c6\u56fe\u63a7\u4ef6 \u5bf9\u5e94\u7684\u8868\u5355\u6a21\u578b\u90e8\u5206\u300d\u3002"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"field.value")," \u8bfb\u53d6\u6216\u8bbe\u7f6e\u5b57\u6bb5\u7684\u503c\uff0c\u8fd9\u662f\u4e00\u4e2a mobx computed \u5b57\u6bb5"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"field.state")," \u5b57\u6bb5\u72b6\u6001\uff0c\u8fd9\u662f\u4e00\u4e2a mobx observable \u5bf9\u8c61\uff0c\u9ed8\u8ba4\u4e3a ",Object(l.b)("inlineCode",{parentName:"li"},"{}"),"\u3002",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"\u76ee\u524d\uff0c\u6211\u4eec\u7ea6\u5b9a\u4e86 ",Object(l.b)("inlineCode",{parentName:"li"},"field.state.error")," \u4f5c\u4e3a\u8be5\u5b57\u6bb5\u4e0a\u7684\u9519\u8bef\u72b6\u6001\uff0c\u5f53 state.error \u6709\u503c\u65f6\uff0c\u9875\u9762\u4e2d\u5c31\u4f1a\u5c55\u793a\u5bf9\u5e94\u7684\u51fa\u9519\u63d0\u793a\u3002"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"field.config")," \u5b57\u6bb5\u914d\u7f6e\u4fe1\u606f\uff0c\u53cd\u6620\u8be5\u5b57\u6bb5\u5bf9\u5e94\u7684\u63a7\u4ef6\u6700\u8fd1\u4e00\u6b21\u88ab\u6e32\u67d3\u65f6 React Element \u4e0a\u7684 props"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"field.id: string")," \u5b57\u6bb5\u5728\u6240\u5c5e\u8868\u5355\u5185\u7684\u552f\u4e00 id"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"field.mountCount: number")," \u5b57\u6bb5\u5bf9\u5e94\u7684\u63a7\u4ef6\u7684\u52a0\u8f7d\u6570\u91cf"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"field.path: string[]")," \u4ece RootModel \u5230\u8be5\u5b57\u6bb5\u7684\u5b8c\u6574\u8def\u5f84"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"field.parent: IModel")," \u6307\u5411\u4e0a\u4e00\u7ea7\u7684 model")),Object(l.b)("h3",{id:"modelutilsclearerror"},Object(l.b)("inlineCode",{parentName:"h3"},"modelUtils.clearError")),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"modelUtils.clearError(model : IModel): void")),Object(l.b)("p",null,"mobx action. \u6e05\u9664 model \u4e0a\u6240\u6709\u7684\u9519\u8bef\u4fe1\u606f"),Object(l.b)("h3",{id:"modelutilsvalidateall"},Object(l.b)("inlineCode",{parentName:"h3"},"modelUtils.validateAll")),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"modelUtils.validateAll(model: IModel): { hasError: boolean, errors: any }")),Object(l.b)("p",null,"mobx action. \u6267\u884c model \u4e0a\u6240\u6709\u7684\u6821\u9a8c\uff0c\u5e76\u8fd4\u56de\u6240\u6709\u7684\u62a5\u9519\u4fe1\u606f"),Object(l.b)("h3",{id:"fieldutilsvalidate"},Object(l.b)("inlineCode",{parentName:"h3"},"fieldUtils.validate")),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"fieldUtils.validate(field: Field): any")),Object(l.b)("p",null,"mobx action. \u6267\u884c\u6307\u5b9a\u5b57\u6bb5\u4e0a\u7684\u6821\u9a8c\uff0c\u8fd4\u56de\u62a5\u9519\u4fe1\u606f\u3002"),Object(l.b)("h3",{id:"fieldutilshandleblur"},Object(l.b)("inlineCode",{parentName:"h3"},"fieldUtils.handleBlur")),Object(l.b)("p",null,"{\ud83d\ude80} ",Object(l.b)("inlineCode",{parentName:"p"},"fieldUtils.handleBlur(field: Field): void")),Object(l.b)("p",null,"mobx action. blur \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u4e00\u822c\u5728\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u8868\u5355\u9879\u7ec4\u4ef6\u65f6\u4f7f\u7528\u3002"),Object(l.b)("h3",{id:"fieldutilshandlechange"},Object(l.b)("inlineCode",{parentName:"h3"},"fieldUtils.handleChange")),Object(l.b)("p",null,"{\ud83d\ude80} ",Object(l.b)("inlineCode",{parentName:"p"},"fieldUtils.handleChange(field: Field, nextValue: any): void")),Object(l.b)("p",null,"mobx action. change \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u4e00\u822c\u5728\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u8868\u5355\u9879\u7ec4\u4ef6\u65f6\u4f7f\u7528\u3002"),Object(l.b)("h3",{id:"makeasyncvalue"},Object(l.b)("inlineCode",{parentName:"h3"},"makeAsyncValue")),Object(l.b)("p",null,"{\ud83d\ude80} \u5f00\u53d1\u4e2d"))}p.isMDXComponent=!0}}]);