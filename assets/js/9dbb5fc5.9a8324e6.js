(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{205:function(e,t,n){"use strict";n.d(t,"h",(function(){return F})),n.d(t,"b",(function(){return S})),n.d(t,"d",(function(){return A})),n.d(t,"a",(function(){return q})),n.d(t,"c",(function(){return W})),n.d(t,"e",(function(){return D})),n.d(t,"f",(function(){return J})),n.d(t,"g",(function(){return w}));var a=n(164),r=n(177),l=n(0),o=n.n(l),i=n(213),d=n.n(i);function c(e){e.subModels.forEach((e,t)=>{e.name=String(t)})}function m(e,t,n){if(null==e)return;const[a]=e.splice(t,1);e.splice(n,0,a)}function s(e,t,n){if(null==e)return;const a=e[t];e[t]=e[n],e[n]=a}function u(e){return String(Number.parseInt(e))===e}function p(e){return u(e)?"array":"object"}function b(e,t,n){const r=Array.isArray(t)?t:h(t);let l=e;for(let o=0;o<r.length;o+=1){if(!a.isObservable(l))return n;l=a.get(l,r[o])}return void 0===l?n:l}function f(e,t,n){const r=Array.isArray(t)?t:h(t),l=r.length-1;let o=e;for(let i=0;i<l;i+=1){const e=r[i];if(null==a.get(o,e)&&(u(r[i+1])?a.set(o,e,[]):a.set(o,e,{})),o=a.get(o,e),!a.isObservable(o))return}a.isObservable(o)&&a.set(o,r[l],n)}const y={append:Object(a.action)((e,t)=>{var n;null==e.values&&(e.values=[]),e.values.push(null!==(n=null==t?void 0:t(e))&&void 0!==n?n:{})}),delete:Object(a.action)((e,t)=>{d()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),e.values.splice(t,1),e._proxy.subModels.splice(t,1),c(e._proxy)}),moveUp:Object(a.action)((e,t)=>{0!==t&&(d()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),s(e.values,t,t-1),s(e._proxy.subModels,t,t-1),c(e._proxy))}),moveDown:Object(a.action)((e,t)=>{t!==e.values.length-1&&(d()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),s(e.values,t,t+1),s(e._proxy.subModels,t,t+1),c(e._proxy))}),clear:Object(a.action)(e=>{null!=e.values&&0!==e.values.length&&(d()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),e.values=[],e._proxy.subModels.length=0)}),dragAndDrop:Object(a.action)((e,t,n)=>{d()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),m(e.values,t,n),m(e._proxy.subModels,t,n),c(e._proxy)}),renderArrayItem:(e,t,n)=>o.a.createElement(E,{name:String(t)},n),getKey:(e,t)=>e.getSubModel(String(t)).id};function O(e,t){return void 0!==e?e:t}function h(e){return e.split(".")}try{p.displayName="keyToValueShape",p.__docgenInfo={description:"",displayName:"keyToValueShape",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#keyToValueShape"]={docgenInfo:p.__docgenInfo,name:"keyToValueShape",path:"../xform/src/core/utils.tsx#keyToValueShape"})}catch(Q){}try{b.displayName="observableGetIn",b.__docgenInfo={description:"lodash.get(...) for mobx observables",displayName:"observableGetIn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#observableGetIn"]={docgenInfo:b.__docgenInfo,name:"observableGetIn",path:"../xform/src/core/utils.tsx#observableGetIn"})}catch(Q){}try{f.displayName="observableSetIn",f.__docgenInfo={description:"lodash.set(...) for mobx observables",displayName:"observableSetIn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#observableSetIn"]={docgenInfo:f.__docgenInfo,name:"observableSetIn",path:"../xform/src/core/utils.tsx#observableSetIn"})}catch(Q){}try{O.displayName="composeState",O.__docgenInfo={description:"\u5408\u5e76\u53d7\u63a7\u72b6\u6001\u548c \u975e\u53d7\u63a7\u72b6\u6001",displayName:"composeState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#composeState"]={docgenInfo:O.__docgenInfo,name:"composeState",path:"../xform/src/core/utils.tsx#composeState"})}catch(Q){}try{h.displayName="splitToPath",h.__docgenInfo={description:"",displayName:"splitToPath",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/utils.tsx#splitToPath"]={docgenInfo:h.__docgenInfo,name:"splitToPath",path:"../xform/src/core/utils.tsx#splitToPath"})}catch(Q){}var v=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},j=o.a.createContext(null),g=j.Provider,N=o.a.createContext({}),S=function(e){var t=e.children,n=v(e,["children"]),a=C();return o.a.createElement(N.Provider,{value:Object.assign(Object.assign({},a),n)},t)};function C(){return Object(l.useContext)(N)}function F(){return Object(l.useContext)(j)}var x=Object(r.a)((function(e){var t,n,a=e.name,r=e.children,l=e.layout,i=e.itemFactory,d=F();if("&"===a)throw new Error("XFormArray \u4e0d\u652f\u6301 name=&. path=("+(d.path.join(".")||"root")+")");var c=d.getSubArray(a),m=null!==(n=null===(t=c.values)||void 0===t?void 0:t.length)&&void 0!==n?n:0;return o.a.createElement(g,{value:c},l({arrayModel:c,itemCount:m,itemContent:r,itemFactory:i}))})),E=Object(r.a)((function(e){var t=e.name,n=e.children,a=F();return"&"===t?o.a.createElement(o.a.Fragment,null,n):o.a.createElement(g,{value:a.getSubModel(t),children:n})})),_=Object(r.a)((function(e){var t=e.name,n=e.required,r=e.children,l=e.defaultValue,o=F(),i=Object(a.computed)((function(){return"&"===t?o._asField():o.getField(t)})).get();i._useTrack(e);var d=O(i.value,l);return r({model:o,name:t,field:i,value:d,required:n,defaultValue:l})}));try{g.displayName="ModelProvider",g.__docgenInfo={description:"",displayName:"ModelProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#ModelProvider"]={docgenInfo:g.__docgenInfo,name:"ModelProvider",path:"../xform/src/core/components.tsx#ModelProvider"})}catch(Q){}try{S.displayName="FormEnvProvider",S.__docgenInfo={description:"",displayName:"FormEnvProvider",props:{isPreview:{defaultValue:null,description:"",name:"isPreview",required:!1,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"(submitValues: any, model: IModel<unknown>) => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(errors: any, model: IModel<unknown>) => void"}},onReset:{defaultValue:null,description:"",name:"onReset",required:!1,type:{name:"(model: IModel<unknown>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#FormEnvProvider"]={docgenInfo:S.__docgenInfo,name:"FormEnvProvider",path:"../xform/src/core/components.tsx#FormEnvProvider"})}catch(Q){}try{x.displayName="XFormArray",x.__docgenInfo={description:"\u5bf9\u8c61\u6570\u7ec4\u8868\u5355",displayName:"XFormArray",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"(input: XFormArrayLayoutInput) => ReactElement<any, string | JSXElementConstructor<any>>"}},itemFactory:{defaultValue:null,description:"",name:"itemFactory",required:!1,type:{name:"(arrayModel: SubModel<unknown[]>) => any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#XFormArray"]={docgenInfo:x.__docgenInfo,name:"XFormArray",path:"../xform/src/core/components.tsx#XFormArray"})}catch(Q){}try{E.displayName="XFormObject",E.__docgenInfo={description:"\u4e3a\u8be5\u7ec4\u4ef6\u4e0b\u7684 XFormField \u6dfb\u52a0\u4e00\u4e2a\u6570\u636e\u5b57\u6bb5\u524d\u7f00",displayName:"XFormObject",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#XFormObject"]={docgenInfo:E.__docgenInfo,name:"XFormObject",path:"../xform/src/core/components.tsx#XFormObject"})}catch(Q){}try{_.displayName="XFormField",_.__docgenInfo={description:"\u8868\u5355\u5b57\u6bb5\uff08field\uff09\n\n\u5728 xform \u4e2d\uff0c\u4e00\u4e2a\u300c\u5b57\u6bb5\u300d\u5305\u542b\u4e00\u4e2a\u300c\u89c6\u56fe\u63a7\u4ef6\u5b9e\u4f8b\u300d\uff08\u4f8b\u5982 Input\uff0cSelect \u5b9e\u4f8b\uff09\u548c\u4e00\u4efd\u72b6\u6001\uff08\u4f8b\u5982 Input \u5305\u542b\u4e00\u4e2a\u5b57\u7b26\u4e32\u72b6\u6001\uff09\uff1b\nXFormField \u662f\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6 / \u57fa\u7840\u7ec4\u4ef6\uff0c\u6bcf\u4e2a\u5177\u4f53\u7684\u7ec4\u4ef6\u7c7b\u578b\uff08\u4f8b\u5982 Input\uff0cSelect \uff09\u90fd\u5e94\u8be5\u7ee7\u627f\u8be5\u7ec4\u4ef6\u5e76\u5c01\u88c5\u76f8\u5e94\u7684 FieldItem\uff1b",displayName:"XFormField",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},labelWidth:{defaultValue:null,description:"",name:"labelWidth",required:!1,type:{name:"string"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},validator:{defaultValue:null,description:"",name:"validator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"any"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"(value: any) => boolean"}},requiredMessage:{defaultValue:null,description:"",name:"requiredMessage",required:!1,type:{name:"string"}},blurValidator:{defaultValue:null,description:"",name:"blurValidator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},changeValidator:{defaultValue:null,description:"",name:"changeValidator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"string"}},renderPreview:{defaultValue:null,description:"",name:"renderPreview",required:!1,type:{name:"(props: any) => ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/core/components.tsx#XFormField"]={docgenInfo:_.__docgenInfo,name:"XFormField",path:"../xform/src/core/components.tsx#XFormField"})}catch(Q){}class V{constructor(e,t){this.fieldMap=new Map,this.model=e,this.valueShape=t,this.subModels="array"===t?[]:{}}iterateModels(e){const t=n=>{Object.values(n.subModels).forEach(n=>{e(n),t(n._proxy)})};t(this)}iterateFields(e){this.fieldMap.forEach(e),this.iterateModels(t=>{t._proxy.fieldMap.forEach(e)})}getSubModel(e,t="object"){const n=Array.isArray(e)?e:h(e);let a=this.model;for(let r=0;r<n.length-1;r++)a=a._proxy._getSubModel(n[r],p(n[r+1]));return a._proxy._getSubModel(n[n.length-1],t)}_getSubModel(e,t="object"){d()(!e.includes("."),"name \u4e2d\u4e0d\u80fd\u5305\u542b .");let n=this.subModels[e];return null==n&&(n=new P(this.model,e,t),this.subModels[e]=n),n}getField(e){const t=Array.isArray(e)?e:h(e);if(t.length>1){return this.getSubModel(t[0],p(t[1])).getField(t.slice(1))}const n=t[0];let a=this.fieldMap.get(n);return null==a&&(a=new M(this.model,n),this.fieldMap.set(n,a)),a}}const I=[];class A{constructor(e={}){this._nextModelId=1,this._nextFieldId=1,this.state={},this.root=this,this.parent=this,this.path=I,this.valueShape="object",this._proxy=new V(this,"object"),this.values=e,Object(a.makeObservable)(this,{values:a.observable,state:a.observable,setValue:a.action})}getNextModelId(){return"Model_"+this._nextModelId++}getNextFieldId(){return"Field_"+this._nextFieldId++}getValue(e,t){return b(this.values,e,t)}setValue(e,t){f(this.values,e,t)}getSubModel(e){return this._proxy.getSubModel(e,"object")}getSubArray(e){return this._proxy.getSubModel(e,"array")}getField(e){return this._proxy.getField(e)}_asField(){throw new Error("FormModel \u4e0b\u4e0d\u652f\u6301\u4f7f\u7528 name=& \u7684 Field")}}class P{constructor(e,t,n){this.state={},d()(!t.includes("."),"name \u4e2d\u4e0d\u80fd\u5305\u542b ."),this.root=e.root,this.parent=e,this.name=t,this.valueShape=n,this._proxy=new V(this,n),this.id=this.root.getNextModelId(),Object(a.makeObservable)(this,{values:a.computed,state:a.observable,setValue:a.action,name:a.observable},{name:`${this.id}(${this.name})`})}get path(){return[...this.parent.path,this.name]}getSubModel(e){return this._proxy.getSubModel(e,"object")}getSubArray(e){return this._proxy.getSubModel(e,"array")}get values(){return this.parent.getValue(this.name)}set values(e){this.parent.setValue(this.name,e)}getField(e){return this._proxy.getField(e)}getValue(e,t){return b(this.values,e,t)}setValue(e,t){null==this.values&&(this.values="array"===this.valueShape?[]:{}),f(this.values,e,t)}_asField(){return this.parent.getField(this.name)}}class M{constructor(e,t){this.config=null,this.mountCount=0,this.state={},this.parent=e,this.name=t,this.id=this.parent.root.getNextFieldId(),Object(a.makeObservable)(this,{state:a.observable,name:a.observable.ref,value:a.computed,path:a.computed,config:!1,mountCount:!1},{name:`${this.id}(${this.name})`})}get value(){return this.parent.getValue(this.name)}set value(e){this.parent.setValue(this.name,e)}get path(){return this.parent.path.concat([this.name])}_useTrack(e){Object(l.useLayoutEffect)(()=>(this.config=e,this.mountCount+=1,()=>{this.config=null,this.mountCount-=1}),[e])}}var T=n(159),R={validate:Object(a.action)((function(e,t){var n,r,l,o;if(void 0===t&&(t="*"),null!=e.config){var i=e.config,d=i.validator,c=i.required,m=i.defaultValue,s=i.isEmpty,u=i.requiredMessage,p=void 0===u?"\u8be5\u5b57\u6bb5\u4e3a\u5fc5\u586b\u9879":u,b=i.blurValidator,f=i.changeValidator,y=e.value;if(c&&s(y))return e.state.error=p,null===(r=(n=e.state).cancelValidation)||void 0===r||r.call(n),e.state.cancelValidation=null,Promise.resolve(p);var h=O(y,m),v=[("*"===t||"change"===t)&&(null==f?void 0:f(h,e)),("*"===t||"blur"===t)&&(null==b?void 0:b(h,e)),null==d?void 0:d(h,e)].filter(Boolean),j=!1;return null===(o=(l=e.state).cancelValidation)||void 0===o||o.call(l),e.state.validating=!0,e.state.cancelValidation=function(){e.state.validating=!1,j=!0},Promise.all(v).then(Object(a.action)((function(t){if(!j){e.state.cancelValidation=null,e.state.validating=!1;var n=t.filter(Boolean)[0];return e.state.error=n,n}})))}})),handleBlur:function(e){R.validate(e,"blur")},handleChange:Object(a.action)((function(e,t){e.value=t,R.validate(e,"change")}))},w={clearError:Object(a.action)((function(e){e._proxy.iterateFields((function(e){e.state.error=null}))})),validateAll:Object(a.action)((function(e,t){void 0===t&&(t="*");var n=!1,r=Object(a.observable)("array"===e.valueShape?[]:{}),l=[];return e._proxy.iterateFields((function(e){0!==e.mountCount&&l.push(R.validate(e,t).then(Object(a.action)((function(t){t&&(n=!0,f(r,e.path,t))}))))})),Promise.all(l).then((function(){return{hasError:n,errors:Object(a.toJS)(r)}}))})),submit:Object(a.action)((function(e,t){var n=t.onError,r=t.onSubmit,l=t.valueFilter;w.validateAll(e).then(Object(a.action)((function(t){var o=t.hasError,i=t.errors;if(o)null==n||n(i,e);else if("function"==typeof r)if("all"===l)r(Object(a.toJS)(e.values),e);else{var d=Object(a.observable)("array"===e.valueShape?[]:{});e._proxy.iterateFields((function(e){0!==e.mountCount&&void 0!==e.value&&f(d,e.path,e.value)})),r(Object(a.toJS)(d),e)}})))})),reset:Object(a.action)((function(e,t){var n=t.onReset;e.values={},w.clearError(e),null==n||n(e)}))};function q({model:e,defaultValue:t,isPreview:n,layout:a={labelPosition:"left"},onSubmit:r,onError:i,onReset:d,children:c,className:m,style:s}){const[u]=Object(l.useState)(()=>new A(t)),p=O(e,u);return o.a.createElement(S,{isPreview:n,onError:i,onReset:d,onSubmit:r},o.a.createElement(g,{value:p},o.a.createElement(T.FormLayout,Object.assign({},a,{style:s,className:m}),c)))}const k=Object(r.a)(({watch:e,effect:t})=>{const n=F(),r=n.getField(e);return Object(l.useEffect)(()=>Object(a.reaction)(()=>Object(a.toJS)(r.value),(e,a)=>t(e,{model:n,prev:a,next:e})),[n,e,r,t]),null}),B=Object(r.a)(({children:e})=>e(F()));q.Submit=function({type:e="primary",children:t="\u63d0\u4ea4",...n}){const a=F().root,r=C();return o.a.createElement(T.Button,Object.assign({onClick:()=>w.submit(a,{...r,valueFilter:"mounted"}),type:e,children:t},n))},q.Reset=function({children:e="\u91cd\u7f6e",...t}){const n=F().root,r=C();return o.a.createElement(T.Button,Object.assign({onClick:Object(a.action)(()=>w.reset(n,r)),children:e},t))},q.Effect=k,q.Array=x,q.Object=E,q.Field=_,q.ModelProvider=g,q.ModelConsumer=B;try{q.displayName="Form",q.__docgenInfo={description:"",displayName:"Form",props:{model:{defaultValue:null,description:"\u53d7\u63a7\u7528\u6cd5\u3002 xform \u6a21\u578b\u5bf9\u8c61\uff0c\u4e00\u822c\u7531\u4e0a\u5c42\u901a\u8fc7 new FormModel(...) \u521b\u5efa\u800c\u6210",name:"model",required:!1,type:{name:"IModel<unknown>"}},defaultValue:{defaultValue:null,description:"\u975e\u53d7\u63a7\u7528\u6cd5\u3002 \u8868\u5355\u7684\u9ed8\u8ba4\u503c",name:"defaultValue",required:!1,type:{name:"any"}},onSubmit:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onSubmit",required:!1,type:{name:"(submitValues: any, model: FormModel<unknown>) => void"}},onError:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u51fa\u9519\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onError",required:!1,type:{name:"(errors: any, model: FormModel<unknown>) => void"}},onReset:{defaultValue:null,description:"\u6e05\u7a7a\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Reset /> \u4f7f\u7528",name:"onReset",required:!1,type:{name:"(model: FormModel<unknown>) => void"}},isPreview:{defaultValue:{value:"false"},description:"\u662f\u5426\u4e3a\u9884\u89c8\u6001",name:"isPreview",required:!1,type:{name:"boolean"}},layout:{defaultValue:{value:"{ labelPosition: 'left' }"},description:"\u5e03\u5c40\u53c2\u6570\n@category \u5e03\u5c40",name:"layout",required:!1,type:{name:'{ isInline?: boolean; labelPosition?: "top" | "left"; }'}},style:{defaultValue:null,description:"@category \u5e03\u5c40",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"@category \u5e03\u5c40",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form"]={docgenInfo:q.__docgenInfo,name:"Form",path:"../xform/src/form.tsx#Form"})}catch(Q){}try{q.Submit.displayName="Form.Submit",q.Submit.__docgenInfo={description:"",displayName:"Form.Submit",props:{shape:{defaultValue:null,description:"",name:"shape",required:!1,type:{name:'"solid" | "link" | "text" | "warning" | "ghost"'}},type:{defaultValue:{value:"primary"},description:"",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconOnly:{defaultValue:null,description:"\u662f\u5426\u4e3a\u7eaf\u56fe\u6807\u6309\u94ae",name:"isIconOnly",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},leftElement:{defaultValue:null,description:"",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"",name:"rightElement",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Submit"]={docgenInfo:q.Submit.__docgenInfo,name:"Form.Submit",path:"../xform/src/form.tsx#Form.Submit"})}catch(Q){}try{q.Reset.displayName="Form.Reset",q.Reset.__docgenInfo={description:"",displayName:"Form.Reset",props:{shape:{defaultValue:null,description:"",name:"shape",required:!1,type:{name:'"solid" | "link" | "text" | "warning" | "ghost"'}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconOnly:{defaultValue:null,description:"\u662f\u5426\u4e3a\u7eaf\u56fe\u6807\u6309\u94ae",name:"isIconOnly",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},leftElement:{defaultValue:null,description:"",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"",name:"rightElement",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Reset"]={docgenInfo:q.Reset.__docgenInfo,name:"Form.Reset",path:"../xform/src/form.tsx#Form.Reset"})}catch(Q){}try{q.Effect.displayName="Form.Effect",q.Effect.__docgenInfo={description:"",displayName:"Form.Effect",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Effect"]={docgenInfo:q.Effect.__docgenInfo,name:"Form.Effect",path:"../xform/src/form.tsx#Form.Effect"})}catch(Q){}try{q.Array.displayName="Form.Array",q.Array.__docgenInfo={description:"",displayName:"Form.Array",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"(input: XFormArrayLayoutInput) => ReactElement<any, string | JSXElementConstructor<any>>"}},itemFactory:{defaultValue:null,description:"",name:"itemFactory",required:!1,type:{name:"(arrayModel: SubModel<unknown[]>) => any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Array"]={docgenInfo:q.Array.__docgenInfo,name:"Form.Array",path:"../xform/src/form.tsx#Form.Array"})}catch(Q){}try{q.Object.displayName="Form.Object",q.Object.__docgenInfo={description:"",displayName:"Form.Object",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Object"]={docgenInfo:q.Object.__docgenInfo,name:"Form.Object",path:"../xform/src/form.tsx#Form.Object"})}catch(Q){}try{q.Field.displayName="Form.Field",q.Field.__docgenInfo={description:"",displayName:"Form.Field",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},labelWidth:{defaultValue:null,description:"",name:"labelWidth",required:!1,type:{name:"string"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},validator:{defaultValue:null,description:"",name:"validator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"any"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"(value: any) => boolean"}},requiredMessage:{defaultValue:null,description:"",name:"requiredMessage",required:!1,type:{name:"string"}},blurValidator:{defaultValue:null,description:"",name:"blurValidator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},changeValidator:{defaultValue:null,description:"",name:"changeValidator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"string"}},renderPreview:{defaultValue:null,description:"",name:"renderPreview",required:!1,type:{name:"(props: any) => ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Field"]={docgenInfo:q.Field.__docgenInfo,name:"Form.Field",path:"../xform/src/form.tsx#Form.Field"})}catch(Q){}try{q.ModelConsumer.displayName="Form.ModelConsumer",q.ModelConsumer.__docgenInfo={description:"",displayName:"Form.ModelConsumer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.ModelConsumer"]={docgenInfo:q.ModelConsumer.__docgenInfo,name:"Form.ModelConsumer",path:"../xform/src/form.tsx#Form.ModelConsumer"})}catch(Q){}function L(e){return e.value?"\u662f":"\u5426"}function K(e){return e.value}function Y(e){return!e}function z(e){return null==e}function X(e){return null==e||Array.isArray(e)&&0===e.length}const U={};function G(e,t){function n({defaultValue:n=t.fallbackValue,componentProps:a,value:r,onChange:l,onBlur:i,...d}){const{isPreview:c}=C();return o.a.createElement(_,Object.assign({defaultValue:n,isEmpty:t.isEmpty},d),({model:n,name:m,field:s,value:u,required:p})=>{var b;const f=s.state.error,y={...Object(T.pick)(d,["dataSource","readOnly","disabled"]),...a,status:O(null==a?void 0:a.status,O(d.status,f?"error":void 0)),value:void 0!==r?r:u,onChange:void 0!==l?l:e=>R.handleChange(s,e),onBlur:void 0!==i?i:()=>R.handleBlur(s)};return o.a.createElement(T.FormControl,{label:d.label,help:d.help,labelWidth:d.labelWidth,required:p,error:f},c?(null!==(b=d.renderPreview)&&void 0!==b?b:t.renderPreview)(y):o.a.createElement(e,Object.assign({},y)))})}n.displayName=`FormItem(${t.name})`,U[t.name]=n}function W({component:e,...t}){const n=U[e];return null==n?o.a.createElement(T.FormControl,null,o.a.createElement("div",{style:{border:"1px dashed var(--rex-colors-error-hover)",fontSize:14,padding:4,color:"var(--rex-colors-error-normal)"}},o.a.createElement("code",null,"<FormItem component='",e,"' />")," \u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7ec4\u4ef6\uff0c\u8bf7\u68c0\u67e5\u7ec4\u4ef6\u540d\u79f0\u662f\u5426\u62fc\u5199\u6b63\u786e")):o.a.createElement(n,t)}G(T.Switch,{name:"switch",renderPreview:L,fallbackValue:!1,isEmpty:Y}),G(T.Checkbox,{name:"checkbox",renderPreview:L,fallbackValue:!1,isEmpty:Y}),G(T.CheckboxGroup,{name:"checkboxGroup",fallbackValue:[],renderPreview(e){var t;const n=null!==(t=e.value)&&void 0!==t?t:e.defaultValue,a=new T.ListStore(e.dataSource);return n.map(e=>{const t=a.getItem(e);return t?t.label:e}).join("\u3001")},isEmpty:e=>null==e||0===e.length}),G(T.RadioGroup,{name:"radioGroup",fallbackValue:null,renderPreview(e){var t;const n=null!==(t=e.value)&&void 0!==t?t:e.defaultValue,a=new T.ListStore(e.dataSource).getItem(n);return a?a.label:n},isEmpty:Y}),G(T.DatePicker,{name:"datePicker",renderPreview:K,fallbackValue:null,isEmpty:Y}),G(T.DateRangePicker,{name:"dateRangePicker",renderPreview(e){var t;const n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return`${n[0]||"-"} ~ ${n[1]||"-"}`},fallbackValue:[],isEmpty:X}),G(T.TimePicker,{name:"timePicker",renderPreview:K,fallbackValue:"",isEmpty:Y}),G(T.FilePicker,{name:"filePicker",renderPreview(e){var t;const n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return o.a.createElement(T.Flex,{spacing:"s",direction:"column"},n.map(({id:e,name:t,url:n})=>o.a.createElement(T.FlexItem,{key:e,bg:"fill.layer1",px:"m"},o.a.createElement(T.Link,{href:n},t))))},fallbackValue:[],isEmpty:X}),G(T.MediaPicker,{name:"mediaPicker",renderPreview(e){var t;const n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return o.a.createElement(T.Flex,{spacing:"m"},n.map(({id:e,name:t,url:n})=>{const a=`${Object(T.colors)("fill.layer1")} url(${n}) center center / 100% no-repeat`;return o.a.createElement(T.Box,{key:e,size:"100px",title:t,display:"inline-block",style:{background:a}})}))},fallbackValue:[],isEmpty:X}),G(T.Input,{name:"input",renderPreview:K,fallbackValue:"",isEmpty:Y}),G(T.Textarea,{name:"textarea",renderPreview:K,fallbackValue:"",isEmpty:Y}),G(T.NumberInput,{name:"numberInput",renderPreview:K,fallbackValue:null,isEmpty:z}),G(T.Range,{name:"range",renderPreview:K,fallbackValue:0,isEmpty:z}),G(T.Select,{name:"select",renderPreview:K,fallbackValue:null,isEmpty:z}),G(T.SingleSelect,{name:"singleSelect",renderPreview:K,fallbackValue:null,isEmpty:Y}),G(T.MultiSelect,{name:"multiSelect",renderPreview:K,fallbackValue:[],isEmpty:X}),G(T.TreeSelect,{name:"treeSelect",renderPreview:K,fallbackValue:null,isEmpty:X}),G(T.SingleTreeSelect,{name:"singleTreeSelect",renderPreview:K,fallbackValue:null,isEmpty:Y}),G(T.MultiTreeSelect,{name:"multiTreeSelect",renderPreview:K,fallbackValue:[],isEmpty:X}),G((function({items:e,value:t,onChange:n,...a}){return o.a.createElement("div",Object.assign({style:{display:"flex",gap:8}},a),e.map(e=>o.a.createElement(T.Button,{key:e,type:e===t?"primary":"normal",onClick:()=>n(e)},e)))}),{name:"testButtonGroup",fallbackValue:"",renderPreview:K,isEmpty:Y});try{W.displayName="FormItem",W.__docgenInfo={description:"",displayName:"FormItem",props:{component:{defaultValue:null,description:"",name:"component",required:!0,type:{name:'"select" | "radioGroup" | "singleSelect" | "multiSelect" | "treeSelect" | "input" | "textarea" | "switch" | "checkbox" | "checkboxGroup" | "datePicker" | "dateRangePicker" | ... 7 more ... | "testButtonGroup"'}},componentProps:{defaultValue:null,description:"",name:"componentProps",required:!1,type:{name:"RadioGroupProps | InputProps | TimePickerProps | TextareaProps | RangeProps | SelectProps | ... 11 more ... | (HTMLProps<...> & { ...; })"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"any"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},labelWidth:{defaultValue:null,description:"",name:"labelWidth",required:!1,type:{name:"string"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},validator:{defaultValue:null,description:"",name:"validator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"(value: any) => boolean"}},requiredMessage:{defaultValue:null,description:"",name:"requiredMessage",required:!1,type:{name:"string"}},blurValidator:{defaultValue:null,description:"",name:"blurValidator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},changeValidator:{defaultValue:null,description:"",name:"changeValidator",required:!1,type:{name:"(value: any, field: Field) => string | Promise<string>"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"string"}},renderPreview:{defaultValue:null,description:"",name:"renderPreview",required:!1,type:{name:"(props: any) => ReactNode"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!1,type:{name:"ListNode<string>[] | (string | SelectItem)[] | ListNode<StringOrNumber>[] | TreeSelectItem[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-item.tsx#FormItem"]={docgenInfo:W.__docgenInfo,name:"FormItem",path:"../xform/src/form-item.tsx#FormItem"})}catch(Q){}const H=e=>{const t=[];for(let n=0;n<e;n++)t.push(n);return t},D=({title:e,showItemCount:t,showItemOrder:n,style:r}={})=>{const l={position:"absolute",top:8,right:8,display:"flex",gap:8,zIndex:20};return i=>{const{arrayModel:d,itemContent:c,itemCount:m,itemFactory:s}=i;return o.a.createElement("div",{className:"xform-array",style:{marginTop:16,marginBottom:8,...r}},(e||t)&&o.a.createElement("h2",null,null!=e?e:"\u5217\u8868"," ",t&&`(${m})`),0===m&&o.a.createElement("div",{style:{border:"1px dashed #aaa",marginTop:16,padding:8,position:"relative",fontSize:20}},"\u7a7a\u7a7a\u5982\u4e5f~~"),o.a.createElement("div",{className:"xform-array-items"},H(m).map(e=>o.a.createElement("div",{key:y.getKey(d,e),className:"xform-array-item",style:{border:"1px dashed #aaa",marginTop:16,padding:8,position:"relative"}},n&&o.a.createElement("code",{style:{fontSize:16}},d.path.join("."),"#",e),o.a.createElement($,Object.assign({},i,{itemIndex:e,style:l})),y.renderArrayItem(d,e,c)))),o.a.createElement("div",{style:{marginTop:12}},o.a.createElement(T.Button,{onClick:Object(a.action)(()=>{y.append(d,s)})},"\u6dfb\u52a0\u4e00\u9879")))}},$=Object(r.a)(({arrayModel:e,itemCount:t,itemIndex:n,style:r})=>o.a.createElement("div",{style:r},o.a.createElement(T.Button,{size:"small",onClick:Object(a.action)(()=>{y.delete(e,n)})},"\u5220\u9664"),o.a.createElement(T.Button,{size:"small",disabled:0===n,onClick:Object(a.action)(()=>{y.moveUp(e,n)})},"\u4e0a\u79fb"),o.a.createElement(T.Button,{size:"small",disabled:n===t-1,onClick:Object(a.action)(()=>{y.moveDown(e,n)})},"\u4e0b\u79fb"))),J=({defaultColumnWidth:e,orderColumn:t,operationColumn:n,className:a,style:r}={})=>{const l={display:"flex",gap:0};return i=>{const{arrayModel:d,itemContent:c,itemCount:m,itemFactory:s}=i,u=o.a.Children.toArray(c).filter(e=>e.type===W).map(e=>({name:"string"==typeof e.props.label?e.props.label:null,title:e.props.label,...e.props["x-table-column"],render:(t,n)=>o.a.createElement(E,{name:String(n.itemIndex)},o.a.cloneElement(e,{label:null,isInline:!0}))}));return null!=t&&u.unshift({name:"#",...t,getValue:e=>e.itemIndex+1}),null!=n&&u.push({name:"",...n,render:(e,t)=>o.a.createElement($,Object.assign({},i,{itemIndex:t.itemIndex,style:l}))}),o.a.createElement("div",{style:r,className:a},o.a.createElement(T.BaseTable,{className:"bordered",primaryKey:"rowKey",defaultColumnWidth:e,dataSource:H(m).map(e=>({rowKey:y.getKey(d,e),itemIndex:e})),columns:u}),o.a.createElement("div",{style:{padding:4,height:48,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5"}},o.a.createElement(T.Button,{type:"primary",onClick:()=>{y.append(d,s)}},"\u6dfb\u52a0\u4e00\u884c")))}};try{D.displayName="arrayCard",D.__docgenInfo={description:"",displayName:"arrayCard",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/array-layouts.tsx#arrayCard"]={docgenInfo:D.__docgenInfo,name:"arrayCard",path:"../xform/src/array-layouts.tsx#arrayCard"})}catch(Q){}try{J.displayName="arrayTable",J.__docgenInfo={description:"",displayName:"arrayTable",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/array-layouts.tsx#arrayTable"]={docgenInfo:J.__docgenInfo,name:"arrayTable",path:"../xform/src/array-layouts.tsx#arrayTable"})}catch(Q){}},213:function(e,t,n){"use strict";e.exports=function(e,t,n,a,r,l,o,i){if(!e){var d;if(void 0===t)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,a,r,l,o,i],m=0;(d=new Error(t.replace(/%s/g,(function(){return c[m++]})))).name="Invariant Violation"}throw d.framesToPop=1,d}}},97:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return m})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return u})),n.d(t,"default",(function(){return f}));var a,r=n(3),l=n(7),o=n(0),i=n.n(o),d=n(161),c=n(205),m={id:"api",title:"API"},s={unversionedId:"xform/api",id:"xform/api",isDocsHomePage:!1,title:"API",description:"{\ud83d\ude80} \u8868\u793a\u8fdb\u9636 API\u3002 \u6240\u6709 API \u90fd\u901a\u8fc7 @rexd/xform \u5bfc\u51fa\u3002",source:"@site/docs/xform/api.mdx",sourceDirName:"xform",slug:"/xform/api",permalink:"/rex-design/docs/xform/api",editUrl:"https://github.com/alibaba/rex-design/edit/main/packages/doc/docs/xform/api.mdx",version:"current",frontMatter:{id:"api",title:"API"},sidebar:"docs",previous:{title:"xform core",permalink:"/rex-design/docs/xform/core"}},u=[{value:"\u7ec4\u4ef6",id:"\u7ec4\u4ef6",children:[{value:"<code>Form</code>",id:"form",children:[]},{value:"<code>FormItem</code>",id:"formitem",children:[]},{value:"<code>Form.Submit</code>",id:"formsubmit",children:[]},{value:"<code>Form.Reset</code>",id:"formreset",children:[]},{value:"<code>Form.Effect</code>",id:"formeffect",children:[]},{value:"<code>Form.Array</code>",id:"formarray",children:[]},{value:"<code>Form.Object</code>",id:"formobject",children:[]},{value:"<code>Form.ItemGroup</code>",id:"formitemgroup",children:[]},{value:"<code>Form.ItemView</code>",id:"formitemview",children:[]}]},{value:"contexts &amp; hooks",id:"contexts--hooks",children:[{value:"<code>useModel</code>",id:"usemodel",children:[]},{value:"<code>Form.ModelConsumer</code>",id:"formmodelconsumer",children:[]},{value:"<code>Form.ModelProvider</code>",id:"formmodelprovider",children:[]},{value:"<code>useFormEnv</code>",id:"useformenv",children:[]},{value:"<code>FormEnvProvider</code>",id:"formenvprovider",children:[]}]},{value:"\u6570\u7ec4\u5e03\u5c40 {\ud83d\ude80}",id:"\u6570\u7ec4\u5e03\u5c40-",children:[{value:"<code>arrayCard</code>",id:"arraycard",children:[]},{value:"<code>arrayTable</code>",id:"arraytable",children:[]}]},{value:"\u6a21\u578b\u4e0e\u5de5\u5177",id:"\u6a21\u578b\u4e0e\u5de5\u5177",children:[{value:"<code>IModel</code>",id:"imodel",children:[]},{value:"<code>Field</code>",id:"field",children:[]},{value:"<code>modelUtils.clearError</code>",id:"modelutilsclearerror",children:[]},{value:"<code>modelUtils.validateAll</code>",id:"modelutilsvalidateall",children:[]},{value:"<code>modelUtils.submit</code>",id:"modelutilssubmit",children:[]},{value:"<code>modelUtils.reset</code>",id:"modelutilsreset",children:[]},{value:"<code>fieldUtils.validate</code>",id:"fieldutilsvalidate",children:[]},{value:"<code>fieldUtils.handleBlur</code>",id:"fieldutilshandleblur",children:[]},{value:"<code>fieldUtils.handleChange</code>",id:"fieldutilshandlechange",children:[]},{value:"<code>createFormItem</code>",id:"createformitem",children:[]},{value:"<code>FormItem.register</code>",id:"formitemregister",children:[]},{value:"<code>makeAsyncValue</code>",id:"makeasyncvalue",children:[]}]}],p=(a="PropsTable",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),Object(d.b)("div",e)}),b={toc:u};function f(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(d.b)("wrapper",Object(r.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(d.b)("p",null,"{\ud83d\ude80} \u8868\u793a\u8fdb\u9636 API\u3002 \u6240\u6709 API \u90fd\u901a\u8fc7 ",Object(d.b)("inlineCode",{parentName:"p"},"@rexd/xform")," \u5bfc\u51fa\u3002"),Object(d.b)("h2",{id:"\u7ec4\u4ef6"},"\u7ec4\u4ef6"),Object(d.b)("h3",{id:"form"},Object(d.b)("inlineCode",{parentName:"h3"},"Form")),Object(d.b)("p",null,"\u8868\u5355\u7ec4\u4ef6\uff0c\u521b\u5efa\u6240\u9700\u7684\u4e0a\u4e0b\u6587\uff0c\u5e76\u901a\u8fc7 FormLayout \u6e32\u67d3\u4e00\u4e2a div\uff1a"),Object(d.b)("ul",null,Object(d.b)("li",{parentName:"ul"},"FormEnvProvider\uff1a\u8868\u5355\u7684\u73af\u5883\u53d8\u91cf\uff0c\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(d.b)("a",{parentName:"li",href:"#useformenv"},Object(d.b)("inlineCode",{parentName:"a"},"useFormEnv"))," \u83b7\u53d6\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf"),Object(d.b)("li",{parentName:"ul"},"ModelProvider\uff1a\u6a21\u578b\u5bf9\u8c61\uff0c\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(d.b)("a",{parentName:"li",href:"#usemodel"},Object(d.b)("inlineCode",{parentName:"a"},"useModel"))," \u83b7\u53d6\u6a21\u578b\u5bf9\u8c61"),Object(d.b)("li",{parentName:"ul"},"FormLayout\uff1a \u8868\u5355\u5e03\u5c40")),Object(d.b)(p,{component:c.a,mdxType:"PropsTable"}),Object(d.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(d.b)("div",{parentName:"div",className:"admonition-heading"},Object(d.b)("h5",{parentName:"div"},Object(d.b)("span",{parentName:"h5",className:"admonition-icon"},Object(d.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(d.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"@alife/hippo-xform")),Object(d.b)("div",{parentName:"div",className:"admonition-content"},Object(d.b)("p",{parentName:"div"},"\u6ce8\u610f\u56e0\u4e3a\u5e95\u5c42\u7ec4\u4ef6\u5e93\u4e0d\u540c\uff0c@alife/hippo-xform \u63d0\u4f9b\u4e86\u4e0d\u540c\u7684 layout \u53c2\u6570\u3002\u8be6\u89c1 ",Object(d.b)("a",{parentName:"p",href:"hippo-xform"},"hippo-xform"),"."))),Object(d.b)("h3",{id:"formitem"},Object(d.b)("inlineCode",{parentName:"h3"},"FormItem")),Object(d.b)("p",null,"\u8868\u5355\u9879 \u7ec4\u4ef6\uff0c\u6e32\u67d3\u4e00\u4e2a FormControl\uff0c\u5305\u542b\u9879\u76ee\u6807\u7b7e\uff08label\uff09\u3001\u9519\u8bef\u4fe1\u606f\u3001\u53ef\u9009\u7684\u5e2e\u52a9\u4fe1\u606f\uff0c\u4ee5\u53ca\u5177\u4f53\u7684\u63a7\u4ef6\u5b9e\u4f8b\uff08\u4f8b\u5982\u4e00\u4e2a\u8f93\u5165\u6846\uff09\u3002"),Object(d.b)(p,{props:[{name:"component",required:!0,type:"string",description:"\u7ec4\u4ef6\u7c7b\u578b"},{name:"name",required:!1,type:"string",description:"\u5b57\u6bb5\u6570\u636e\u7d22\u5f15"},{name:"field",required:!1,type:"Field",description:"Field \u5bf9\u8c61\uff0c\u63d0\u4f9b\u540e\u5c06\u8986\u76d6 name \u5c5e\u6027"},{name:"label",required:!0,type:"ReactNode",description:"\u5b57\u6bb5\u7684\u663e\u793a\u540d\u79f0"},{name:"tip",type:"ReactNode",description:"\u63d0\u793a\u4fe1\u606f"},{name:"help",type:"ReactNode",description:"\u5e2e\u52a9\u6587\u672c"},{name:"defaultValue",description:"\u5b57\u6bb5\u503c\u4e3a\u7a7a\u65f6\uff0c\u7ec4\u4ef6\u5c55\u793a\u7528\u7684\u9ed8\u8ba4\u503c"},{name:"componentProps",description:"\u7ec4\u4ef6\u7684 props"},{category:"\u6821\u9a8c",name:"required",type:"boolean",defaultValue:"false",description:"\u5b57\u6bb5\u662f\u5426\u5fc5\u586b"},{category:"\u6821\u9a8c",name:"requiredMessage",type:"string",defaultValue:'"\u8be5\u5b57\u6bb5\u4e3a\u5fc5\u586b\u9879"',description:"\u5fc5\u586b\u5b57\u6bb5\u7684\u9519\u8bef\u4fe1\u606f"},{category:"\u6821\u9a8c",name:"validator",type:"(value: any, field: Field) => string | Promise<string>",description:Object(d.b)(i.a.Fragment,null,"\u6821\u9a8c\u65b9\u6cd5\uff0c\u5728 onChange \u548c onBlur \u65f6\u88ab\u8c03\u7528",Object(d.b)("br",null),"\u8fd4\u56de\u5b57\u7b26\u4e32\u8fdb\u884c\u540c\u6b65\u6821\u9a8c\uff0c\u8fd4\u56de Promise \u8fdb\u884c\u5f02\u6b65\u6821\u9a8c\u3002")},{category:"\u6821\u9a8c",name:"blurValidator",type:"(value: any, field: Field) => string | Promise<string>",description:"\u6821\u9a8c\u65b9\u6cd5\uff0c\u4ec5\u5728 onBlur \u65f6\u88ab\u8c03\u7528"},{category:"\u6821\u9a8c",name:"changeValidator",type:"(value: any, field: Field) => string | Promise<string>",description:"\u6821\u9a8c\u65b9\u6cd5\uff0c\u4ec5\u5728 onChange \u65f6\u88ab\u8c03\u7528"},{name:"dataSource",description:"\u540c componentProps.dataSource"},{name:"disabled",description:"\u540c componentProps.disabled"},{name:"readOnly",description:"\u540c componentProps.readOnly"},{name:"status",description:Object(d.b)(i.a.Fragment,null,"\u540c componentProps.status",Object(d.b)("br",null),"\u9ed8\u8ba4\u4e3a undefined\uff1b\u5b57\u6bb5\u6821\u9a8c\u51fa\u9519\u65f6\uff0cstatus \u7684\u9ed8\u8ba4\u503c\u4e3a 'error'\uff1b",Object(d.b)("br",null)," \u8be5 prop \u4e00\u822c\u4e0d\u9700\u8981\u8fdb\u884c\u8bbe\u7f6e")},{category:"{\ud83d\ude80}",name:"value",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 value"},{category:"{\ud83d\ude80}",name:"onChange",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 onChange"},{category:"{\ud83d\ude80}",name:"onBlur",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 onBlur"},{category:"{\ud83d\ude80}",name:"renderPreview",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 \u9884\u89c8\u6001\u6e32\u67d3\u65b9\u6cd5"},{category:"{\ud83d\ude80}",name:"isEmpty",type:"(value: any) => boolean",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684\u5224\u65ad\u4e3a\u7a7a\u7684\u903b\u8f91"}],mdxType:"PropsTable"}),Object(d.b)("details",null,Object(d.b)("summary",null,"component \u5217\u8868"),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre"},'"switch"\n"checkbox"\n"checkboxGroup"\n"radioGroup"\n"datePicker"\n"dateRangePicker"\n"timePicker"\n"filePicker"\n"mediaPicker"\n"input"\n"textarea"\n"numberInput"\n"range"\n"select"\n"singleSelect"\n"multiSelect"\n"treeSelect"\n"singleTreeSelect"\n"multiTreeSelect"\n"testButtonGroup" (\u6d4b\u8bd5\u7528\u7684\u6309\u94ae\u7ec4\uff0c\u901a\u8fc7 componentProps.items=[\'A\', \'B\', \'C\'] \u8bbe\u7f6e\u9009\u9879)\n'))),Object(d.b)("div",{className:"admonition admonition-info alert alert--info"},Object(d.b)("div",{parentName:"div",className:"admonition-heading"},Object(d.b)("h5",{parentName:"div"},Object(d.b)("span",{parentName:"h5",className:"admonition-icon"},Object(d.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(d.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"@alife/hippo-xform")),Object(d.b)("div",{parentName:"div",className:"admonition-content"},Object(d.b)("p",{parentName:"div"},"\u6ce8\u610f @alife/hippo-xform \u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u7ec4\u4ef6\u7c7b\u578b\uff0c\u8be6\u89c1 ",Object(d.b)("a",{parentName:"p",href:"hippo-xform"},"hippo-xform"),"."))),Object(d.b)("h3",{id:"formsubmit"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.Submit")),Object(d.b)("p",null,"\u8868\u5355\u63d0\u4ea4",Object(d.b)("a",{parentName:"p",href:"../button"},"\u6309\u94ae"),"\uff0c\u70b9\u51fb\u65f6..."),Object(d.b)("ul",null,Object(d.b)("li",{parentName:"ul"},"\u89e6\u53d1\u6240\u6709\u5b57\u6bb5\u7684\u6821\u9a8c"),Object(d.b)("li",{parentName:"ul"},"\u5982\u679c\u6821\u9a8c\u901a\u8fc7\uff0c\u5219\u8c03\u7528 ",Object(d.b)("inlineCode",{parentName:"li"},"onSubmit(submitValues, model)")),Object(d.b)("li",{parentName:"ul"},"\u5982\u679c\u53d1\u751f\u9519\u8bef\uff0c\u5219\u8c03\u7528 ",Object(d.b)("inlineCode",{parentName:"li"},"onSubmit(erros, model)"))),Object(d.b)("h3",{id:"formreset"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.Reset")),Object(d.b)("p",null,"\u8868\u5355\u91cd\u7f6e",Object(d.b)("a",{parentName:"p",href:"../button"},"\u6309\u94ae"),"\uff0c\u70b9\u51fb\u65f6\u5c06\u6e05\u7a7a values \u4e0e\u6821\u9a8c\u9519\u8bef\uff0c\u7136\u540e\u89e6\u53d1 ",Object(d.b)("inlineCode",{parentName:"p"},"onReset"),"\u3002"),Object(d.b)("h3",{id:"formeffect"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.Effect")),Object(d.b)("p",null,Object(d.b)("inlineCode",{parentName:"p"},"<Form.Effect watch={watch} effect={effect} />")),Object(d.b)("p",null,"\u521b\u5efa\u8868\u5355\u8054\u52a8\uff0c\u6bcf\u5f53 watch \u5bf9\u5e94\u7684\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0ceffect \u90fd\u4f1a\u88ab\u8c03\u7528\u3002"),Object(d.b)("p",null,"effect \u88ab\u8c03\u7528\u65f6\uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u4e24\u4e2a\u53c2\u6570\uff1a"),Object(d.b)("ul",null,Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"value: any")," \u65b0\u7684\u503c"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"detail: { prev: any, model: IModel, next: any }")," \u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542b\u65e7\u7684\u503c\uff0c\u65b0\u7684\u503c\uff0c\u4ee5\u53ca\u5f53\u524d\u6a21\u578b")),Object(d.b)("p",null,"watch \u652f\u6301\u4ee5\u4e0b\u7528\u6cd5\uff1a"),Object(d.b)("ul",null,Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"string")," \u76d1\u542c\u5bf9\u5e94\u6570\u636e\u7d22\u5f15\u5904 value \u53d8\u5316\uff08\u6ce8\u610f\u5d4c\u5957\u5b57\u6bb5\u7684\u53d8\u66f4\u4e5f\u4f1a\u89e6\u53d1 effect\uff09"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"Feild")," \u76d1\u542c\u5bf9\u5e94 Field \u7684 value \u53d8\u5316"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"Array<string | Field>")," \u76d1\u542c\u591a\u4e2a\u300c\u6570\u636e\u7d22\u5f15\u300d\u6216\u300c\u5b57\u6bb5\u300d\u7684 value \u53d8\u5316\uff1beffect \u88ab\u8c03\u7528\u65f6\uff0c\u5c06\u7528\u4e00\u4e2a\u6570\u7ec4\u5305\u88f9\u8fd9\u4e9b\u6570\u636e\u7d22\u5f15\u6216\u5b57\u6bb5\u7684\u503c"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"() => any")," \u81ea\u5b9a\u4e49\u51fd\u6570\u7528\u6cd5\uff0c\u7528\u6cd5\u540c ",Object(d.b)("a",{parentName:"li",href:"https://mobx.js.org/api.html#reaction"},"mobx reaction")," \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570")),Object(d.b)("h3",{id:"formarray"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.Array")),Object(d.b)("p",null,Object(d.b)("a",{parentName:"p",href:"advanced#formarray"},"{\ud83d\ude80} \u7528\u6cd5"),"\u3002 \u4ee5\u5f53\u524d model \u4e3a\u57fa\u7840\uff0c\u4e3a\u5176\u5b50\u8282\u70b9\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684 sub model\uff0c\u5e76\u5c06\u5b50\u8282\u70b9\u4e2d\u7684\u8868\u5355\u503c\u6536\u96c6\u5230\u5f53\u524d model \u4e2d ",Object(d.b)("inlineCode",{parentName:"p"},"{name}.{itemIndex}")," \u5bf9\u5e94\u7684\u4f4d\u7f6e\u3002"),Object(d.b)(p,{props:[{name:"name",type:"string",required:!0,description:"\u5b57\u6bb5\u7d22\u5f15"},{name:"layout",type:"(input: XFormArrayLayoutInput) => React.ReactElement",required:!0,description:"\u6570\u7ec4\u5e03\u5c40\uff0c\u63a7\u5236\u8868\u5355\u5982\u4f55\u5bf9\u6570\u7ec4\u8fdb\u884c\u5e03\u5c40\uff0c\u5305\u62ec\u6570\u7ec4\u4e2d\u6bcf\u4e00\u4e2a\u5143\u7d20\u7684\u5e03\u5c40 \u4ee5\u53ca \u76f8\u5173\u7684\u64cd\u4f5c\u6309\u94ae\uff08\u6dfb\u52a0\u3001\u5220\u9664\u3001\u4e0a\u79fb\u3001\u4e0b\u79fb\u7b49\uff09"},{name:"itemFactory",type:"(arrayModel: SubModel) => any",defaultValue:"() => ({})",description:"\u6570\u7ec4\u4e2d\u65b0\u589e\u5143\u7d20\u7684\u521d\u59cb\u503c, \u9ed8\u8ba4\u4e3a\u4e00\u4e2a\u603b\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7a7a\u5bf9\u8c61\u7684\u51fd\u6570"}],mdxType:"PropsTable"}),Object(d.b)("h3",{id:"formobject"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.Object")),Object(d.b)("p",null,Object(d.b)("a",{parentName:"p",href:"advanced#formobject"},"{\ud83d\ude80} \u7528\u6cd5"),"\u3002 \u4ee5\u5f53\u524d model \u4e3a\u57fa\u7840\uff0c\u4e3a\u5176\u5b50\u8282\u70b9\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684 sub model\uff0c\u5e76\u5c06\u5b50\u8282\u70b9\u4e2d\u7684\u8868\u5355\u503c\u6536\u96c6\u5230\u5f53\u524d model \u4e2d name \u5bf9\u5e94\u7684\u4f4d\u7f6e"),Object(d.b)(p,{props:[{name:"name",type:"string",required:!0,description:"\u5b57\u6bb5\u7d22\u5f15"}],mdxType:"PropsTable"}),Object(d.b)("h3",{id:"formitemgroup"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.ItemGroup")),Object(d.b)("p",null,"\u5e03\u5c40\u7ec4\u4ef6\uff0c\u53ef\u5c06\u591a\u4e2a FormItem \u5206\u4e3a\u4e00\u7ec4\u3002"),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-jsx"},'<Form.ItemGroup label="\u5206\u7ec4\u540d\u79f0" inline labelWidth={50} controlWidth={200}>\n  <FormItem component="input" />\n  <FormItem component="select" />\n</Form.ItemGroup>\n')),Object(d.b)(p,{props:[{name:"label",type:"ReactNode",description:"\u5206\u7ec4\u7684\u6807\u7b7e"},{name:"inline",type:"boolean",description:"\u662f\u5426\u4f7f\u7528\u5185\u8054\u5e03\u5c40"},{name:"labelWidth",type:"number | string",description:"\u5206\u7ec4\u5185 FormItem \u7684\u6807\u7b7e\u5bbd\u5ea6"},{name:"controlWidth",type:"number | string",description:"\u5206\u7ec4\u5185 FormItem \u7684\u63a7\u4ef6\u5bbd\u5ea6"},{name:"style",type:"React.CSSProperties",description:"\u5185\u8054\u6837\u5f0f"},{name:"className",type:"string",description:"className"}],mdxType:"PropsTable"}),Object(d.b)("h3",{id:"formitemview"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.ItemView")),Object(d.b)("p",null,"\u8868\u5355\u9879\u89c6\u56fe\u7ec4\u4ef6\u3002\u901a\u8fc7 ",Object(d.b)("inlineCode",{parentName:"p"},"Form.ItemView")," \u53ef\u4ee5\u8ba9\u81ea\u5b9a\u4e49\u7684\u7ec4\u4ef6\u548c\u666e\u901a FormItem \u4f7f\u7528\u76f8\u540c\u7684\u5e03\u5c40\u3002"),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-jsx"},'// \u666e\u901a FormItem\n<FormItem label="\u6807\u7b7e\u6807\u7b7e" component="select" />\n\n// \u5229\u7528 Form.ItemView \u8ba9\u81ea\u5b9a\u4e49\u5185\u5bb9\u4f7f\u7528\u4e0e FormItem \u76f8\u540c\u7684\u5e03\u5c40\n<Form.ItemView label="\u6807\u7b7e\u6807\u7b7e">\n  <MyCustomSelect value={...} onChange={...} />\n</Form.ItemView>\n')),Object(d.b)(p,{props:[{name:"label",type:"ReactNode",description:"\u6807\u7b7e"},{name:"help",type:"boolean",description:"\u5e2e\u52a9\u6587\u672c"},{name:"tip",type:"boolean",description:"\u63d0\u793a\u4fe1\u606f"},{name:"required",type:"boolean",description:"\u662f\u5426\u5c55\u793a\u300c*\u300d"},{name:"error",type:"boolean",description:"\u9519\u8bef\u4fe1\u606f"},{name:"style",type:"React.CSSProperties",description:"\u5185\u8054\u6837\u5f0f"},{name:"className",type:"string",description:"className"}],mdxType:"PropsTable"}),Object(d.b)("h2",{id:"contexts--hooks"},"contexts & hooks"),Object(d.b)("h3",{id:"usemodel"},Object(d.b)("inlineCode",{parentName:"h3"},"useModel")),Object(d.b)("p",null,"\u83b7\u53d6\u5f53\u524d\u5c42\u7ea7\u7684\u6a21\u578b\u5bf9\u8c61\u3002"),Object(d.b)("h3",{id:"formmodelconsumer"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.ModelConsumer")),Object(d.b)("p",null,"ModelContext \u7684 ",Object(d.b)("a",{parentName:"p",href:"https://zh-hans.reactjs.org/docs/context.html#contextconsumer"},Object(d.b)("inlineCode",{parentName:"a"},"Consumer")),"\uff0c\u53ef\u7528\u4e8e\u8ba2\u9605\u5f53\u524d\u5c42\u7ea7\u7684 model\u3002"),Object(d.b)("p",null,"\u8be5\u7ec4\u4ef6\u5df2\u7ecf\u88ab\u5305\u88f9\u5728 ",Object(d.b)("a",{parentName:"p",href:"https://mobx.js.org/react-integration.html"},"observer")," \u4e2d\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5728 ",Object(d.b)("a",{parentName:"p",href:"https://zh-hans.reactjs.org/docs/render-props.html"},"render prop")," \u4e2d\u8bfb\u53d6 mobx observable \u5bf9\u8c61\u3002"),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-jsx"},"<Form.ModelConsumer>\n  {(model) => {\n    const person = model.getSubModel('person');\n    return <span>\u59d3\u540d\uff1a {person.getValue('name')}</span>;\n  }}\n</Form.ModelConsumer>\n")),Object(d.b)("h3",{id:"formmodelprovider"},Object(d.b)("inlineCode",{parentName:"h3"},"Form.ModelProvider")),Object(d.b)("p",null,"{\ud83d\ude80} \u4e3b\u52a8\u5728 react context \u4e2d\u8bbe\u7f6e\u6a21\u578b\u5bf9\u8c61\u3002"),Object(d.b)("p",null,Object(d.b)("inlineCode",{parentName:"p"},"<Form.ModelProvider value={model}>{children}</Form.ModelProvider>")),Object(d.b)("h3",{id:"useformenv"},Object(d.b)("inlineCode",{parentName:"h3"},"useFormEnv")),Object(d.b)("p",null,"{\ud83d\ude80} \u83b7\u53d6\u5f53\u524d\u5c42\u7ea7\u7684\u73af\u5883\u53d8\u91cf\u3002"),Object(d.b)("h3",{id:"formenvprovider"},Object(d.b)("inlineCode",{parentName:"h3"},"FormEnvProvider")),Object(d.b)("p",null,"{\ud83d\ude80} \u5728\u6307\u5b9a\u7684\u5c42\u7ea7\u8986\u76d6\u8868\u5355\u7684\u73af\u5883\u53d8\u91cf\u3002"),Object(d.b)("p",null,Object(d.b)("inlineCode",{parentName:"p"},"<Form />")," \u6e32\u67d3\u65f6\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u5355\u72ec\u4f7f\u7528 ",Object(d.b)("inlineCode",{parentName:"p"},"<FormEnvProvider />"),"\u3002 \u76ee\u524d\u9ed8\u8ba4\u652f\u6301\u8bbe\u7f6e ",Object(d.b)("inlineCode",{parentName:"p"},"isPreview"),"\uff1a"),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-jsx"},'<Form>\n  <FormItem name="aaa" />\n  <FormItem name="bbb" />\n\n  <FormEnvProvider isPreview>\n    {/* ccc \u548c ddd \u603b\u662f\u4f1a\u5904\u4e8e\u9884\u89c8\u6001 */}\n    <FormItem name="ccc" />\n    <FormItem name="ddd" />\n  </FormEnvProvider>\n</Form>\n')),Object(d.b)("p",null,"FormEnvProvider \u63a5\u53d7\u4efb\u610f\u7684 props\uff0c\u8bbe\u7f6e\u540e\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(d.b)("inlineCode",{parentName:"p"},"useFormEnv()")," \u83b7\u53d6\u5230\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf\uff08\u6ce8\u610f TypeScript \u7c7b\u578b\u4fe1\u606f\u8981\u8fdb\u884c\u76f8\u5e94\u7684\u62d3\u5c55\uff09\u3002"),Object(d.b)("p",null,"\u8bbe\u7f6e FormEnvProvider \u65f6\uff0c\u65b0\u7684\u73af\u5883\u53d8\u91cf\u4f1a\u4e0e\u4e0a\u5c42\u7684\u73af\u5883\u53d8\u91cf\u8fdb\u884c\u5408\u5e76\uff0c\u7136\u540e\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002"),Object(d.b)("h2",{id:"\u6570\u7ec4\u5e03\u5c40-"},"\u6570\u7ec4\u5e03\u5c40 {\ud83d\ude80}"),Object(d.b)("p",null,"\u9700\u8981\u914d\u5408 ",Object(d.b)("inlineCode",{parentName:"p"},"Form.Array")," \u4f7f\u7528"),Object(d.b)("div",{className:"admonition admonition-info alert alert--info"},Object(d.b)("div",{parentName:"div",className:"admonition-heading"},Object(d.b)("h5",{parentName:"div"},Object(d.b)("span",{parentName:"h5",className:"admonition-icon"},Object(d.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(d.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"@alife/hippo-xform")),Object(d.b)("div",{parentName:"div",className:"admonition-content"},Object(d.b)("p",{parentName:"div"},"\u6ce8\u610f\u56e0\u4e3a\u5e95\u5c42\u7ec4\u4ef6\u5e93\u4e0d\u540c\uff0c@alife/hippo-xform \u63d0\u4f9b\u4e86\u4e0d\u540c\u7684 layout \u53c2\u6570\u3002\u8be6\u89c1 ",Object(d.b)("a",{parentName:"p",href:"hippo-xform"},"hippo-xform"),"."))),Object(d.b)("h3",{id:"arraycard"},Object(d.b)("inlineCode",{parentName:"h3"},"arrayCard")),Object(d.b)("p",null,"{\ud83d\ude80} \u5361\u7247\u5e03\u5c40"),Object(d.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(d.b)("div",{parentName:"div",className:"admonition-heading"},Object(d.b)("h5",{parentName:"div"},Object(d.b)("span",{parentName:"h5",className:"admonition-icon"},Object(d.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(d.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(d.b)("div",{parentName:"div",className:"admonition-content"},Object(d.b)("p",{parentName:"div"},"\u5361\u7247\u5e03\u5c40 \u4ecd\u5728\u5b8c\u5584\u4e2d\u3002"))),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-tsx"},"interface ArrayCardOptions {\n  title?: string;\n  showItemCount?: boolean;\n  showItemOrder?: boolean;\n  style?: React.CSSProperties;\n}\n")),Object(d.b)("h3",{id:"arraytable"},Object(d.b)("inlineCode",{parentName:"h3"},"arrayTable")),Object(d.b)("p",null,"{\ud83d\ude80} \u8868\u683c\u5e03\u5c40"),Object(d.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(d.b)("div",{parentName:"div",className:"admonition-heading"},Object(d.b)("h5",{parentName:"div"},Object(d.b)("span",{parentName:"h5",className:"admonition-icon"},Object(d.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(d.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(d.b)("div",{parentName:"div",className:"admonition-content"},Object(d.b)("p",{parentName:"div"},"\u8868\u683c\u5e03\u5c40 \u4ecd\u5728\u5b8c\u5584\u4e2d\u3002"))),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-tsx"},"interface ArrayTableOptions {\n  defaultColumnWidth?: number;\n  operationColumn?: Partial<Column>;\n  orderColumn?: Partial<Column>;\n  style?: React.CSSProperties;\n  className?: string;\n}\n")),Object(d.b)("h2",{id:"\u6a21\u578b\u4e0e\u5de5\u5177"},"\u6a21\u578b\u4e0e\u5de5\u5177"),Object(d.b)("h3",{id:"imodel"},Object(d.b)("inlineCode",{parentName:"h3"},"IModel")),Object(d.b)("p",null,"IModel \u8868\u793a\u300c\u4e00\u4e2a\u5bf9\u8c61\u6216\u6570\u7ec4\u5bf9\u5e94\u7684\u8868\u5355\u6a21\u578b\u90e8\u5206\u300d\u3002 IModel \u662f\u4e00\u4e2a interface\uff0c ",Object(d.b)("inlineCode",{parentName:"p"},"FormModel"),"\uff08\u6839\u8282\u70b9\uff09\u548c ",Object(d.b)("inlineCode",{parentName:"p"},"SubModel"),"\uff08\u5b50\u8282\u70b9\uff09 \u5b9e\u73b0\u4e86\u8be5 interface."),Object(d.b)("ul",null,Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.getSubModel(name): SubModel")," \u83b7\u53d6\u4e00\u4e2a\u5b50\u6a21\u578b"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.getSubArray(name): SubModel")," \u83b7\u53d6\u4e00\u4e2a\u5b50\u6a21\u578b\uff0c\u4f46\u83b7\u53d6\u7684\u5b50\u6a21\u578b\u7684\u6570\u636e\u683c\u5f0f\u4e3a\u6570\u7ec4"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.getField(name): Field")," \u83b7\u53d6 name \u5bf9\u5e94\u7684\u5b57\u6bb5\u5bf9\u8c61"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.root: FormModel")," \u6307\u5411 FormModel"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.path: string[]")," \u4ece FormModel \u5230\u5f53\u524d model \u7684\u6570\u636e\u8def\u5f84"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.parent: IModel")," \u6307\u5411\u4e0a\u4e00\u7ea7\u7684 model"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.values")," \u6a21\u578b\u4e0a\u7684\u6570\u636e\uff0c\u8fd9\u662f\u4e00\u4e2a mobx computed \u5b57\u6bb5"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.getValue(name, defaultValue)")," \u4ee5\u5f53\u524d\u6a21\u578b\u4e3a\u8d77\u59cb\u8def\u5f84\uff0c\u8bfb\u53d6 name \u5904\u7684\u6570\u636e"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.setValue(name, value)")," \u4ee5\u5f53\u524d\u6a21\u578b\u4e3a\u8d77\u59cb\u8def\u5f84\uff0c\u4fee\u6539 name \u5904\u7684\u6570\u636e"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.state")," \u6a21\u578b\u7ea7\u522b\u7684\u72b6\u6001\uff0c\u8fd9\u662f\u4e00\u4e2a mobx observable \u5bf9\u8c61\uff0c\u9ed8\u8ba4\u4e3a ",Object(d.b)("inlineCode",{parentName:"li"},"{}"),"\uff0c\u4e00\u822c\u7528\u6765\u7ba1\u7406\u4e00\u4e9b\u8868\u5355\u7684 UI \u72b6\u6001\u3002"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"model.id: string")," \u6a21\u578b\u5728\u6240\u5c5e FormModel \u5185\u7684\u552f\u4e00 id")),Object(d.b)("h3",{id:"field"},Object(d.b)("inlineCode",{parentName:"h3"},"Field")),Object(d.b)("p",null,"Field \u7528\u6765\u8868\u793a\u300c\u4e00\u4e2a \u89c6\u56fe\u63a7\u4ef6 \u5bf9\u5e94\u7684\u8868\u5355\u6a21\u578b\u90e8\u5206\u300d\u3002"),Object(d.b)("ul",null,Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.value")," \u8bfb\u53d6\u6216\u8bbe\u7f6e\u5b57\u6bb5\u7684\u503c\uff0c\u8fd9\u662f\u4e00\u4e2a mobx computed \u5b57\u6bb5"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.state")," \u5b57\u6bb5\u72b6\u6001\uff0c\u8fd9\u662f\u4e00\u4e2a mobx observable \u5bf9\u8c61\uff0c\u9ed8\u8ba4\u4e3a ",Object(d.b)("inlineCode",{parentName:"li"},"{}"),"\u3002",Object(d.b)("ul",{parentName:"li"},Object(d.b)("li",{parentName:"ul"},"\u76ee\u524d\uff0c\u6211\u4eec\u7ea6\u5b9a\u4e86\u4ee5\u4e0b\u5c5e\u6027\u7684\u542b\u4e49\uff1a",Object(d.b)("ul",{parentName:"li"},Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.state.error")," \u8be5\u5b57\u6bb5\u4e0a\u7684\u9519\u8bef\u6d88\u606f\uff0c\u5f53 error \u5b57\u6bb5\u6709\u503c\u65f6\uff0c\u9875\u9762\u4e2d\u5c31\u4f1a\u5c55\u793a\u5bf9\u5e94\u7684\u51fa\u9519\u63d0\u793a"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.state.validating")," \u662f\u5426\u6b63\u5728\u6267\u884c\u6821\u9a8c"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.state.cancelValidation()")," \u53d6\u6d88\u4e0a\u6b21\u6821\u9a8c\u7684\u65b9\u6cd5"))))),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.config")," \u5b57\u6bb5\u914d\u7f6e\u4fe1\u606f\uff0c\u53cd\u6620\u8be5\u5b57\u6bb5\u5bf9\u5e94\u7684\u63a7\u4ef6\u6700\u8fd1\u4e00\u6b21\u88ab\u6e32\u67d3\u65f6 React Element \u4e0a\u7684 props"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.id: string")," \u5b57\u6bb5\u5728\u6240\u5c5e\u8868\u5355\u5185\u7684\u552f\u4e00 id"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.isMounted: boolean")," \u5bf9\u5e94\u7684\u63a7\u4ef6\u662f\u5426\u6e32\u67d3\u5728\u89c6\u56fe\u4e2d"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.path: string[]")," \u4ece FormModel \u5230\u8be5\u5b57\u6bb5\u7684\u5b8c\u6574\u8def\u5f84"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.parent: IModel")," \u6307\u5411\u4e0a\u4e00\u7ea7\u7684 model"),Object(d.b)("li",{parentName:"ul"},Object(d.b)("inlineCode",{parentName:"li"},"field.getFork(forkName)")," \u83b7\u53d6 field \u7684 fork\uff0c\u8be6\u89c1 ",Object(d.b)("a",{parentName:"li",href:"advanced#"})," \u7528\u4e8e\u5728\u89c6\u56fe\u4e2d\u591a\u6b21\u6e32\u67d3\u300c\u540c\u4e00\u4e2a\u6570\u636e\u7d22\u5f15\u300d")),Object(d.b)("h3",{id:"modelutilsclearerror"},Object(d.b)("inlineCode",{parentName:"h3"},"modelUtils.clearError")),Object(d.b)("p",null,Object(d.b)("inlineCode",{parentName:"p"},"modelUtils.clearError(model : IModel): void")),Object(d.b)("p",null,"mobx action. \u6e05\u9664 model \u4e0a\u6240\u6709\u7684\u9519\u8bef\u4fe1\u606f"),Object(d.b)("h3",{id:"modelutilsvalidateall"},Object(d.b)("inlineCode",{parentName:"h3"},"modelUtils.validateAll")),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre"},"modelUtils.validateAll(\n  model: IModel,\n  trigger: '*' | 'blur' | 'change' = '*'\n): Promise<{ hasError: boolean, errors: any }>\n")),Object(d.b)("p",null,"mobx action. \u6267\u884c model \u4e0a\u6240\u6709\u7684\u6821\u9a8c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a Promise \u8868\u793a\u6240\u6709\u7684\u62a5\u9519\u4fe1\u606f\uff1btrigger \u7528\u4e8e\u6307\u5b9a\u6240\u8981\u6267\u884c\u7684 validator\uff0c\u9ed8\u8ba4\u4e3a ",Object(d.b)("inlineCode",{parentName:"p"},"'*'"),"\u3002"),Object(d.b)("h3",{id:"modelutilssubmit"},Object(d.b)("inlineCode",{parentName:"h3"},"modelUtils.submit")),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre"},"modelUtils.submit(\n  model: IModel,\n  options: {\n    valueFilter: 'mounted' | 'all',\n    onError: Function,\n    onSubmit: Function,\n  }\n): void\n")),Object(d.b)("p",null,"mobx action. \u4e3b\u52a8\u89e6\u53d1 ",Object(d.b)("a",{parentName:"p",href:"#formsubmit"},Object(d.b)("inlineCode",{parentName:"a"},"Form.Submit"))," \u88ab\u70b9\u51fb\u7684\u6d41\u7a0b\u3002 options.valueFilter \u53ef\u4ee5\u63a7\u5236 submit \u56de\u586b\u54ea\u4e9b\u503c\u3002"),Object(d.b)("h3",{id:"modelutilsreset"},Object(d.b)("inlineCode",{parentName:"h3"},"modelUtils.reset")),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre"},"modelUtils.reset(\n  model: IModel,\n  options: {\n    onReset: Function,\n  }\n): void\n")),Object(d.b)("p",null,"mobx action. \u4e3b\u52a8\u89e6\u53d1 ",Object(d.b)("a",{parentName:"p",href:"#formreset"},Object(d.b)("inlineCode",{parentName:"a"},"Form.Reset"))," \u88ab\u70b9\u51fb\u7684\u6d41\u7a0b\u3002"),Object(d.b)("h3",{id:"fieldutilsvalidate"},Object(d.b)("inlineCode",{parentName:"h3"},"fieldUtils.validate")),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre"},"fieldUtils.validate(\n  field: Field,\n  trigger: '*' | 'blur' | 'change' = '*',\n): Promise<string>\n")),Object(d.b)("p",null,"mobx action. \u6267\u884c\u6307\u5b9a\u5b57\u6bb5\u4e0a\u7684\u6821\u9a8c\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u8868\u793a\u62a5\u9519\u4fe1\u606f\uff1btrigger \u7528\u4e8e\u6307\u5b9a\u6240\u8981\u6267\u884c\u7684 validator\uff0c\u9ed8\u8ba4\u4e3a ",Object(d.b)("inlineCode",{parentName:"p"},"'*'"),"\u3002"),Object(d.b)("h3",{id:"fieldutilshandleblur"},Object(d.b)("inlineCode",{parentName:"h3"},"fieldUtils.handleBlur")),Object(d.b)("p",null,"{\ud83d\ude80} ",Object(d.b)("inlineCode",{parentName:"p"},"fieldUtils.handleBlur(field: Field): void")),Object(d.b)("p",null,"mobx action. blur \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u4e00\u822c\u5728\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u8868\u5355\u9879\u7ec4\u4ef6\u65f6\u4f7f\u7528\u3002"),Object(d.b)("h3",{id:"fieldutilshandlechange"},Object(d.b)("inlineCode",{parentName:"h3"},"fieldUtils.handleChange")),Object(d.b)("p",null,"{\ud83d\ude80} ",Object(d.b)("inlineCode",{parentName:"p"},"fieldUtils.handleChange(field: Field, nextValue: any): void")),Object(d.b)("p",null,"mobx action. change \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u4e00\u822c\u5728\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u8868\u5355\u9879\u7ec4\u4ef6\u65f6\u4f7f\u7528\u3002"),Object(d.b)("h3",{id:"createformitem"},Object(d.b)("inlineCode",{parentName:"h3"},"createFormItem")),Object(d.b)("p",null,"{\ud83d\ude80} ",Object(d.b)("inlineCode",{parentName:"p"},"createFormItem(options: FormItemCreationOptions): FormItem")),Object(d.b)("p",null,"\u521b\u5efa\u8868\u5355\u9879\u7ec4\u4ef6\u3002"),Object(d.b)("p",null,Object(d.b)("strong",{parentName:"p"},"\u7528\u6cd5\u793a\u4f8b")),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-jsx"},'// \u81ea\u5b9a\u4e49\u7ec4\u4ef6\nconst CitySelect = ({ value, onChange, onBlur }) => {\n  return (\n    <div>\n      <p>\u8bf7\u9009\u62e9\u5c45\u4f4f\u57ce\u5e02\uff1a</p>\n      <Select value={value} onChange={onChange} onBlur={onBlur} dataSource={CITY_LIST} />\n    </div>\n  );\n};\n\n// \u4f7f\u7528 createFormItem \u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49 FormItem\nconst CustomFormItem = createFormItem({\n  name: \'myCitySelect\',\n  component: CitySelect,\n  isEmpty(value) {\n    return value == null;\n  },\n  fallbackValue: null,\n});\n\n// \u50cf\u666e\u901a FormItem \u4e00\u6837\u4f7f\u7528 CustomFormItem\n<Form>\n  <FormItem component="input" label="\u59d3\u540d" name="name" validator={isValidateName} />\n  <CustomFormItem label="\u57ce\u5e02" name="city" validator={isValidCity} />\n</Form>;\n')),Object(d.b)("p",null,Object(d.b)("strong",{parentName:"p"},"\u7c7b\u578b\u4fe1\u606f\uff1a")),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-tsx"},"export interface FormItemCreationOptions {\n  /** \u540d\u79f0 */\n  name: string;\n\n  /** \u63a7\u4ef6\u5bf9\u5e94\u7684 React \u7ec4\u4ef6\uff0c\u4f8b\u5982 `<FormItem component=\"select\" />` \u5bf9\u5e94 `Select` \u7ec4\u4ef6. */\n  component?: React.ComponentType<FormItemComponentProps>;\n\n  /** \u63a7\u4ef6\u6e32\u67d3\u65b9\u6cd5\uff0c\u4e0e component \u53c2\u6570\u4e8c\u9009\u4e00\uff0c\u4f18\u5148\u7ea7\u9ad8\u4e8e component */\n  render?(arg: FormItemComponentProps): React.ReactElement;\n\n  /** \u7ec4\u4ef6\u503c\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a `'value'` */\n  valuePropName?: string;\n\n  /** \u7ec4\u4ef6\u72b6\u6001\u503c\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a `'status'` */\n  statusPropName?: string;\n\n  /** \u9884\u89c8\u6001\u4e0b\u7ec4\u4ef6\u7684\u6e32\u67d3\u65b9\u6cd5\u3002\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u65b9\u6cd5\uff0c\u9884\u89c8\u6001\u4e0b\u5c06\u4f7f\u7528 render/component \u4f5c\u4e3a\u540e\u5907\u65b9\u6848. */\n  renderPreview?(props: FormItemComponentProps): React.ReactNode;\n\n  /** \u5f53\u6a21\u578b\u4e2d\u7684\u5b57\u6bb5\u503c\u4e3a\u7a7a\uff08undefined\uff09\u65f6\uff0c\u6e32\u67d3\u63a7\u4ef6\u6240\u4f7f\u7528\u7684\u503c */\n  fallbackValue: any;\n\n  /** \u7ec4\u4ef6\u7c7b\u578b\u9ed8\u8ba4\u7684\u7a7a\u503c\u5224\u65ad\u65b9\u6cd5 */\n  isEmpty(value: any): boolean;\n}\n")),Object(d.b)("h3",{id:"formitemregister"},Object(d.b)("inlineCode",{parentName:"h3"},"FormItem.register")),Object(d.b)("p",null,"{\ud83d\ude80} ",Object(d.b)("inlineCode",{parentName:"p"},"FormItem.register(options: FormItemCreationOptions): void")),Object(d.b)("p",null,"\u5411 FormItem \u4e2d\u6ce8\u518c\u65b0\u7684\u7ec4\u4ef6\u3002 options \u53c2\u6570\u7c7b\u578b\u89c1\u4e0a\u65b9\u3002 ",Object(d.b)("inlineCode",{parentName:"p"},"options.name")," \u4f1a\u4e0e\u5df2\u6709\u7684\u7ec4\u4ef6\u5171\u4eab\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\uff0c\u6ce8\u610f\u907f\u514d\u51b2\u7a81\u3002"),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-jsx"},'// \u81ea\u5b9a\u4e49\u7ec4\u4ef6\nconst CitySelect = ({ value, onChange, onBlur }) => {\n  return (\n    <div>\n      <p>\u8bf7\u9009\u62e9\u5c45\u4f4f\u57ce\u5e02\uff1a</p>\n      <Select value={value} onChange={onChange} onBlur={onBlur} dataSource={CITY_LIST} />\n    </div>\n  );\n};\n\n// \u6ce8\u518c\nFormItem.register({\n  name: \'myCitySelect\',\n  component: CitySelect,\n  isEmpty(value) {\n    return value == null;\n  },\n  fallbackValue: null,\n});\n\n// \u4f7f\u7528\n<FormItem component="myCitySelect" name="city" label="\u57ce\u5e02" />;\n')),Object(d.b)("h3",{id:"makeasyncvalue"},Object(d.b)("inlineCode",{parentName:"h3"},"makeAsyncValue")),Object(d.b)("p",null,Object(d.b)("inlineCode",{parentName:"p"},"makeAsyncValue<T>(fetcher: () => Promise<T>, initValue?: T): AsyncValue<T>")),Object(d.b)("p",null,"\u57fa\u4e8e ",Object(d.b)("inlineCode",{parentName:"p"},"fetcher")," \u521b\u5efa\u5b9a\u4e49\u4e00\u4e2a AsyncValue\uff0c\u7528\u4e8e\u58f0\u660e\u5f0f\u5730\u5b9a\u4e49\u5f02\u6b65\u6570\u636e\u6e90\u3002"),Object(d.b)("p",null,"\u5f53 ",Object(d.b)("inlineCode",{parentName:"p"},"asyncValue.current")," \u6216 ",Object(d.b)("inlineCode",{parentName:"p"},"asyncValue.status")," \u6216 ",Object(d.b)("inlineCode",{parentName:"p"},"asyncValue.error")," \u88ab\u8ba2\u9605\u65f6\uff0c fetcher \u5c06\u88ab\u9996\u6b21\u8c03\u7528\uff0c \u5176\u8fd4\u56de\u7ed3\u679c\u5c06\u4f5c\u4e3a ",Object(d.b)("inlineCode",{parentName:"p"},"asyncValue.current")," \u7684\u503c\u3002"),Object(d.b)("p",null,"\u8c03\u7528 fetcher \u7684\u8fc7\u7a0b\u4e2d\u4f1a\u8fdb\u884c\u4f9d\u8d56\u6536\u96c6\uff0c\u6bcf\u5f53\u8fd9\u4e9b\u4f9d\u8d56\u7684\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0cfetcher \u90fd\u4f1a\u88ab\u91cd\u65b0\u89e6\u53d1\u3002"),Object(d.b)("pre",null,Object(d.b)("code",{parentName:"pre",className:"language-tsx"},"export interface AsyncValue<T> {\n  /** \u72b6\u6001\uff0c\u53ef\u4e3a\u4ee5\u4e0b\u503c 'loading' | 'ready' | 'error' */\n  readonly status: AsyncValueStatus;\n\n  /** \u5f53\u524d\u503c */\n  readonly current: T;\n\n  /** \u9519\u8bef */\n  readonly error?: any;\n\n  /** \u9500\u6bc1 AsyncValue */\n  dispose(): void;\n\n  /** \u91cd\u65b0\u89e6\u53d1 fetcher */\n  refresh(): void;\n}\n")),Object(d.b)("details",null,Object(d.b)("summary",null,"\u5177\u4f53\u89c4\u5219\uff1a"),Object(d.b)("ol",null,Object(d.b)("li",{parentName:"ol"},"\u6bcf\u6b21 fetcher \u88ab\u8c03\u7528\u65f6\uff0c status \u5c31\u4f1a\u53d8\u4e3a loading\uff0c\u5e76\u7b49\u5f85 fetcher \u8fd4\u56de\u7684 Promise resolve \u6216 reject\uff1b"),Object(d.b)("li",{parentName:"ol"},"\u5f53 fetcher \u8fd4\u56de\u7684 Promise resolve \u65f6\uff0c status \u53d8\u4e3a ready\uff0c\u540c\u65f6 current \u5b57\u6bb5\u53d8\u4e3a\u6700\u65b0\u7684\u503c\uff1b"),Object(d.b)("li",{parentName:"ol"},"\u5f53 fetcher \u8fd4\u56de\u7684 Promise reject \u65f6\uff0c status \u53d8\u4e3a error\uff0c\u540c\u65f6 error \u5b57\u6bb5\u8bb0\u5f55\u672c\u6b21\u9519\u8bef\uff1b"),Object(d.b)("li",{parentName:"ol"},"\u5f53 fetcher \u8fd4\u56de\u7684 Promise \u4ecd\u5904\u4e8e pending \u72b6\u6001\u65f6\uff0c\u82e5 fetcher \u518d\u6b21\u88ab\u8c03\u7528\uff0c\u5df2\u6709\u7684 promise \u5c06\u88ab\u5ffd\u7565\uff0c\u5c06\u4f1a\u56de\u5230 1."))))}f.isMDXComponent=!0}}]);