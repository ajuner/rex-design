(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{144:function(e,n,i){"use strict";i.r(n),i.d(n,"frontMatter",(function(){return M})),i.d(n,"metadata",(function(){return _})),i.d(n,"toc",(function(){return V})),i.d(n,"default",(function(){return R}));var r=i(3),a=i(8),s=i(0),t=i.n(s),l=i(168),o=i(165),c=i(881),d=i.n(c);o.FilePicker;const p=[{id:"01",name:"IMG.png",url:"https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg"},{id:"02",name:"test.png",url:"https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg"},{id:"03",name:"test.png",url:"https://img.alicdn.com/tfs/TB1gjPyp9slXu8jSZFuXXXg7FXa-750-272.png"}],u={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/file-picker.stories.tsx",loc:{start:{line:7,column:0},end:{line:24,column:2}},name:"files",value:p,source:"const files = [\n  {\n    id: '01',\n    name: 'IMG.png',\n    url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',\n  },\n  {\n    id: '02',\n    name: 'test.png',\n    url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',\n  },\n\n  {\n    id: '03',\n    name: 'test.png',\n    url: 'https://img.alicdn.com/tfs/TB1gjPyp9slXu8jSZFuXXXg7FXa-750-272.png',\n  },\n];",deps:()=>[],provides:{}},g=e=>d()({method:"post",url:"http://127.0.0.1:7001/api/upload",transformResponse:[].concat(d.a.defaults.transformResponse,e=>({url:e.data,message:e.message})),onUploadProgress:e=>{console.log(e)},...e}).then(e=>e.data),X={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/file-picker.stories.tsx",loc:{start:{line:26,column:0},end:{line:43,column:5}},name:"getRequest",value:g,source:"const getRequest = (options) =>\n  axios({\n    method: 'post',\n    url: 'http://127.0.0.1:7001/api/upload',\n    transformResponse: [].concat(axios.defaults.transformResponse, (data) => {\n      return {\n        url: data.data,\n        message: data.message,\n      };\n    }),\n    onUploadProgress: (e) => {\n      console.log(e);\n      // TODO: display progress info\n    },\n    ...options,\n  }).then((ret) => {\n    return ret.data;\n  });",deps:()=>[],provides:{axios:d.a}},m=()=>t.a.createElement(o.Group,{spacingY:"l",display:"block"},t.a.createElement(o.FilePicker,{defaultValue:p,request:g,onChange:console.log}),t.a.createElement(o.FilePicker,{defaultValue:p,disabled:!0,onChange:console.log})),b={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/file-picker.stories.tsx",loc:{start:{line:45,column:7},end:{line:51,column:2}},name:"Basic",value:m,source:'const Basic = () => (\n  <Group spacingY="l" display="block">\n    <FilePicker defaultValue={files} request={getRequest} onChange={console.log} />\n\n    <FilePicker defaultValue={files} disabled onChange={console.log} />\n  </Group>\n);',deps:()=>[u,X],provides:{Group:o.Group,FilePicker:o.FilePicker}};m.__doc_info=b,m.__inner_source='() => (\n  <Group spacingY="l" display="block">\n    <FilePicker defaultValue={files} request={getRequest} onChange={console.log} />\n\n    <FilePicker defaultValue={files} disabled onChange={console.log} />\n  </Group>\n)';const f=()=>t.a.createElement(o.Group,{spacingY:"l"},t.a.createElement(o.MediaPicker,{defaultValue:p,request:g,onChange:console.log}),t.a.createElement(o.MediaPicker,{defaultValue:p,request:g,onChange:console.log,disabled:!0})),h={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/file-picker.stories.tsx",loc:{start:{line:53,column:7},end:{line:61,column:2}},name:"Media",value:f,source:'const Media = () => {\n  return (\n    <Group spacingY="l">\n      <MediaPicker defaultValue={files} request={getRequest} onChange={console.log} />\n\n      <MediaPicker defaultValue={files} request={getRequest} onChange={console.log} disabled />\n    </Group>\n  );\n};',deps:()=>[u,X],provides:{Group:o.Group,MediaPicker:o.MediaPicker}};f.__doc_info=h,f.__inner_source='() => {\n  return (\n    <Group spacingY="l">\n      <MediaPicker defaultValue={files} request={getRequest} onChange={console.log} />\n\n      <MediaPicker defaultValue={files} request={getRequest} onChange={console.log} disabled />\n    </Group>\n  );\n}';const k=()=>t.a.createElement(o.Group,{spacingY:"l",width:"800px"},t.a.createElement(o.FilePicker,{renderTrigger:e=>t.a.createElement(o.FilePicker.DragFileTrigger,e),request:g,onChange:console.log}),t.a.createElement(o.FilePicker,{renderTrigger:e=>t.a.createElement(o.FilePicker.DragFileTrigger,e),request:g,onChange:console.log,disabled:!0})),P={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/file-picker.stories.tsx",loc:{start:{line:66,column:7},end:{line:82,column:2}},name:"DragFile",value:k,source:'const DragFile = () => {\n  return (\n    <Group spacingY="l" width="800px">\n      <FilePicker\n        renderTrigger={(props) => <FilePicker.DragFileTrigger {...props} />}\n        request={getRequest}\n        onChange={console.log}\n      />\n      <FilePicker\n        renderTrigger={(props) => <FilePicker.DragFileTrigger {...props} />}\n        request={getRequest}\n        onChange={console.log}\n        disabled\n      />\n    </Group>\n  );\n};',deps:()=>[X],provides:{Group:o.Group,FilePicker:o.FilePicker}};k.__doc_info=P,k.__inner_source='() => {\n  return (\n    <Group spacingY="l" width="800px">\n      <FilePicker\n        renderTrigger={(props) => <FilePicker.DragFileTrigger {...props} />}\n        request={getRequest}\n        onChange={console.log}\n      />\n      <FilePicker\n        renderTrigger={(props) => <FilePicker.DragFileTrigger {...props} />}\n        request={getRequest}\n        onChange={console.log}\n        disabled\n      />\n    </Group>\n  );\n}';const F=()=>{const e=[{id:"01",name:"img.png",url:"https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg",status:"success"},{id:"02",name:"test.png",url:"https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg",status:"error"},{id:"03",name:"test02.png",url:"https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg",status:"process"}];return t.a.createElement(o.Group,{spacingY:"l",display:"block"},t.a.createElement(o.FilePicker,{defaultValue:e,onChange:console.log}),t.a.createElement(o.MediaPicker,{defaultValue:e,onChange:console.log}))},O={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/file-picker.stories.tsx",loc:{start:{line:84,column:7},end:{line:111,column:2}},name:"Status",value:F,source:"const Status = () => {\n  const files = [\n    {\n      id: '01',\n      name: 'img.png',\n      url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',\n      status: 'success',\n    },\n    {\n      id: '02',\n      name: 'test.png',\n      url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',\n      status: 'error',\n    },\n    {\n      id: '03',\n      name: 'test02.png',\n      url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',\n      status: 'process',\n    },\n  ];\n  return (\n    <Group spacingY=\"l\" display=\"block\">\n      <FilePicker defaultValue={files} onChange={console.log} />\n      <MediaPicker defaultValue={files} onChange={console.log} />\n    </Group>\n  );\n};",deps:()=>[u],provides:{Group:o.Group,FilePicker:o.FilePicker,MediaPicker:o.MediaPicker}};F.__doc_info=O,F.__inner_source="() => {\n  const files = [\n    {\n      id: '01',\n      name: 'img.png',\n      url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',\n      status: 'success',\n    },\n    {\n      id: '02',\n      name: 'test.png',\n      url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',\n      status: 'error',\n    },\n    {\n      id: '03',\n      name: 'test02.png',\n      url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',\n      status: 'process',\n    },\n  ];\n  return (\n    <Group spacingY=\"l\" display=\"block\">\n      <FilePicker defaultValue={files} onChange={console.log} />\n      <MediaPicker defaultValue={files} onChange={console.log} />\n    </Group>\n  );\n}";const j=()=>t.a.createElement(o.MediaPicker,{accept:"image/*",onChange:console.log}),y={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/file-picker.stories.tsx",loc:{start:{line:113,column:7},end:{line:116,column:2}},name:"FileTypes",value:j,source:'const FileTypes = () => {\n  // \u53ea\u80fd\u9009\u56fe\u7247\n  return <MediaPicker accept="image/*" onChange={console.log} />;\n};',deps:()=>[],provides:{MediaPicker:o.MediaPicker}};j.__doc_info=y,j.__inner_source='() => {\n  // \u53ea\u80fd\u9009\u56fe\u7247\n  return <MediaPicker accept="image/*" onChange={console.log} />;\n}';const T=()=>t.a.createElement(o.FilePicker,{multiple:!0,onChange:console.log}),x={filename:"/Users/feichao.sfc/code/github/alibaba/rex-design/packages/story/src/file-picker.stories.tsx",loc:{start:{line:118,column:7},end:{line:120,column:2}},name:"Multiple",value:T,source:"const Multiple = () => {\n  return <FilePicker multiple onChange={console.log} />;\n};",deps:()=>[],provides:{FilePicker:o.FilePicker}};T.__inner_source="() => {\n  return <FilePicker multiple onChange={console.log} />;\n}",T.__doc_info=x;try{k.displayName="DragFile",k.__docgenInfo={description:"\u62d6\u62fd\u4e0a\u4f20",displayName:"DragFile",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../story/src/file-picker.stories.tsx#DragFile"]={docgenInfo:k.__docgenInfo,name:"DragFile",path:"../story/src/file-picker.stories.tsx#DragFile"})}catch(E){}var M={id:"file-picker",title:"FilePicker \u6587\u4ef6\u9009\u62e9\u5668"},_={unversionedId:"file-picker",id:"file-picker",isDocsHomePage:!1,title:"FilePicker \u6587\u4ef6\u9009\u62e9\u5668",description:"\u4f7f\u7528\u573a\u666f",source:"@site/docs/file-picker.mdx",sourceDirName:".",slug:"/file-picker",permalink:"/rex-design/docs/file-picker",editUrl:"https://github.com/alibaba/rex-design/edit/main/packages/doc/docs/file-picker.mdx",version:"current",frontMatter:{id:"file-picker",title:"FilePicker \u6587\u4ef6\u9009\u62e9\u5668"},sidebar:"docs",previous:{title:"TimePicker \u65f6\u95f4\u9009\u62e9",permalink:"/rex-design/docs/time-picker"},next:{title:"Input \u8f93\u5165\u6846",permalink:"/rex-design/docs/input"}},V=[{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",children:[{value:"\u8bf7\u6c42\u5e93\u63a5\u5165\u793a\u4f8b",id:"\u8bf7\u6c42\u5e93\u63a5\u5165\u793a\u4f8b",children:[]},{value:"\u4e0a\u4f20\u6587\u4ef6\u793a\u4f8b",id:"\u4e0a\u4f20\u6587\u4ef6\u793a\u4f8b",children:[]},{value:"\u670d\u52a1\u7aef\u63a5\u6536\u793a\u4f8b",id:"\u670d\u52a1\u7aef\u63a5\u6536\u793a\u4f8b",children:[]}]},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",children:[{value:"\u57fa\u672c\u793a\u4f8b",id:"\u57fa\u672c\u793a\u4f8b",children:[]},{value:"\u591a\u5a92\u4f53",id:"\u591a\u5a92\u4f53",children:[]},{value:"\u62d6\u62fd\u4e0a\u4f20",id:"\u62d6\u62fd\u4e0a\u4f20",children:[]},{value:"\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001",id:"\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001",children:[]},{value:"\u6587\u4ef6\u7c7b\u578b",id:"\u6587\u4ef6\u7c7b\u578b",children:[]},{value:"\u6587\u4ef6\u591a\u9009",id:"\u6587\u4ef6\u591a\u9009",children:[]}]},{value:"API",id:"api",children:[{value:"FilePicker",id:"filepicker",children:[]},{value:"MediaPicker",id:"mediapicker",children:[]}]}],v=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(l.b)("div",n)}},C=v("Story"),G=v("PropsTable"),q={toc:V};function R(e){var n=e.components,i=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(r.a)({},q,i,{components:n,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"\u4f7f\u7528\u573a\u666f"},"\u4f7f\u7528\u573a\u666f"),Object(l.b)("p",null,"\u4ece\u7cfb\u7edf\u6587\u4ef6\u76ee\u5f55\u4e2d\u9009\u62e9\u90e8\u5206\u6587\u4ef6\u8fdb\u884c\u4e0a\u4f20\u3002"),Object(l.b)("h3",{id:"\u8bf7\u6c42\u5e93\u63a5\u5165\u793a\u4f8b"},"\u8bf7\u6c42\u5e93\u63a5\u5165\u793a\u4f8b"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"<FilePicker\n  request={(options: any) =>\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:7001/api/upload',\n      transformResponse: [].concat(axios.defaults.transformResponse, (data: any) => {\n        return {\n          url: data.data,\n          message: data.message,\n        };\n      }),\n      ...options,\n    }).then((ret) => {\n      return ret.data;\n    })\n  }\n  onChange={console.log}\n/>\n")),Object(l.b)("p",null,"\u9700\u8981\u5c06\u540e\u7aef\u8fd4\u56de\u7684\u6570\u636e\u8f6c\u6362\u4e3a"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "url": "foo.bar",\n  "message": "message body"\n}\n')),Object(l.b)("h3",{id:"\u4e0a\u4f20\u6587\u4ef6\u793a\u4f8b"},"\u4e0a\u4f20\u6587\u4ef6\u793a\u4f8b"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"FormData\n- id: file_1\n- name: test.png\n- type: image/png\n- file: (binary)\n")),Object(l.b)("h3",{id:"\u670d\u52a1\u7aef\u63a5\u6536\u793a\u4f8b"},"\u670d\u52a1\u7aef\u63a5\u6536\u793a\u4f8b"),Object(l.b)("p",null,"\u4ee5 Egg \u6846\u67b6\u4e3a\u4f8b"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-js"},"const stream = await ctx.getFileStream();\nconst filename = stream.filename || stream.name;\nconst ret = await ctx.service.file.uploadStream(stream, filename);\n")),Object(l.b)("h2",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(l.b)("h3",{id:"\u57fa\u672c\u793a\u4f8b"},"\u57fa\u672c\u793a\u4f8b"),Object(l.b)(C,{fn:m,mdxType:"Story"}),Object(l.b)("h3",{id:"\u591a\u5a92\u4f53"},"\u591a\u5a92\u4f53"),Object(l.b)(C,{fn:f,mdxType:"Story"}),Object(l.b)("h3",{id:"\u62d6\u62fd\u4e0a\u4f20"},"\u62d6\u62fd\u4e0a\u4f20"),Object(l.b)(C,{fn:k,mdxType:"Story"}),Object(l.b)("h3",{id:"\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001"},"\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001"),Object(l.b)(C,{fn:F,mdxType:"Story"}),Object(l.b)("h3",{id:"\u6587\u4ef6\u7c7b\u578b"},"\u6587\u4ef6\u7c7b\u578b"),Object(l.b)(C,{fn:j,mdxType:"Story"}),Object(l.b)("h3",{id:"\u6587\u4ef6\u591a\u9009"},"\u6587\u4ef6\u591a\u9009"),Object(l.b)(C,{fn:T,mdxType:"Story"}),Object(l.b)("h2",{id:"api"},"API"),Object(l.b)("h3",{id:"filepicker"},"FilePicker"),Object(l.b)(G,{component:o.FilePicker,mdxType:"PropsTable"}),Object(l.b)("h3",{id:"mediapicker"},"MediaPicker"),Object(l.b)(G,{component:o.MediaPicker,mdxType:"PropsTable"}))}R.isMDXComponent=!0}}]);