(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{103:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return d})),n.d(t,"metadata",(function(){return m})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return f}));var a,r=n(3),l=n(8),i=n(0),o=n.n(i),u=n(173),c=n(207),d={id:"api",title:"API"},m={unversionedId:"xform/api",id:"xform/api",isDocsHomePage:!1,title:"API",description:"{\ud83d\ude80} \u8868\u793a\u8fdb\u9636 API\u3002 \u6240\u6709 API \u90fd\u901a\u8fc7 @rexd/xform \u5bfc\u51fa\u3002",source:"@site/docs/xform/api.mdx",sourceDirName:"xform",slug:"/xform/api",permalink:"/rex-design/docs/xform/api",editUrl:"https://github.com/alibaba/rex-design/edit/main/packages/doc/docs/xform/api.mdx",version:"current",frontMatter:{id:"api",title:"API"},sidebar:"docs",previous:{title:"xform core",permalink:"/rex-design/docs/xform/core"}},s=[{value:"\u7ec4\u4ef6",id:"\u7ec4\u4ef6",children:[{value:"<code>Form</code>",id:"form",children:[]},{value:"<code>FormItem</code>",id:"formitem",children:[]},{value:"<code>Form.Submit</code>",id:"formsubmit",children:[]},{value:"<code>Form.Reset</code>",id:"formreset",children:[]},{value:"<code>Form.Effect</code>",id:"formeffect",children:[]},{value:"<code>Form.Array</code>",id:"formarray",children:[]},{value:"<code>Form.Object</code>",id:"formobject",children:[]},{value:"<code>Form.ItemGroup</code>",id:"formitemgroup",children:[]},{value:"<code>Form.ItemView</code>",id:"formitemview",children:[]}]},{value:"contexts &amp; hooks",id:"contexts--hooks",children:[{value:"<code>useModel</code>",id:"usemodel",children:[]},{value:"<code>Form.ModelConsumer</code>",id:"formmodelconsumer",children:[]},{value:"<code>Form.ModelProvider</code>",id:"formmodelprovider",children:[]},{value:"<code>useFormEnv</code>",id:"useformenv",children:[]},{value:"<code>FormEnvProvider</code>",id:"formenvprovider",children:[]}]},{value:"\u6570\u7ec4\u5e03\u5c40 {\ud83d\ude80}",id:"\u6570\u7ec4\u5e03\u5c40-",children:[{value:"<code>arrayCard</code>",id:"arraycard",children:[]},{value:"<code>arrayTable</code>",id:"arraytable",children:[]}]},{value:"\u6a21\u578b\u4e0e\u5de5\u5177",id:"\u6a21\u578b\u4e0e\u5de5\u5177",children:[{value:"<code>IModel</code>",id:"imodel",children:[]},{value:"<code>Field</code>",id:"field",children:[]},{value:"<code>modelUtils.clearError</code>",id:"modelutilsclearerror",children:[]},{value:"<code>modelUtils.validateAll</code>",id:"modelutilsvalidateall",children:[]},{value:"<code>modelUtils.submit</code>",id:"modelutilssubmit",children:[]},{value:"<code>modelUtils.reset</code>",id:"modelutilsreset",children:[]},{value:"<code>createFormItem</code>",id:"createformitem",children:[]},{value:"<code>FormItem.register</code>",id:"formitemregister",children:[]},{value:"<code>AsyncValue</code>",id:"asyncvalue",children:[]}]}],p=(a="PropsTable",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),Object(u.b)("div",e)}),b={toc:s};function f(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(u.b)("wrapper",Object(r.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(u.b)("p",null,"{\ud83d\ude80} \u8868\u793a\u8fdb\u9636 API\u3002 \u6240\u6709 API \u90fd\u901a\u8fc7 ",Object(u.b)("inlineCode",{parentName:"p"},"@rexd/xform")," \u5bfc\u51fa\u3002"),Object(u.b)("h2",{id:"\u7ec4\u4ef6"},"\u7ec4\u4ef6"),Object(u.b)("h3",{id:"form"},Object(u.b)("inlineCode",{parentName:"h3"},"Form")),Object(u.b)("p",null,"\u8868\u5355\u7ec4\u4ef6\uff0c\u521b\u5efa\u6240\u9700\u7684\u4e0a\u4e0b\u6587\uff0c\u5e76\u901a\u8fc7 FormLayout \u6e32\u67d3\u4e00\u4e2a div\uff1a"),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},"FormEnvProvider\uff1a\u8868\u5355\u7684\u73af\u5883\u53d8\u91cf\uff0c\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(u.b)("a",{parentName:"li",href:"#useformenv"},Object(u.b)("inlineCode",{parentName:"a"},"useFormEnv"))," \u83b7\u53d6\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf"),Object(u.b)("li",{parentName:"ul"},"ModelProvider\uff1a\u6a21\u578b\u5bf9\u8c61\uff0c\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(u.b)("a",{parentName:"li",href:"#usemodel"},Object(u.b)("inlineCode",{parentName:"a"},"useModel"))," \u83b7\u53d6\u6a21\u578b\u5bf9\u8c61"),Object(u.b)("li",{parentName:"ul"},"FormLayout\uff1a \u8868\u5355\u5e03\u5c40")),Object(u.b)(p,{component:c.b,mdxType:"PropsTable"}),Object(u.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(u.b)("div",{parentName:"div",className:"admonition-heading"},Object(u.b)("h5",{parentName:"div"},Object(u.b)("span",{parentName:"h5",className:"admonition-icon"},Object(u.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(u.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"@alife/hippo-xform")),Object(u.b)("div",{parentName:"div",className:"admonition-content"},Object(u.b)("p",{parentName:"div"},"\u6ce8\u610f\u56e0\u4e3a\u5e95\u5c42\u7ec4\u4ef6\u5e93\u4e0d\u540c\uff0c@alife/hippo-xform \u63d0\u4f9b\u4e86\u4e0d\u540c\u7684 layout \u53c2\u6570\u3002\u8be6\u89c1 ",Object(u.b)("a",{parentName:"p",href:"hippo-xform"},"hippo-xform"),"."))),Object(u.b)("h3",{id:"formitem"},Object(u.b)("inlineCode",{parentName:"h3"},"FormItem")),Object(u.b)("p",null,"\u8868\u5355\u9879 \u7ec4\u4ef6\uff0c\u6e32\u67d3\u4e00\u4e2a FormControl\uff0c\u5305\u542b\u9879\u76ee\u6807\u7b7e\uff08label\uff09\u3001\u9519\u8bef\u4fe1\u606f\u3001\u53ef\u9009\u7684\u5e2e\u52a9\u4fe1\u606f\uff0c\u4ee5\u53ca\u5177\u4f53\u7684\u63a7\u4ef6\u5b9e\u4f8b\uff08\u4f8b\u5982\u4e00\u4e2a\u8f93\u5165\u6846\uff09\u3002"),Object(u.b)(p,{props:[{name:"component",required:!0,type:"string",description:"\u7ec4\u4ef6\u7c7b\u578b"},{name:"name",required:!1,type:"string",description:"\u5b57\u6bb5\u6570\u636e\u7d22\u5f15"},{name:"field",required:!1,type:"Field",description:"Field \u5bf9\u8c61\uff0c\u63d0\u4f9b\u540e\u5c06\u8986\u76d6 name \u5c5e\u6027"},{name:"label",required:!0,type:"ReactNode",description:"\u5b57\u6bb5\u7684\u663e\u793a\u540d\u79f0"},{name:"tip",type:"ReactNode",description:"\u63d0\u793a\u4fe1\u606f"},{name:"asterisk",type:"boolean",description:"\u662f\u5426\u5c55\u793a\u300c*\u300d"},{name:"help",type:"ReactNode",description:"\u5e2e\u52a9\u6587\u672c"},{name:"fallbackValue",description:"\u5b57\u6bb5\u503c\u4e3a\u7a7a\u65f6\uff0c\u7ec4\u4ef6\u5c55\u793a\u7528\u7684\u9ed8\u8ba4\u503c"},{name:"componentProps",description:"\u7ec4\u4ef6\u7684 props"},{category:"\u6821\u9a8c",name:"required",type:"boolean",defaultValue:"false",description:"\u5b57\u6bb5\u662f\u5426\u5fc5\u586b"},{category:"\u6821\u9a8c",name:"requiredMessage",type:"string",defaultValue:'"\u8be5\u5b57\u6bb5\u4e3a\u5fc5\u586b\u9879"',description:"\u5fc5\u586b\u5b57\u6bb5\u7684\u9519\u8bef\u4fe1\u606f"},{category:"\u6821\u9a8c",name:"validate",type:"(value: any, field: Field, trigger: FieldValidateTrigger) => string | Promise<string>",description:"\u6821\u9a8c\u65b9\u6cd5\u3002 \u8fd4\u56de\u5b57\u7b26\u4e32\u8868\u793a\u5b57\u6bb5\u4e0a\u7684\u51fa\u9519\u4fe1\u606f"},{category:"\u6821\u9a8c",name:"validateOnMount",type:"boolean",description:"\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c\u3002 FormEnvProvider \u53ef\u4ee5\u6307\u5b9a\u8be5 prop \u9ed8\u8ba4\u503c",defaultValue:"false"},{category:"\u6821\u9a8c",name:"validateOnChange",type:"boolean",description:"\u503c\u4fee\u6539\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c\u3002 FormEnvProvider \u53ef\u4ee5\u6307\u5b9a\u8be5 prop \u9ed8\u8ba4\u503c",defaultValue:"true"},{category:"\u6821\u9a8c",name:"validateOnBlur",type:"boolean",description:"\u7ec4\u4ef6\u5931\u53bb\u7126\u70b9\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c\u3002 FormEnvProvider \u53ef\u4ee5\u6307\u5b9a\u8be5 prop \u9ed8\u8ba4\u503c",defaultValue:"true"},{name:"dataSource",description:"\u540c componentProps.dataSource"},{name:"disabled",description:"\u540c componentProps.disabled"},{name:"readOnly",description:"\u540c componentProps.readOnly"},{name:"status",description:Object(u.b)(o.a.Fragment,null,"\u540c componentProps.status",Object(u.b)("br",null),"\u9ed8\u8ba4\u4e3a undefined\uff1b\u5b57\u6bb5\u6821\u9a8c\u51fa\u9519\u65f6\uff0cstatus \u7684\u9ed8\u8ba4\u503c\u4e3a 'error'\uff1b",Object(u.b)("br",null)," ",Object(u.b)("b",null,"\u6ce8\u610f\u8be5 prop \u7684\u540d\u79f0\u4e0e\u5177\u4f53\u7684\u7ec4\u4ef6\u7c7b\u578b\u76f8\u5173\uff0c\u4f8b\u5982\u5728 @alife/hippo-xform \u4e2d\uff0c\u8be5 prop \u7684\u540d\u79f0\u4e3a 'state'"))},{category:"{\ud83d\ude80}",name:"value",description:Object(u.b)(o.a.Fragment,null,"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 value",Object(u.b)("br",null),Object(u.b)("b",null,"\u6ce8\u610f\u8be5 prop \u7684\u540d\u79f0\u4e0e\u5177\u4f53\u7684\u7ec4\u4ef6\u7c7b\u578b\u76f8\u5173\uff0c\u4f8b\u5982\u90e8\u5206\u7ec4\u4ef6\u8be5 prop \u7684\u540d\u79f0\u4e3a 'checked'"))},{category:"{\ud83d\ude80}",name:"onChange",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 onChange"},{category:"{\ud83d\ude80}",name:"onBlur",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 onBlur"},{category:"{\ud83d\ude80}",name:"renderPreview",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684 \u9884\u89c8\u6001\u6e32\u67d3\u65b9\u6cd5"},{category:"{\ud83d\ude80}",name:"isEmpty",type:"(value: any) => boolean",description:"\u8986\u76d6\u8868\u5355\u9879\u9ed8\u8ba4\u7684\u5224\u65ad\u4e3a\u7a7a\u7684\u903b\u8f91"}],mdxType:"PropsTable"}),Object(u.b)("details",null,Object(u.b)("summary",null,"component \u5217\u8868"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre"},'"switch"\n"checkbox"\n"checkboxGroup"\n"radioGroup"\n"datePicker"\n"dateRangePicker"\n"timePicker"\n"filePicker"\n"mediaPicker"\n"input"\n"textarea"\n"numberInput"\n"range"\n"select"\n"singleSelect"\n"multiSelect"\n"treeSelect"\n"singleTreeSelect"\n"multiTreeSelect"\n"testButtonGroup" (\u6d4b\u8bd5\u7528\u7684\u6309\u94ae\u7ec4\uff0c\u901a\u8fc7 componentProps.items=[\'A\', \'B\', \'C\'] \u8bbe\u7f6e\u9009\u9879)\n'))),Object(u.b)("div",{className:"admonition admonition-info alert alert--info"},Object(u.b)("div",{parentName:"div",className:"admonition-heading"},Object(u.b)("h5",{parentName:"div"},Object(u.b)("span",{parentName:"h5",className:"admonition-icon"},Object(u.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(u.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"@alife/hippo-xform")),Object(u.b)("div",{parentName:"div",className:"admonition-content"},Object(u.b)("p",{parentName:"div"},"\u6ce8\u610f @alife/hippo-xform \u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u7ec4\u4ef6\u7c7b\u578b\uff0c\u8be6\u89c1 ",Object(u.b)("a",{parentName:"p",href:"hippo-xform"},"hippo-xform"),"."))),Object(u.b)("h3",{id:"formsubmit"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.Submit")),Object(u.b)("p",null,"\u8868\u5355\u63d0\u4ea4",Object(u.b)("a",{parentName:"p",href:"../button"},"\u6309\u94ae"),"\uff0c\u70b9\u51fb\u65f6..."),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},"\u89e6\u53d1\u6240\u6709\u5b57\u6bb5\u7684\u6821\u9a8c"),Object(u.b)("li",{parentName:"ul"},"\u5982\u679c\u6821\u9a8c\u901a\u8fc7\uff0c\u5219\u8c03\u7528 ",Object(u.b)("inlineCode",{parentName:"li"},"onSubmit(submitValues, model)")),Object(u.b)("li",{parentName:"ul"},"\u5982\u679c\u53d1\u751f\u9519\u8bef\uff0c\u5219\u8c03\u7528 ",Object(u.b)("inlineCode",{parentName:"li"},"onSubmit(erros, model)"))),Object(u.b)("h3",{id:"formreset"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.Reset")),Object(u.b)("p",null,"\u8868\u5355\u91cd\u7f6e",Object(u.b)("a",{parentName:"p",href:"../button"},"\u6309\u94ae"),"\uff0c\u70b9\u51fb\u65f6\u5c06\u6e05\u7a7a values \u4e0e\u6821\u9a8c\u9519\u8bef\uff0c\u7136\u540e\u89e6\u53d1 ",Object(u.b)("inlineCode",{parentName:"p"},"onReset"),"\u3002"),Object(u.b)("h3",{id:"formeffect"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.Effect")),Object(u.b)("p",null,Object(u.b)("inlineCode",{parentName:"p"},"<Form.Effect watch={watch} effect={effect} fireImmediately={boolean} />")),Object(u.b)("p",null,"\u521b\u5efa\u8868\u5355\u8054\u52a8\uff0c\u6bcf\u5f53 watch \u5bf9\u5e94\u7684\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0ceffect \u90fd\u4f1a\u88ab\u89e6\u53d1\u3002"),Object(u.b)("p",null,"effect \u88ab\u89e6\u53d1\u65f6\uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u4e24\u4e2a\u53c2\u6570\uff1a"),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"value: any"),": \u65b0\u7684\u503c"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"detail: object"),Object(u.b)("ul",{parentName:"li"},Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"detail.prev")," \u65e7\u7684\u503c"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"detail.model")," \u5f53\u524d\u6a21\u578b"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"detail.next")," \u65b0\u7684\u503c")))),Object(u.b)("p",null,"watch \u652f\u6301\u4ee5\u4e0b\u7528\u6cd5\uff1a"),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"string")," \u76d1\u542c\u5bf9\u5e94\u6570\u636e\u7d22\u5f15\u5904 value \u53d8\u5316\uff08\u6ce8\u610f\u5d4c\u5957\u5b57\u6bb5\u7684\u53d8\u66f4\u4e5f\u4f1a\u89e6\u53d1 effect\uff09"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",{parentName:"li",href:"#field"},Object(u.b)("inlineCode",{parentName:"a"},"Feild"))," \u76d1\u542c\u5bf9\u5e94 Field \u7684 value \u53d8\u5316"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",{parentName:"li",href:"#asyncvalue"},Object(u.b)("inlineCode",{parentName:"a"},"AsyncValue"))," \u76d1\u542c\u5bf9\u5e94 asyncValue.current \u7684 value \u53d8\u5316"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"Array<string | Field | AsyncValue>")," \u76d1\u542c\u591a\u4e2a\u6765\u6e90\u7684\u53d8\u5316",Object(u.b)("ul",{parentName:"li"},Object(u.b)("li",{parentName:"ul"},"\u5176\u4e2d\u4e00\u4e2a\u6765\u6e90\u53d1\u751f\u53d8\u5316\u65f6\uff0ceffect \u5c31\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21"),Object(u.b)("li",{parentName:"ul"},"effect \u89e6\u53d1\u65f6\uff0c\u6240\u6709\u6765\u6e90\u7684\u503c\u4f1a\u653e\u5728\u4e00\u4e2a\u6570\u7ec4\u4e2d"))),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"() => any")," \u81ea\u5b9a\u4e49\u51fd\u6570\u7528\u6cd5\uff0c\u7528\u6cd5\u540c ",Object(u.b)("a",{parentName:"li",href:"https://mobx.js.org/api.html#reaction"},"mobx reaction")," \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570")),Object(u.b)("p",null,Object(u.b)("a",{parentName:"p",href:"https://mobx.js.org/reactions.html#fireimmediately-_reaction_"},"fireImmediately")," \u7528\u4e8e\u6307\u5b9a\u662f\u5426\u5728\u9996\u6b21\u52a0\u8f7d\u65f6\u89e6\u53d1 effect\uff0c\u9ed8\u8ba4\u4e3a false."),Object(u.b)("h3",{id:"formarray"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.Array")),Object(u.b)("p",null,Object(u.b)("a",{parentName:"p",href:"advanced#formarray"},"{\ud83d\ude80} \u7528\u6cd5"),"\u3002 \u4ee5\u5f53\u524d model \u4e3a\u57fa\u7840\uff0c\u4e3a\u5176\u5b50\u8282\u70b9\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684 sub model\uff0c\u5e76\u5c06\u5b50\u8282\u70b9\u4e2d\u7684\u8868\u5355\u503c\u6536\u96c6\u5230\u5f53\u524d model \u4e2d ",Object(u.b)("inlineCode",{parentName:"p"},"{name}.{itemIndex}")," \u5bf9\u5e94\u7684\u4f4d\u7f6e\u3002"),Object(u.b)(p,{props:[{name:"name",type:"string",required:!0,description:"\u5b57\u6bb5\u7d22\u5f15"},{name:"layout",type:"(input: XFormArrayLayoutInput) => React.ReactElement",required:!0,description:"\u6570\u7ec4\u5e03\u5c40\uff0c\u63a7\u5236\u8868\u5355\u5982\u4f55\u5bf9\u6570\u7ec4\u8fdb\u884c\u5e03\u5c40\uff0c\u5305\u62ec\u6570\u7ec4\u4e2d\u6bcf\u4e00\u4e2a\u5143\u7d20\u7684\u5e03\u5c40 \u4ee5\u53ca \u76f8\u5173\u7684\u64cd\u4f5c\u6309\u94ae\uff08\u6dfb\u52a0\u3001\u5220\u9664\u3001\u4e0a\u79fb\u3001\u4e0b\u79fb\u7b49\uff09"},{name:"itemFactory",type:"(arrayModel: SubModel) => any",defaultValue:"() => ({})",description:"\u6570\u7ec4\u4e2d\u65b0\u589e\u5143\u7d20\u7684\u521d\u59cb\u503c, \u9ed8\u8ba4\u4e3a\u4e00\u4e2a\u603b\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7a7a\u5bf9\u8c61\u7684\u51fd\u6570"}],mdxType:"PropsTable"}),Object(u.b)("h3",{id:"formobject"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.Object")),Object(u.b)("p",null,Object(u.b)("a",{parentName:"p",href:"advanced#formobject"},"{\ud83d\ude80} \u7528\u6cd5"),"\u3002 \u4ee5\u5f53\u524d model \u4e3a\u57fa\u7840\uff0c\u4e3a\u5176\u5b50\u8282\u70b9\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684 sub model\uff0c\u5e76\u5c06\u5b50\u8282\u70b9\u4e2d\u7684\u8868\u5355\u503c\u6536\u96c6\u5230\u5f53\u524d model \u4e2d name \u5bf9\u5e94\u7684\u4f4d\u7f6e"),Object(u.b)(p,{props:[{name:"name",type:"string",required:!0,description:"\u5b57\u6bb5\u7d22\u5f15"}],mdxType:"PropsTable"}),Object(u.b)("h3",{id:"formitemgroup"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.ItemGroup")),Object(u.b)("p",null,"\u5e03\u5c40\u7ec4\u4ef6\uff0c\u53ef\u5c06\u591a\u4e2a FormItem \u5206\u4e3a\u4e00\u7ec4\u3002"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-jsx"},'<Form.ItemGroup label="\u5206\u7ec4\u540d\u79f0" inline labelWidth={50} controlWidth={200}>\n  <FormItem component="input" />\n  <FormItem component="select" />\n</Form.ItemGroup>\n')),Object(u.b)(p,{props:[{name:"label",type:"ReactNode",description:"\u5206\u7ec4\u7684\u6807\u7b7e"},{name:"inline",type:"boolean",description:"\u662f\u5426\u4f7f\u7528\u5185\u8054\u5e03\u5c40"},{name:"labelWidth",type:"number | string",description:"\u5206\u7ec4\u5185 FormItem \u7684\u6807\u7b7e\u5bbd\u5ea6"},{name:"controlWidth",type:"number | string",description:"\u5206\u7ec4\u5185 FormItem \u7684\u63a7\u4ef6\u5bbd\u5ea6"},{name:"style",type:"React.CSSProperties",description:"\u5185\u8054\u6837\u5f0f"},{name:"className",type:"string",description:"className"}],mdxType:"PropsTable"}),Object(u.b)("h3",{id:"formitemview"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.ItemView")),Object(u.b)("p",null,"\u8868\u5355\u9879\u89c6\u56fe\u7ec4\u4ef6\u3002\u901a\u8fc7 ",Object(u.b)("inlineCode",{parentName:"p"},"Form.ItemView")," \u53ef\u4ee5\u8ba9\u81ea\u5b9a\u4e49\u7684\u7ec4\u4ef6\u548c\u666e\u901a FormItem \u4f7f\u7528\u76f8\u540c\u7684\u5e03\u5c40\u3002"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-jsx"},'// \u666e\u901a FormItem\n<FormItem label="\u6807\u7b7e\u6807\u7b7e" component="select" />\n\n// \u5229\u7528 Form.ItemView \u8ba9\u81ea\u5b9a\u4e49\u5185\u5bb9\u4f7f\u7528\u4e0e FormItem \u76f8\u540c\u7684\u5e03\u5c40\n<Form.ItemView label="\u6807\u7b7e\u6807\u7b7e">\n  <MyCustomSelect value={...} onChange={...} />\n</Form.ItemView>\n')),Object(u.b)(p,{props:[{name:"label",type:"ReactNode",description:"\u6807\u7b7e"},{name:"help",type:"boolean",description:"\u5e2e\u52a9\u6587\u672c"},{name:"tip",type:"boolean",description:"\u63d0\u793a\u4fe1\u606f"},{name:"asterisk",type:"boolean",description:"\u662f\u5426\u5c55\u793a\u300c*\u300d"},{name:"error",type:"boolean",description:"\u9519\u8bef\u4fe1\u606f"},{name:"style",type:"React.CSSProperties",description:"\u5185\u8054\u6837\u5f0f"},{name:"className",type:"string",description:"className"}],mdxType:"PropsTable"}),Object(u.b)("h2",{id:"contexts--hooks"},"contexts & hooks"),Object(u.b)("h3",{id:"usemodel"},Object(u.b)("inlineCode",{parentName:"h3"},"useModel")),Object(u.b)("p",null,"\u83b7\u53d6\u5f53\u524d\u5c42\u7ea7\u7684\u6a21\u578b\u5bf9\u8c61\u3002"),Object(u.b)("h3",{id:"formmodelconsumer"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.ModelConsumer")),Object(u.b)("p",null,"ModelContext \u7684 ",Object(u.b)("a",{parentName:"p",href:"https://zh-hans.reactjs.org/docs/context.html#contextconsumer"},Object(u.b)("inlineCode",{parentName:"a"},"Consumer")),"\uff0c\u53ef\u7528\u4e8e\u8ba2\u9605\u5f53\u524d\u5c42\u7ea7\u7684 model\u3002"),Object(u.b)("p",null,"\u8be5\u7ec4\u4ef6\u5df2\u7ecf\u88ab\u5305\u88f9\u5728 ",Object(u.b)("a",{parentName:"p",href:"https://mobx.js.org/react-integration.html"},"observer")," \u4e2d\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5728 ",Object(u.b)("a",{parentName:"p",href:"https://zh-hans.reactjs.org/docs/render-props.html"},"render prop")," \u4e2d\u8bfb\u53d6 mobx observable \u5bf9\u8c61\u3002"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-jsx"},"<Form.ModelConsumer>\n  {(model) => {\n    const person = model.getSubModel('person');\n    return <span>\u59d3\u540d\uff1a {person.getValue('name')}</span>;\n  }}\n</Form.ModelConsumer>\n")),Object(u.b)("h3",{id:"formmodelprovider"},Object(u.b)("inlineCode",{parentName:"h3"},"Form.ModelProvider")),Object(u.b)("p",null,"{\ud83d\ude80} \u4e3b\u52a8\u5728 react context \u4e2d\u8bbe\u7f6e\u6a21\u578b\u5bf9\u8c61\u3002"),Object(u.b)("p",null,Object(u.b)("inlineCode",{parentName:"p"},"<Form.ModelProvider value={model}>{children}</Form.ModelProvider>")),Object(u.b)("h3",{id:"useformenv"},Object(u.b)("inlineCode",{parentName:"h3"},"useFormEnv")),Object(u.b)("p",null,"{\ud83d\ude80} \u83b7\u53d6\u5f53\u524d\u5c42\u7ea7\u7684\u73af\u5883\u53d8\u91cf\u3002"),Object(u.b)("h3",{id:"formenvprovider"},Object(u.b)("inlineCode",{parentName:"h3"},"FormEnvProvider")),Object(u.b)("p",null,"{\ud83d\ude80} \u5728\u6307\u5b9a\u7684\u5c42\u7ea7\u8986\u76d6\u8868\u5355\u7684\u73af\u5883\u53d8\u91cf\u3002"),Object(u.b)("p",null,Object(u.b)("inlineCode",{parentName:"p"},"<Form />")," \u6e32\u67d3\u65f6\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u5355\u72ec\u4f7f\u7528 ",Object(u.b)("inlineCode",{parentName:"p"},"<FormEnvProvider />"),"\u3002 \u76ee\u524d\u9ed8\u8ba4\u652f\u6301\u8bbe\u7f6e ",Object(u.b)("inlineCode",{parentName:"p"},"isPreview"),"\uff1a"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-jsx"},'<Form>\n  <FormItem name="aaa" />\n  <FormItem name="bbb" />\n\n  <FormEnvProvider isPreview>\n    {/* ccc \u548c ddd \u603b\u662f\u4f1a\u5904\u4e8e\u9884\u89c8\u6001 */}\n    <FormItem name="ccc" />\n    <FormItem name="ddd" />\n  </FormEnvProvider>\n</Form>\n')),Object(u.b)("p",null,"FormEnvProvider \u63a5\u53d7\u4efb\u610f\u7684 props\uff0c\u8bbe\u7f6e\u540e\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",Object(u.b)("inlineCode",{parentName:"p"},"useFormEnv()")," \u83b7\u53d6\u5230\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf\uff08\u6ce8\u610f TypeScript \u7c7b\u578b\u4fe1\u606f\u8981\u8fdb\u884c\u76f8\u5e94\u7684\u62d3\u5c55\uff09\u3002"),Object(u.b)("p",null,"\u8bbe\u7f6e FormEnvProvider \u65f6\uff0c\u65b0\u7684\u73af\u5883\u53d8\u91cf\u4f1a\u4e0e\u4e0a\u5c42\u7684\u73af\u5883\u53d8\u91cf\u8fdb\u884c\u5408\u5e76\uff0c\u7136\u540e\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002"),Object(u.b)("h2",{id:"\u6570\u7ec4\u5e03\u5c40-"},"\u6570\u7ec4\u5e03\u5c40 {\ud83d\ude80}"),Object(u.b)("p",null,"\u9700\u8981\u914d\u5408 ",Object(u.b)("inlineCode",{parentName:"p"},"Form.Array")," \u4f7f\u7528"),Object(u.b)("div",{className:"admonition admonition-info alert alert--info"},Object(u.b)("div",{parentName:"div",className:"admonition-heading"},Object(u.b)("h5",{parentName:"div"},Object(u.b)("span",{parentName:"h5",className:"admonition-icon"},Object(u.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(u.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"@alife/hippo-xform")),Object(u.b)("div",{parentName:"div",className:"admonition-content"},Object(u.b)("p",{parentName:"div"},"\u6ce8\u610f\u56e0\u4e3a\u5e95\u5c42\u7ec4\u4ef6\u5e93\u4e0d\u540c\uff0c@alife/hippo-xform \u63d0\u4f9b\u4e86\u4e0d\u540c\u7684 layout \u53c2\u6570\u3002\u8be6\u89c1 ",Object(u.b)("a",{parentName:"p",href:"hippo-xform"},"hippo-xform"),"."))),Object(u.b)("h3",{id:"arraycard"},Object(u.b)("inlineCode",{parentName:"h3"},"arrayCard")),Object(u.b)("p",null,"{\ud83d\ude80} \u5361\u7247\u5e03\u5c40"),Object(u.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(u.b)("div",{parentName:"div",className:"admonition-heading"},Object(u.b)("h5",{parentName:"div"},Object(u.b)("span",{parentName:"h5",className:"admonition-icon"},Object(u.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(u.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(u.b)("div",{parentName:"div",className:"admonition-content"},Object(u.b)("p",{parentName:"div"},"\u5361\u7247\u5e03\u5c40 \u4ecd\u5728\u5b8c\u5584\u4e2d\u3002"))),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-tsx"},"interface ArrayCardOptions {\n  title?: string;\n  showItemCount?: boolean;\n  showItemOrder?: boolean;\n  style?: React.CSSProperties;\n}\n")),Object(u.b)("h3",{id:"arraytable"},Object(u.b)("inlineCode",{parentName:"h3"},"arrayTable")),Object(u.b)("p",null,"{\ud83d\ude80} \u8868\u683c\u5e03\u5c40"),Object(u.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(u.b)("div",{parentName:"div",className:"admonition-heading"},Object(u.b)("h5",{parentName:"div"},Object(u.b)("span",{parentName:"h5",className:"admonition-icon"},Object(u.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(u.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(u.b)("div",{parentName:"div",className:"admonition-content"},Object(u.b)("p",{parentName:"div"},"\u8868\u683c\u5e03\u5c40 \u4ecd\u5728\u5b8c\u5584\u4e2d\u3002"))),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-tsx"},"interface ArrayTableOptions {\n  defaultColumnWidth?: number;\n  operationColumn?: Partial<Column>;\n  orderColumn?: Partial<Column>;\n  style?: React.CSSProperties;\n  className?: string;\n}\n")),Object(u.b)("h2",{id:"\u6a21\u578b\u4e0e\u5de5\u5177"},"\u6a21\u578b\u4e0e\u5de5\u5177"),Object(u.b)("h3",{id:"imodel"},Object(u.b)("inlineCode",{parentName:"h3"},"IModel")),Object(u.b)("p",null,"IModel \u7528\u4e8e\u62bd\u8c61\u89c6\u56fe\u4e2d\u7684\u4e00\u7ec4\u63a7\u4ef6\uff0c\u5176\u5bf9\u5e94\u7684\u6570\u636e\u7c7b\u578b\u5f80\u5f80\u662f\u4e00\u4e2a\u5bf9\u8c61\u6216\u4e00\u4e2a\u6570\u7ec4\u3002"),Object(u.b)("p",null,"IModel \u662f\u4e00\u4e2a interface\uff0c ",Object(u.b)("inlineCode",{parentName:"p"},"FormModel"),"\uff08\u6839\u8282\u70b9\uff09\u548c ",Object(u.b)("inlineCode",{parentName:"p"},"SubModel"),"\uff08\u5b50\u8282\u70b9\uff09 \u5b9e\u73b0\u4e86\u8be5 interface."),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.getSubModel(name): SubModel")," \u83b7\u53d6\u4e00\u4e2a\u5b50\u6a21\u578b"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.getField(name): Field")," \u83b7\u53d6 name \u5bf9\u5e94\u7684\u5b57\u6bb5\u5bf9\u8c61"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.root: FormModel")," \u6307\u5411\u6839\u8282\u70b9 FormModel"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.path: string[]")," \u4ece FormModel \u5230\u5f53\u524d model \u7684\u6570\u636e\u8def\u5f84"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.parent: IModel")," \u6307\u5411\u4e0a\u4e00\u7ea7\u7684 model"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.values")," \u6a21\u578b\u4e0a\u7684\u6570\u636e\uff0c\u8fd9\u662f\u4e00\u4e2a mobx computed \u5b57\u6bb5"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.getValue(name, defaultValue)")," \u4ee5\u5f53\u524d\u6a21\u578b\u4e3a\u8d77\u59cb\u8def\u5f84\uff0c\u8bfb\u53d6 name \u5904\u7684\u6570\u636e"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.setValue(name, value)")," \u4ee5\u5f53\u524d\u6a21\u578b\u4e3a\u8d77\u59cb\u8def\u5f84\uff0c\u4fee\u6539 name \u5904\u7684\u6570\u636e"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.state")," \u6a21\u578b\u7ea7\u522b\u7684\u72b6\u6001\uff0c\u8fd9\u662f\u4e00\u4e2a mobx observable \u5bf9\u8c61\uff0c\u9ed8\u8ba4\u4e3a ",Object(u.b)("inlineCode",{parentName:"li"},"{}"),"\uff0c\u4e00\u822c\u7528\u6765\u7ba1\u7406\u4e00\u4e9b\u8868\u5355\u7684 UI \u72b6\u6001\u3002"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.id: string")," \u6a21\u578b\u5728\u6240\u5c5e FormModel \u5185\u7684\u552f\u4e00 id"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"model.getTupleField(...names): Field")," \u83b7\u53d6",Object(u.b)("a",{parentName:"li",href:"advanced#%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84"},"\u591a\u4e2a name \u7ec4\u5408\u800c\u6210\u7684\u5143\u7956\u5b57\u6bb5"),Object(u.b)("ul",{parentName:"li"},Object(u.b)("li",{parentName:"ul"},"\u6ce8\u610f\u8be5\u65b9\u6cd5\u6682\u4e0d\u652f\u6301\u4f7f\u7528 ",Object(u.b)("inlineCode",{parentName:"li"},".")," \u6765\u8868\u793a\u5d4c\u5957\u6570\u636e\u7d22\u5f15")))),Object(u.b)("h3",{id:"field"},Object(u.b)("inlineCode",{parentName:"h3"},"Field")),Object(u.b)("p",null,"Field \u7528\u4e8e\u62bd\u8c61\u89c6\u56fe\u4e2d\u7684\u5355\u4e2a\u63a7\u4ef6\uff0c\u5176\u5bf9\u5e94\u7684\u6570\u636e\u7c7b\u578b\u5f80\u5f80\u662f\u7b80\u5355\u7684\u6570\u5b57\u6216\u5b57\u7b26\u4e32\u3002"),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.value")," \u8bfb\u53d6\u6216\u8bbe\u7f6e\u5b57\u6bb5\u7684\u503c\uff0c\u8fd9\u662f\u4e00\u4e2a mobx computed \u5b57\u6bb5"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.state")," \u5b57\u6bb5\u72b6\u6001\uff0c\u8fd9\u662f\u4e00\u4e2a mobx observable \u5bf9\u8c61\uff0c\u9ed8\u8ba4\u4e3a ",Object(u.b)("inlineCode",{parentName:"li"},"{}"),"\u3002",Object(u.b)("ul",{parentName:"li"},Object(u.b)("li",{parentName:"ul"},"\u76ee\u524d\uff0c\u6211\u4eec\u7ea6\u5b9a\u4e86\u4ee5\u4e0b\u5c5e\u6027\u7684\u542b\u4e49\uff1a",Object(u.b)("ul",{parentName:"li"},Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.state.error")," \u8be5\u5b57\u6bb5\u4e0a\u7684\u9519\u8bef\u6d88\u606f\uff0c\u5f53 error \u5b57\u6bb5\u6709\u503c\u65f6\uff0c\u9875\u9762\u4e2d\u5c31\u4f1a\u5c55\u793a\u5bf9\u5e94\u7684\u51fa\u9519\u63d0\u793a"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.state.validating")," \u662f\u5426\u6b63\u5728\u6267\u884c\u6821\u9a8c"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.state.cancelValidation()")," \u53d6\u6d88\u4e0a\u6b21\u6821\u9a8c\u7684\u65b9\u6cd5"))))),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.config")," \u5b57\u6bb5\u914d\u7f6e\u4fe1\u606f\uff0c\u53cd\u6620\u8be5\u5b57\u6bb5\u5bf9\u5e94\u7684\u63a7\u4ef6\u6700\u8fd1\u4e00\u6b21\u88ab\u6e32\u67d3\u65f6 React Element \u4e0a\u7684 props"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.id: string")," \u5b57\u6bb5\u5728\u6240\u5c5e\u8868\u5355\u5185\u7684\u552f\u4e00 id"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.isMounted: boolean")," \u5bf9\u5e94\u7684\u63a7\u4ef6\u662f\u5426\u6e32\u67d3\u5728\u89c6\u56fe\u4e2d"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.path: string[]")," \u4ece FormModel \u5230\u8be5\u5b57\u6bb5\u7684\u5b8c\u6574\u8def\u5f84"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.parent: IModel")," \u6307\u5411\u4e0a\u4e00\u7ea7\u7684 model"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.getFork(forkName): Field")," \u83b7\u53d6 field fork\uff0c\u8be6\u89c1 ",Object(u.b)("a",{parentName:"li",href:"advanced#%E7%9B%B8%E5%90%8C%E6%95%B0%E6%8D%AE%E7%B4%A2%E5%BC%95%E5%AF%B9%E5%BA%94%E5%A4%9A%E4%B8%AA%E8%A7%86%E5%9B%BE"},"\u76f8\u540c\u6570\u636e\u7d22\u5f15\u5bf9\u5e94\u591a\u4e2a\u89c6\u56fe")),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.validate(trigger): Promise<string | undefined>")," \u6267\u884c\u6307\u5b9a\u5b57\u6bb5\u4e0a\u7684\u6821\u9a8c\uff0c\u8fd4\u56de ",Object(u.b)("inlineCode",{parentName:"li"},"Promise<string>")," \u8868\u793a\u62a5\u9519\u4fe1\u606f\uff1btrigger \u7528\u4e8e\u6307\u5b9a\u6240\u8981\u6821\u9a8c\u89e6\u53d1\u7684\u6765\u6e90\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e3a ",Object(u.b)("inlineCode",{parentName:"li"},"'*'"),"\u3002"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.handleBlur()")," \u5904\u7406\u63a7\u4ef6 blur \u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570"),Object(u.b)("li",{parentName:"ul"},Object(u.b)("inlineCode",{parentName:"li"},"field.handleChange(nextValue: any)")," \u5904\u7406 value \u4fee\u6539\u7684\u56de\u8c03\u51fd\u6570")),Object(u.b)("h3",{id:"modelutilsclearerror"},Object(u.b)("inlineCode",{parentName:"h3"},"modelUtils.clearError")),Object(u.b)("p",null,Object(u.b)("inlineCode",{parentName:"p"},"modelUtils.clearError(model : IModel): void")),Object(u.b)("p",null,"mobx action. \u6e05\u9664 model \u4e0a\u6240\u6709\u7684\u9519\u8bef\u4fe1\u606f"),Object(u.b)("h3",{id:"modelutilsvalidateall"},Object(u.b)("inlineCode",{parentName:"h3"},"modelUtils.validateAll")),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre"},"modelUtils.validateAll(\n  model: IModel,\n  trigger?: '*' | 'blur' | 'change'\n): Promise<{ hasError: boolean, errors: any }>\n")),Object(u.b)("p",null,"mobx action. \u6267\u884c model \u4e0a\u6240\u6709\u7684\u6821\u9a8c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a Promise \u8868\u793a\u6240\u6709\u7684\u62a5\u9519\u4fe1\u606f\uff1btrigger \u7528\u4e8e\u6307\u5b9a\u6240\u8981\u6267\u884c\u7684 validate\uff0c\u9ed8\u8ba4\u4e3a ",Object(u.b)("inlineCode",{parentName:"p"},"'*'"),"\u3002"),Object(u.b)("h3",{id:"modelutilssubmit"},Object(u.b)("inlineCode",{parentName:"h3"},"modelUtils.submit")),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre"},"modelUtils.submit(\n  model: IModel,\n  options?: {\n    valueFilter?: 'mounted' | 'all',\n    onError?: Function,\n    onSubmit?: Function,\n  }\n): void\n")),Object(u.b)("p",null,"mobx action. \u4e3b\u52a8\u89e6\u53d1 ",Object(u.b)("a",{parentName:"p",href:"#formsubmit"},Object(u.b)("inlineCode",{parentName:"a"},"Form.Submit"))," \u88ab\u70b9\u51fb\u7684\u6d41\u7a0b\u3002 options.valueFilter \u53ef\u4ee5\u63a7\u5236 submit \u56de\u586b\u54ea\u4e9b\u503c\u3002"),Object(u.b)("h3",{id:"modelutilsreset"},Object(u.b)("inlineCode",{parentName:"h3"},"modelUtils.reset")),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre"},"modelUtils.reset(\n  model: IModel,\n  options?: {\n    onReset?: Function,\n  }\n): void\n")),Object(u.b)("p",null,"mobx action. \u4e3b\u52a8\u89e6\u53d1 ",Object(u.b)("a",{parentName:"p",href:"#formreset"},Object(u.b)("inlineCode",{parentName:"a"},"Form.Reset"))," \u88ab\u70b9\u51fb\u7684\u6d41\u7a0b\u3002"),Object(u.b)("h3",{id:"createformitem"},Object(u.b)("inlineCode",{parentName:"h3"},"createFormItem")),Object(u.b)("p",null,"{\ud83d\ude80} ",Object(u.b)("inlineCode",{parentName:"p"},"createFormItem(options: FormItemCreationOptions): FormItem")),Object(u.b)("p",null,"\u521b\u5efa\u8868\u5355\u9879\u7ec4\u4ef6\u3002"),Object(u.b)("p",null,Object(u.b)("strong",{parentName:"p"},"\u7528\u6cd5\u793a\u4f8b")),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-jsx"},'// \u81ea\u5b9a\u4e49\u7ec4\u4ef6\nconst CitySelect = ({ value, onChange, onBlur }) => {\n  return (\n    <div>\n      <p>\u8bf7\u9009\u62e9\u5c45\u4f4f\u57ce\u5e02\uff1a</p>\n      <Select value={value} onChange={onChange} onBlur={onBlur} dataSource={CITY_LIST} />\n    </div>\n  );\n};\n\n// \u4f7f\u7528 createFormItem \u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49 FormItem\nconst CustomFormItem = createFormItem({\n  name: \'myCitySelect\',\n  component: CitySelect,\n  isEmpty(value) {\n    return value == null;\n  },\n  fallbackValue: null,\n});\n\n// \u50cf\u666e\u901a FormItem \u4e00\u6837\u4f7f\u7528 CustomFormItem\n<Form>\n  <FormItem component="input" label="\u59d3\u540d" name="name" validate={isValidateName} />\n  <CustomFormItem label="\u57ce\u5e02" name="city" validate={isValidCity} />\n</Form>;\n')),Object(u.b)("p",null,Object(u.b)("strong",{parentName:"p"},"\u7c7b\u578b\u4fe1\u606f\uff1a")),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-tsx"},"export interface FormItemCreationOptions {\n  /** \u540d\u79f0 */\n  name: string;\n\n  /** \u63a7\u4ef6\u5bf9\u5e94\u7684 React \u7ec4\u4ef6\uff0c\u4f8b\u5982 `<FormItem component=\"select\" />` \u5bf9\u5e94 `Select` \u7ec4\u4ef6. */\n  component?: React.ComponentType<FormItemComponentProps>;\n\n  /** \u63a7\u4ef6\u6e32\u67d3\u65b9\u6cd5\uff0c\u4e0e component \u53c2\u6570\u4e8c\u9009\u4e00\uff0c\u4f18\u5148\u7ea7\u9ad8\u4e8e component */\n  render?(arg: FormItemComponentProps): React.ReactElement;\n\n  /** \u7ec4\u4ef6\u503c\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a `'value'` */\n  valuePropName?: string;\n\n  /** \u7ec4\u4ef6\u72b6\u6001\u503c\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a `'status'` */\n  statusPropName?: string;\n\n  /** \u9884\u89c8\u6001\u4e0b\u7ec4\u4ef6\u7684\u6e32\u67d3\u65b9\u6cd5\u3002\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u65b9\u6cd5\uff0c\u9884\u89c8\u6001\u4e0b\u5c06\u4f7f\u7528 render/component \u4f5c\u4e3a\u540e\u5907\u65b9\u6848. */\n  renderPreview?(props: FormItemComponentProps): React.ReactNode;\n\n  /** \u5f53\u6a21\u578b\u4e2d\u7684\u5b57\u6bb5\u503c\u4e3a\u7a7a\uff08undefined\uff09\u65f6\uff0c\u6e32\u67d3\u63a7\u4ef6\u6240\u4f7f\u7528\u7684\u503c */\n  fallbackValue: any;\n\n  /** \u7ec4\u4ef6\u7c7b\u578b\u9ed8\u8ba4\u7684\u7a7a\u503c\u5224\u65ad\u65b9\u6cd5 */\n  isEmpty(value: any): boolean;\n}\n")),Object(u.b)("h3",{id:"formitemregister"},Object(u.b)("inlineCode",{parentName:"h3"},"FormItem.register")),Object(u.b)("p",null,"{\ud83d\ude80} ",Object(u.b)("inlineCode",{parentName:"p"},"FormItem.register(options: FormItemCreationOptions): void")),Object(u.b)("p",null,"\u5411 FormItem \u4e2d\u6ce8\u518c\u65b0\u7684\u7ec4\u4ef6\u3002 options \u53c2\u6570\u7c7b\u578b\u89c1\u4e0a\u65b9\u3002 ",Object(u.b)("inlineCode",{parentName:"p"},"options.name")," \u4f1a\u4e0e\u5df2\u6709\u7684\u7ec4\u4ef6\u5171\u4eab\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\uff0c\u6ce8\u610f\u907f\u514d\u51b2\u7a81\u3002"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-jsx"},'// \u81ea\u5b9a\u4e49\u7ec4\u4ef6\nconst CitySelect = ({ value, onChange, onBlur }) => {\n  return (\n    <div>\n      <p>\u8bf7\u9009\u62e9\u5c45\u4f4f\u57ce\u5e02\uff1a</p>\n      <Select value={value} onChange={onChange} onBlur={onBlur} dataSource={CITY_LIST} />\n    </div>\n  );\n};\n\n// \u6ce8\u518c\nFormItem.register({\n  name: \'myCitySelect\',\n  component: CitySelect,\n  isEmpty(value) {\n    return value == null;\n  },\n  fallbackValue: null,\n});\n\n// \u4f7f\u7528\n<FormItem component="myCitySelect" name="city" label="\u57ce\u5e02" />;\n')),Object(u.b)("h3",{id:"asyncvalue"},Object(u.b)("inlineCode",{parentName:"h3"},"AsyncValue")),Object(u.b)("p",null,Object(u.b)("inlineCode",{parentName:"p"},"new AsyncValue<T>(fetcher: () => Promise<T>, initValue?: T)")),Object(u.b)("p",null,"\u57fa\u4e8e ",Object(u.b)("inlineCode",{parentName:"p"},"fetcher")," \u521b\u5efa\u5b9a\u4e49\u4e00\u4e2a AsyncValue\uff0c\u7528\u4e8e\u58f0\u660e\u5f0f\u5730\u5b9a\u4e49\u5f02\u6b65\u6570\u636e\u6e90\u3002"),Object(u.b)("p",null,"\u5f53 asyncValue \u7684 value/status/error \u88ab\u8ba2\u9605\u65f6\uff0cfetcher \u5c06\u88ab\u9996\u6b21\u8c03\u7528\uff0c\u5176\u8fd4\u56de\u7ed3\u679c\u5c06\u4f5c\u4e3a ",Object(u.b)("inlineCode",{parentName:"p"},"asyncValue.current")," \u7684\u503c\u3002"),Object(u.b)("p",null,"\u8c03\u7528 fetcher \u7684\u8fc7\u7a0b\u4e2d\u4f1a\u8fdb\u884c\u4f9d\u8d56\u6536\u96c6\uff0c\u6bcf\u5f53\u8fd9\u4e9b\u4f9d\u8d56\u7684\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0cfetcher \u90fd\u4f1a\u88ab\u91cd\u65b0\u89e6\u53d1\u3002 \u5177\u4f53\u89c4\u5219\uff1a"),Object(u.b)("ol",null,Object(u.b)("li",{parentName:"ol"},"\u6bcf\u6b21 fetcher \u88ab\u8c03\u7528\u65f6\uff0c status \u5c31\u4f1a\u53d8\u4e3a loading\uff0c\u5e76\u7b49\u5f85 fetcher \u8fd4\u56de\u7684 Promise resolve \u6216 reject\uff1b"),Object(u.b)("li",{parentName:"ol"},"\u5f53 fetcher \u8fd4\u56de\u7684 Promise resolve \u65f6\uff0c status \u53d8\u4e3a ready\uff0c\u540c\u65f6 current \u5b57\u6bb5\u53d8\u4e3a\u6700\u65b0\u7684\u503c\uff1b"),Object(u.b)("li",{parentName:"ol"},"\u5f53 fetcher \u8fd4\u56de\u7684 Promise reject \u65f6\uff0c status \u53d8\u4e3a error\uff0c\u540c\u65f6 error \u5b57\u6bb5\u8bb0\u5f55\u672c\u6b21\u9519\u8bef\uff1b"),Object(u.b)("li",{parentName:"ol"},"\u5f53 fetcher \u8fd4\u56de\u7684 Promise \u4ecd\u5904\u4e8e pending \u72b6\u6001\u65f6\uff0c\u82e5 fetcher \u518d\u6b21\u88ab\u8c03\u7528\uff0c\u5df2\u6709\u7684 promise \u5c06\u88ab\u5ffd\u7565\uff0c\u5e76\u56de\u5230 1.")),Object(u.b)("p",null,"AsyncValue \u4e2d\u7684\u5c5e\u6027\u4e0e\u65b9\u6cd5\uff1a"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-tsx"},"export interface AsyncValue<T> {\n  /** \u72b6\u6001\uff0c\u53ef\u4e3a\u4ee5\u4e0b\u503c 'loading' | 'ready' | 'error' */\n  readonly status: AsyncValueStatus;\n\n  /** \u5f53\u524d\u503c */\n  readonly current: T;\n\n  /** \u9519\u8bef */\n  readonly error?: any;\n\n  /** \u9500\u6bc1 AsyncValue */\n  dispose(): void;\n\n  /** \u91cd\u65b0\u89e6\u53d1 fetcher */\n  refresh(): void;\n}\n")))}f.isMDXComponent=!0},207:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return Z})),n.d(t,"i",(function(){return X})),n.d(t,"c",(function(){return Ne})),n.d(t,"e",(function(){return Ee})),n.d(t,"g",(function(){return Ae})),n.d(t,"h",(function(){return T})),n.d(t,"f",(function(){return Ve})),n.d(t,"a",(function(){return U}));var a=n(191),r=n(194),l=n(189),i=n.n(l),o=n(230),u=n.n(o),c=n(175),d=n(0),m=n.n(d);function s(e){return String(Number.parseInt(e))===e}function p(e){return s(e)?"array":"object"}function b(e,t,n){for(var a=Array.isArray(t)?t:y(t),r=e,l=0;l<a.length;l+=1){if(!c.i(r))return n;r=c.g(r,a[l])}return void 0===r?n:r}function f(e,t,n){for(var a=Array.isArray(t)?t:y(t),r=a.length-1,l=e,i=0;i<r;i+=1){var o=a[i];if(null==c.g(l,o)&&(s(a[i+1])?c.q(l,o,[]):c.q(l,o,{})),l=c.g(l,o),!c.i(l))return}c.i(l)&&c.q(l,a[r],n)}function h(e,t){return void 0!==e?e:t}function y(e){return e.split(".")}try{p.displayName="keyToValueShape",p.__docgenInfo={description:"",displayName:"keyToValueShape",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#keyToValueShape"]={docgenInfo:p.__docgenInfo,name:"keyToValueShape",path:"../xform/src/common-utils.tsx#keyToValueShape"})}catch(Te){}try{b.displayName="observableGetIn",b.__docgenInfo={description:"lodash.get(...) for mobx observables",displayName:"observableGetIn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#observableGetIn"]={docgenInfo:b.__docgenInfo,name:"observableGetIn",path:"../xform/src/common-utils.tsx#observableGetIn"})}catch(Te){}try{f.displayName="observableSetIn",f.__docgenInfo={description:"lodash.set(...) for mobx observables",displayName:"observableSetIn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#observableSetIn"]={docgenInfo:f.__docgenInfo,name:"observableSetIn",path:"../xform/src/common-utils.tsx#observableSetIn"})}catch(Te){}try{h.displayName="composeState",h.__docgenInfo={description:"\u5408\u5e76\u53d7\u63a7\u72b6\u6001\u548c \u975e\u53d7\u63a7\u72b6\u6001",displayName:"composeState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#composeState"]={docgenInfo:h.__docgenInfo,name:"composeState",path:"../xform/src/common-utils.tsx#composeState"})}catch(Te){}try{y.displayName="splitToPath",y.__docgenInfo={description:"",displayName:"splitToPath",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/common-utils.tsx#splitToPath"]={docgenInfo:y.__docgenInfo,name:"splitToPath",path:"../xform/src/common-utils.tsx#splitToPath"})}catch(Te){}var O=function(){function e(e){this.fieldMap=new Map,this.model=e,this.valueShape="auto"}var t=e.prototype;return t._updateValueShape=function(e){"auto"===this.valueShape?(this.valueShape=e,this.subModels="object"===e?{}:[]):u()(this.valueShape===e,"[xform] Model \u7684\u7ed3\u6784\u9700\u8981\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u4fdd\u6301\u4e00\u81f4\uff0c\u4e00\u4e2a\u6570\u636e\u7d22\u5f15\u5bf9\u5e94\u7684\u7ed3\u6784\u4e0d\u80fd\u4ece\u6570\u7ec4\u53d8\u4e3a\u5bf9\u8c61\uff0c\u4e5f\u4e0d\u80fd\u4ece\u5bf9\u8c61\u53d8\u4e3a\u6570\u7ec4")},t.iterateModels=function(e){!function t(n){if(null!=n.subModels)for(var a=0,r=Object.values(n.subModels);a<r.length;a++){var l=r[a];e(l),t(l._proxy)}}(this)},t.iterateFields=function(e){this.fieldMap.forEach((function(t){t._forkMap.forEach(e)})),this.iterateModels((function(t){t._proxy.fieldMap.forEach((function(t){t._forkMap.forEach(e)}))}))},t.getSubModel=function(e){for(var t=Array.isArray(e)?e:y(e),n=this.model,a=0;a<t.length-1;a++)n=n._proxy._getSubModel(t[a]);return n._proxy._getSubModel(t[t.length-1])},t._getSubModel=function(e){this._updateValueShape(p(e));var t=this.subModels[e];return null==t&&(t=new j(this.model,e),this.subModels[e]=t),t},t.getField=function(e){var t=Array.isArray(e)?e:y(e);if(t.length>1){var n=t[t.length-1];return this.getSubModel(t.slice(0,-1))._proxy.getField([n])}var a=t[0];return this._updateValueShape(p(a)),this.ensureField(a)},t.ensureField=function(e,t,n){var a=this.fieldMap.get(e);return null==a&&(a=new S(this.model,e,t,n),this.fieldMap.set(e,a)),a},t.getTupleField=function(){this._updateValueShape("object");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join("...");return this.ensureField(a,S.ORIGINAL,t)},e}(),v=[],g=function(){function e(e){void 0===e&&(e={}),this._nextModelId=1,this._nextFieldId=1,this.state={},this.root=this,this.parent=this,this.path=v,this._proxy=new O(this),this.values=e,Object(c.k)(this,{values:c.l,state:c.l,setValue:c.c})}var t=e.prototype;return t.getNextModelId=function(){return"Model_"+this._nextModelId++},t.getNextFieldId=function(){return"Field_"+this._nextFieldId++},t.getValue=function(e,t){return b(this.values,String(e),t)},t.setValue=function(e,t){f(this.values,e,t)},t.getSubModel=function(e){return this._proxy.getSubModel(String(e))},t.getField=function(e){return this._proxy.getField(e)},t.getTupleField=function(){var e;return(e=this._proxy).getTupleField.apply(e,arguments)},t._asField=function(){throw new Error("FormModel \u4e0b\u4e0d\u652f\u6301\u4f7f\u7528 name=& \u7684 Field")},e}(),j=function(){function e(e,t){this.state={},u()(!t.includes("."),"name \u4e2d\u4e0d\u80fd\u5305\u542b ."),this.root=e.root,this.parent=e,this.name=t,this._proxy=new O(this),this.id=this.root.getNextModelId(),Object(c.k)(this,{values:c.d,state:c.l,setValue:c.c,name:c.l},{name:this.id+"("+this.name+")"})}var t=e.prototype;return t.getSubModel=function(e){return this._proxy.getSubModel(String(e))},t.getField=function(e){return this._proxy.getField(String(e))},t.getTupleField=function(){var e;return(e=this._proxy).getTupleField.apply(e,arguments)},t.getValue=function(e,t){return b(this.values,String(e),t)},t.setValue=function(e,t){null==this.values&&(this._proxy._updateValueShape(p(y(String(e))[0])),this.values="array"===this._proxy.valueShape?[]:{}),f(this.values,String(e),t)},t._asField=function(){return this.parent.getField(this.name)},Object(r.a)(e,[{key:"path",get:function(){return[].concat(this.parent.path,[this.name])}},{key:"values",get:function(){return this.parent.getValue(this.name)},set:function(e){this.parent.setValue(this.name,e)}}]),e}(),S=function(){function e(t,n,a,r){var l=this;if(void 0===a&&(a=e.ORIGINAL),this.config=null,this.isMounted=!1,this.state={},this.handleBlur=function(){return l.validate("blur")},this.handleChange=function(e){var t;return l.value=h(e,null===(t=l.config)||void 0===t?void 0:t.fallbackValue),l.validate("change")},this.parent=t,this.name=n,this.forkName=a,this.tupleParts=r,this.id=this.parent.root.getNextFieldId(),Object(c.k)(this,{state:c.l,value:c.d,path:c.d,validate:c.c,handleBlur:c.c,handleChange:c.c},{name:this.id+"("+n+(a===e.ORIGINAL?"":"#"+a)+")"}),a===e.ORIGINAL)this._forkMap=new Map;else{var i=this.parent.getField(n);this._forkMap=i._forkMap}this._forkMap.set(a,this)}var t=e.prototype;return t._useTrack=function(e){var t=this;Object(d.useLayoutEffect)((function(){if(!t.isMounted)return t.config=e,t.isMounted=!0,function(){t.config=null,t.isMounted=!1};console.warn("[xform] field `"+t.path.join(".")+"` \u5df2\u5728\u89c6\u56fe\u4e2d\u88ab\u52a0\u8f7d\uff0c\u4f60\u9700\u8981 fork \u8be5\u5b57\u6bb5\u6765\u8fdb\u884c\u591a\u6b21\u52a0\u8f7d.")}),[e])},t.getFork=function(t){return this._forkMap.has(t)?this._forkMap.get(t):new e(this.parent,this.name,t,this.tupleParts)},t.validate=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,l,o,u,d,m,s,p,b,f,y,O,v,g,j=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t="*"),this.isMounted){e.next=3;break}return e.abrupt("return");case 3:if(l=this.config,o=l.validate,u=l.fallbackValue,d=l.isEmpty,m=l.required,s=l.requiredMessage,p=void 0===s?"\u8be5\u5b57\u6bb5\u4e3a\u5fc5\u586b\u9879":s,b=l.validateOnMount,f=l.validateOnBlur,y=l.validateOnChange,O=h(this.value,u),"*"===t||f&&"blur"===t||b&&"mount"===t||y&&"change"===t){e.next=8;break}return e.abrupt("return");case 8:return v=function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m||!d(O)){e.next=2;break}return e.abrupt("return",p);case 2:if(!o){e.next=4;break}return e.abrupt("return",o(O,j,t));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=!1,null===(r=(n=this.state).cancelValidation)||void 0===r||r.call(n),this.state.validating=!0,this.state.cancelValidation=Object(c.c)((function(){g=!0,j.state.cancelValidation=null,j.state.validating=!1})),e.abrupt("return",v().then(Object(c.c)((function(e){if(!g)return j.state.cancelValidation=null,j.state.validating=!1,j.state.error=e,e}))));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Object(r.a)(e,[{key:"value",get:function(){var e=this;return this.tupleParts?this.tupleParts.map((function(t){return e.parent.getValue(t)})):this.parent.getValue(this.name)},set:function(e){var t=this;this.tupleParts?this.tupleParts.forEach((function(n,a){t.parent.setValue(n,e[a])})):this.parent.setValue(this.name,e)}},{key:"path",get:function(){return this.parent.path.concat([this.name])}}]),e}();S.ORIGINAL="original";var N,_,C=n(8),x=n(186),V=n(172),F=n(170),E=n(177),I=n(174),A=n.n(I),R=n(26),T={clearError:Object(c.c)((function(e){e._proxy.iterateFields((function(e){e.state.error=null}))})),validateAll:Object(c.c)((function(e,t){void 0===t&&(t="*");var n=!1,a=Object(c.l)("array"===e._proxy.valueShape?[]:{}),r=[];return e._proxy.iterateFields((function(e){e.isMounted&&r.push(e.validate(t).then(Object(c.c)((function(t){t&&(n=!0,f(a,e.path,t))}))))})),Promise.all(r).then((function(){return{hasError:n,errors:Object(c.r)(a)}}))})),submit:Object(c.c)(function(){var e=Object(a.a)(i.a.mark((function e(t,n){var a,r,l,o,u,d,m,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),r=(a=n).onError,l=a.onSubmit,o=a.valueFilter,u=void 0===o?"mounted":o,e.next=4,T.validateAll(t);case 4:d=e.sent,m=d.hasError,s=d.errors,m?null==r||r(s,t):"function"==typeof l&&("all"===u?l(Object(c.r)(t.values),t):Object(c.p)((function(){var e=Object(c.l)("array"===t._proxy.valueShape?[]:{});t._proxy.iterateFields((function(t){t.isMounted&&void 0!==t.value&&f(e,t.path,t.value)})),l(Object(c.r)(e),t)})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),reset:Object(c.c)((function(e,t){var n=(void 0===t?{}:t).onReset;e.values={},T.clearError(e),null==n||n(e)}))};function w(e){return"number"==typeof e?e+"px":e}var q=R.d.div(N||(N=Object(V.a)(["\n  --label-width: auto;\n  --control-width: auto;\n  --form-item-gap: 0;\n  font-size: 12px;\n\n  .form-item {\n    margin-bottom: var(--form-item-gap);\n  }\n\n  .form-item.minimal {\n    margin-bottom: 0;\n\n    > .error-message,\n    > .form-item-label {\n      display: none;\n    }\n  }\n\n  &.horizontal {\n    .form-item {\n      display: flex;\n    }\n\n    .form-item-label {\n      flex: 0 0 var(--label-width);\n      padding-top: 8px;\n      padding-right: 12px;\n      text-align: right;\n      line-height: 1.5;\n    }\n  }\n\n  &.vertical {\n    .form-item-label {\n      font-size: 12px;\n      line-height: 1.5;\n      margin-bottom: 4px;\n    }\n  }\n\n  .form-item-preview {\n    > .form-item-label {\n      padding-top: 0;\n    }\n    > .form-item-control {\n      line-height: 1.5;\n    }\n  }\n\n  .required-indicator {\n    margin-right: 4px;\n    color: #eb4141;\n    ::before {\n      content: '*';\n    }\n  }\n\n  .error-message {\n    margin-top: 4px;\n    color: #eb4141;\n  }\n\n  .tip {\n    margin-left: 4px;\n    color: #999;\n    height: 18px;\n    vertical-align: top;\n  }\n\n  .help {\n    color: #999999;\n    margin-top: 4px;\n    line-height: 1.5;\n  }\n\n  .form-item-control {\n    width: var(--control-width);\n\n    > .next-input,\n    > .next-select {\n      width: 100%;\n    }\n\n    > .next-range {\n      padding: 8px 0;\n    }\n\n    > .next-checkbox-group,\n    > .next-radio-group,\n    > .next-checkbox-wrapper {\n      display: inline-block;\n      line-height: 18px;\n    }\n  }\n\n  &.horizontal .form-item-control {\n    > .next-checkbox-group,\n    > .next-radio-group,\n    > .next-checkbox-wrapper {\n      padding-top: 8px;\n    }\n  }\n"])));function P(e){var t=e.children,n=e.className,a=e.style,r=e.labelPosition,l=void 0===r?"left":r,i=e.labelWidth,o=void 0===i?"left"===l?120:"auto":i,u=e.formItemGap,c=void 0===u?"left"===l?12:16:u,d=e.controlWidth,s=void 0===d?320:d;return m.a.createElement(q,{style:Object.assign({"--label-width":w(o),"--control-width":w(s),"--form-item-gap":w(c)},a),className:A()({horizontal:"left"===l,vertical:"top"===l},n)},t)}var M=R.d.div(_||(_=Object(V.a)(["\n  ",".horizontal & {\n    display: flex;\n  }\n\n  &.inline {\n    .form-item-group-content {\n      display: flex;\n    }\n  }\n"])),q),k=function(e){var t=e.label,n=e.asterisk,a=e.tip,r=e.children,l=e.labelWidth,i=e.controlWidth,o=e.className,u=e.style,c=e.inline,d=J().isPreview;return m.a.createElement(M,{className:A()("form-item-group",{inline:c,"form-item-preview":d},o),style:u},null==t&&null==a?null:m.a.createElement("div",{className:"form-item-label"},n&&m.a.createElement("span",{className:"required-indicator"}),t&&m.a.createElement("span",{className:"form-item-label-text"},t),a&&m.a.createElement(B,{title:a})),m.a.createElement("div",{className:"form-item-group-content",style:{"--label-width":w(l),"--control-width":w(i)}},r))},B=function(e){var t=e.title;return m.a.createElement(F.Tooltip,{interactionKind:"hover",title:t,renderTarget:function(e){return m.a.createElement(E.b,Object.assign({},e,{type:"prompt",className:"tip"}))}})};function L(e){var t=e.label,n=e.help,a=e.tip,r=e.asterisk,l=e.error,i=e.children,o=e.className,u=e.style;return m.a.createElement("div",{className:A()("form-item",o),style:u},null==t&&null==a?null:m.a.createElement("div",{className:"form-item-label"},r&&m.a.createElement("span",{className:"required-indicator"}),t&&m.a.createElement("span",{className:"form-item-label-text"},t),a&&m.a.createElement(B,{title:a})),m.a.createElement("div",{className:"form-item-control"},i,n&&m.a.createElement("div",{className:"help"},n),l&&m.a.createElement("div",{className:"error-message"},l)))}function K(e){var t=e.type,n=void 0===t?"primary":t,a=e.children,r=void 0===a?"\u63d0\u4ea4":a,l=Object(C.a)(e,["type","children"]),i=X(),o=J();return m.a.createElement(F.Button,Object.assign({onClick:function(){return T.submit(i,o)},type:n,children:r},l))}function Y(e){var t=e.children,n=void 0===t?"\u91cd\u7f6e":t,a=Object(C.a)(e,["children"]),r=X(),l=J();return m.a.createElement(F.Button,Object.assign({onClick:Object(c.c)((function(){return T.reset(r,l)})),children:n},a))}try{P.displayName="FormLayout",P.__docgenInfo={description:"",displayName:"FormLayout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},labelPosition:{defaultValue:{value:"left"},description:"\u6807\u7b7e\u4f4d\u7f6e\uff0c\u53ef\u9009 'left' \u6216 'top'",name:"labelPosition",required:!1,type:{name:'"top" | "left"'}},labelWidth:{defaultValue:{value:"labelPosition === 'left' ? 120 : 'auto'"},description:"\u6807\u7b7e\u5bbd\u5ea6",name:"labelWidth",required:!1,type:{name:"string | number"}},controlWidth:{defaultValue:{value:320},description:"\u63a7\u4ef6\u5bbd\u5ea6",name:"controlWidth",required:!1,type:{name:"string | number"}},formItemGap:{defaultValue:{value:"labelPosition === 'left' ? 12 : 16"},description:"\u4e24\u4e2a form item \u4e4b\u95f4\u7684\u95f4\u8ddd",name:"formItemGap",required:!1,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormLayout"]={docgenInfo:P.__docgenInfo,name:"FormLayout",path:"../xform/src/form-ui.tsx#FormLayout"})}catch(Te){}try{L.displayName="FormItemView",L.__docgenInfo={description:"",displayName:"FormItemView",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormItemView"]={docgenInfo:L.__docgenInfo,name:"FormItemView",path:"../xform/src/form-ui.tsx#FormItemView"})}catch(Te){}try{K.displayName="FormSubmit",K.__docgenInfo={description:"",displayName:"FormSubmit",props:{size:{defaultValue:null,description:"\u5c3a\u5bf8",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},shape:{defaultValue:null,description:"\u5916\u89c2",name:"shape",required:!1,type:{name:'"solid" | "text" | "link" | "warning" | "ghost"'}},target:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"target",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:'"a" | "button"'}},type:{defaultValue:{value:"primary"},description:"\u7ea7\u522b",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},href:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"href",required:!1,type:{name:"string"}},leftElement:{defaultValue:null,description:"\u5185\u90e8\u5de6\u4fa7\u5143\u7d20",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"\u5185\u90e8\u53f3\u4fa7\u5143\u7d20",name:"rightElement",required:!1,type:{name:"ReactNode"}},htmlType:{defaultValue:null,description:"html \u539f\u751f\u7c7b\u578b",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"\u6309\u94ae\u957f\u5ea6\u662f\u5426\u5360\u6ee1\u5bb9\u5668",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconButton:{defaultValue:null,description:"\u662f\u5426\u4e3a\u4ec5\u5305\u542b\u5355\u4e2a\u56fe\u6807\u7684\u6309\u94ae",name:"isIconButton",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"\u662f\u5426\u9009\u4e2d/\u6fc0\u6d3b",name:"isSelected",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"\u662f\u5426\u8f7d\u5165\u4e2d",name:"loading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormSubmit"]={docgenInfo:K.__docgenInfo,name:"FormSubmit",path:"../xform/src/form-ui.tsx#FormSubmit"})}catch(Te){}try{Y.displayName="FormReset",Y.__docgenInfo={description:"",displayName:"FormReset",props:{size:{defaultValue:null,description:"\u5c3a\u5bf8",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},shape:{defaultValue:null,description:"\u5916\u89c2",name:"shape",required:!1,type:{name:'"solid" | "text" | "link" | "warning" | "ghost"'}},target:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"target",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:'"a" | "button"'}},type:{defaultValue:null,description:"\u7ea7\u522b",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},href:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"href",required:!1,type:{name:"string"}},leftElement:{defaultValue:null,description:"\u5185\u90e8\u5de6\u4fa7\u5143\u7d20",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"\u5185\u90e8\u53f3\u4fa7\u5143\u7d20",name:"rightElement",required:!1,type:{name:"ReactNode"}},htmlType:{defaultValue:null,description:"html \u539f\u751f\u7c7b\u578b",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"\u6309\u94ae\u957f\u5ea6\u662f\u5426\u5360\u6ee1\u5bb9\u5668",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconButton:{defaultValue:null,description:"\u662f\u5426\u4e3a\u4ec5\u5305\u542b\u5355\u4e2a\u56fe\u6807\u7684\u6309\u94ae",name:"isIconButton",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"\u662f\u5426\u9009\u4e2d/\u6fc0\u6d3b",name:"isSelected",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"\u662f\u5426\u8f7d\u5165\u4e2d",name:"loading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormReset"]={docgenInfo:Y.__docgenInfo,name:"FormReset",path:"../xform/src/form-ui.tsx#FormReset"})}catch(Te){}try{k.displayName="FormItemGroup",k.__docgenInfo={description:"",displayName:"FormItemGroup",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"",name:"labelWidth",required:!1,type:{name:"string | number"}},controlWidth:{defaultValue:null,description:"",name:"controlWidth",required:!1,type:{name:"string | number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-ui.tsx#FormItemGroup"]={docgenInfo:k.__docgenInfo,name:"FormItemGroup",path:"../xform/src/form-ui.tsx#FormItemGroup"})}catch(Te){}var G=n(4),z=n(391),W=n(179),U=function(){function e(t,n){var a=this;this.fetcher=t,this._refreshAtom=Object(c.f)("AsyncValue#refresh"),this._atom=Object(c.f)("AsyncValue"),this._disposers=[],this._error=null,this._start=function(){a._reaction=new c.a("async",(function(){"loading"!==a._status&&(a._status="loading",a._atom.reportChanged()),a._reaction.track((function(){var t,n;null===(t=a._cancelLastGetter)||void 0===t||t.call(a);var r=!1;a._cancelLastGetter=function(){r=!0};var l=null!==(n=a._mobxGlobal.inXFormAsyncValueFetcher)&&void 0!==n&&n;a._mobxGlobal.inXFormAsyncValueFetcher=!0,a._refreshAtom.reportObserved(),a.fetcher().then((function(t){r||Object(c.p)((function(){a._status="ready",t!==e.SKIP&&(a._current=t),a._error=null,a._atom.reportChanged()}))})).catch((function(t){if(!(t instanceof e.StillLoading))throw Object(c.p)((function(){a._status="error",a._error=t,a._atom.reportChanged()})),t})),a._mobxGlobal.inXFormAsyncValueFetcher=l}))})),a._reaction.schedule_()},this._stop=function(){a._reaction&&(a._reaction.dispose(),a._reaction=null)},this.fetcher=t,this._status="loading",this._current=n,Object(c.k)(this,{status:c.d,current:c.d,error:c.d}),this._disposers.push(this._stop),this._disposers.push(Object(c.m)(this._atom,this._start)),this._disposers.push(Object(c.n)(this._atom,this._stop)),this._disposers.push((function(){a._status="ready",a._current=null,a._error=null}))}var t=e.prototype;return t.refresh=function(){this._refreshAtom.reportChanged()},t.dispose=function(){for(var e,t=Object(W.a)(this._disposers);!(e=t()).done;){(0,e.value)()}},Object(r.a)(e,[{key:"_mobxGlobal",get:function(){return Object(c.b)()}},{key:"status",get:function(){return this._atom.reportObserved(),this._status}},{key:"current",get:function(){if(this._mobxGlobal.inXFormAsyncValueFetcher){if(this._atom.reportObserved(),"loading"===status)throw new e.StillLoading;if("error"===status)throw this._error;return this._current}return this._atom.reportObserved(),this._current}},{key:"error",get:function(){return this._atom.reportObserved(),this._error}}]),e}();U.SKIP="AsyncValue@SKIP",U.StillLoading=function(e){function t(){return e.apply(this,arguments)||this}return Object(G.a)(t,e),t}(Object(z.a)(Error));var H=m.a.createContext(null);H.displayName="ModelContext";var D=H.Provider;function X(){return Object(d.useContext)(H)}var $=m.a.createContext({isPreview:!1,validateOnMount:!1,validateOnBlur:!0,validateOnChange:!0});$.displayName="FormEnvContext";var J=function(){return Object(d.useContext)($)},Q=function(e){var t=e.children,n=Object(C.a)(e,["children"]),a=J();return m.a.createElement($.Provider,{value:Object.assign({},a,n)},t)};function Z(e){var t=e.model,n=e.defaultValue,a=e.children,r=e.className,l=e.style,i=e.layout,o=Object(C.a)(e,["model","defaultValue","children","className","style","layout"]),u=h(t,Object(d.useState)((function(){return new g(n)}))[0]);return m.a.createElement(Q,Object.assign({},o),m.a.createElement(D,{value:u},m.a.createElement(P,Object.assign({style:l,className:r},i),a)))}var ee=Object(x.b)((function(e){var t=e.watch,n=e.effect,a=e.fireImmediately,r=X(),l=Object(d.useCallback)((function(e,t){return n(e,{model:r,prev:t,next:e})}),[r,n]);return Object(d.useEffect)((function(){return"string"==typeof t?Object(c.o)((function(){return Object(c.r)(r.getValue(t))}),l,{fireImmediately:a}):"function"==typeof t?Object(c.o)(t,l):t instanceof S?Object(c.o)((function(){return t.value}),l,{fireImmediately:a}):t instanceof U?Object(c.o)((function(){return t.current}),l,{fireImmediately:a}):Array.isArray(t)?Object(c.o)((function(){return t.map((function(e){return"string"==typeof e?Object(c.r)(r.getValue(e)):e instanceof U?e.current:e.value}))}),l,{fireImmediately:a}):void 0}),[r,t,l,a]),null})),te=Object(x.b)((function(e){return(0,e.children)(X())})),ne=Object(x.b)((function(e){var t,n,a=e.name,r=e.children,l=e.layout,i=e.itemFactory,o=X();if("&"===a)throw new Error("XFormArray \u4e0d\u652f\u6301 name=&. path=("+(o.path.join(".")||"root")+")");var u=o.getSubModel(a),c=null!==(n=null===(t=u.values)||void 0===t?void 0:t.length)&&void 0!==n?n:0;return m.a.createElement(D,{value:u},l({arrayModel:u,itemCount:c,itemContent:r,itemFactory:i}))})),ae=Object(x.b)((function(e){var t=e.name,n=e.children,a=X();return"&"===t?m.a.createElement(m.a.Fragment,null,n):m.a.createElement(D,{value:a.getSubModel(t),children:n})}));Z.Submit=K,Z.Reset=Y,Z.Effect=ee,Z.Array=ne,Z.Object=ae,Z.ModelProvider=D,Z.ModelConsumer=te,Z.Layout=P,Z.ItemGroup=k,Z.ItemView=L;try{Z.displayName="Form",Z.__docgenInfo={description:"",displayName:"Form",props:{model:{defaultValue:null,description:"\u53d7\u63a7\u7528\u6cd5\u3002 xform \u6a21\u578b\u5bf9\u8c61\uff0c\u4e00\u822c\u7531\u4e0a\u5c42\u901a\u8fc7 new FormModel(...) \u521b\u5efa\u800c\u6210",name:"model",required:!1,type:{name:"IModel<T>"}},defaultValue:{defaultValue:null,description:"\u975e\u53d7\u63a7\u7528\u6cd5\u3002 \u8868\u5355\u7684\u9ed8\u8ba4\u503c",name:"defaultValue",required:!1,type:{name:"T"}},style:{defaultValue:null,description:"@category \u5e03\u5c40",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"@category \u5e03\u5c40",name:"className",required:!1,type:{name:"string"}},layout:{defaultValue:null,description:"\u8868\u5355\u5e03\u5c40\u53c2\u6570\n@category \u5e03\u5c40",name:"layout",required:!1,type:{name:"FormLayoutParams"}},onSubmit:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onSubmit",required:!1,type:{name:"(submitValues: any, model: IModel<any>) => void"}},onError:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u51fa\u9519\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onError",required:!1,type:{name:"(errors: any, model: IModel<any>) => void"}},onReset:{defaultValue:null,description:"\u6e05\u7a7a\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Reset /> \u4f7f\u7528",name:"onReset",required:!1,type:{name:"(model: IModel<any>) => void"}},isPreview:{defaultValue:{value:"false"},description:"\u662f\u5426\u4e3a\u9884\u89c8\u6001",name:"isPreview",required:!1,type:{name:"boolean"}},validateOnMount:{defaultValue:{value:"false"},description:"\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnMount",required:!1,type:{name:"boolean"}},validateOnChange:{defaultValue:{value:"true"},description:"\u503c\u4fee\u6539\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnChange",required:!1,type:{name:"boolean"}},validateOnBlur:{defaultValue:{value:"true"},description:"\u7ec4\u4ef6\u5931\u53bb\u7126\u70b9\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnBlur",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form"]={docgenInfo:Z.__docgenInfo,name:"Form",path:"../xform/src/form.tsx#Form"})}catch(Te){}try{Z.Submit.displayName="Form.Submit",Z.Submit.__docgenInfo={description:"",displayName:"Form.Submit",props:{size:{defaultValue:null,description:"\u5c3a\u5bf8",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},shape:{defaultValue:null,description:"\u5916\u89c2",name:"shape",required:!1,type:{name:'"solid" | "text" | "link" | "warning" | "ghost"'}},target:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"target",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:'"a" | "button"'}},type:{defaultValue:{value:"primary"},description:"\u7ea7\u522b",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},href:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"href",required:!1,type:{name:"string"}},leftElement:{defaultValue:null,description:"\u5185\u90e8\u5de6\u4fa7\u5143\u7d20",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"\u5185\u90e8\u53f3\u4fa7\u5143\u7d20",name:"rightElement",required:!1,type:{name:"ReactNode"}},htmlType:{defaultValue:null,description:"html \u539f\u751f\u7c7b\u578b",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"\u6309\u94ae\u957f\u5ea6\u662f\u5426\u5360\u6ee1\u5bb9\u5668",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconButton:{defaultValue:null,description:"\u662f\u5426\u4e3a\u4ec5\u5305\u542b\u5355\u4e2a\u56fe\u6807\u7684\u6309\u94ae",name:"isIconButton",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"\u662f\u5426\u9009\u4e2d/\u6fc0\u6d3b",name:"isSelected",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"\u662f\u5426\u8f7d\u5165\u4e2d",name:"loading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Submit"]={docgenInfo:Z.Submit.__docgenInfo,name:"Form.Submit",path:"../xform/src/form.tsx#Form.Submit"})}catch(Te){}try{Z.Reset.displayName="Form.Reset",Z.Reset.__docgenInfo={description:"",displayName:"Form.Reset",props:{size:{defaultValue:null,description:"\u5c3a\u5bf8",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},shape:{defaultValue:null,description:"\u5916\u89c2",name:"shape",required:!1,type:{name:'"solid" | "text" | "link" | "warning" | "ghost"'}},target:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"target",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:'"a" | "button"'}},type:{defaultValue:null,description:"\u7ea7\u522b",name:"type",required:!1,type:{name:'"normal" | "primary" | "secondary"'}},href:{defaultValue:null,description:'\u4ec5\u5728 as="a" \u65f6\u751f\u6548',name:"href",required:!1,type:{name:"string"}},leftElement:{defaultValue:null,description:"\u5185\u90e8\u5de6\u4fa7\u5143\u7d20",name:"leftElement",required:!1,type:{name:"ReactNode"}},rightElement:{defaultValue:null,description:"\u5185\u90e8\u53f3\u4fa7\u5143\u7d20",name:"rightElement",required:!1,type:{name:"ReactNode"}},htmlType:{defaultValue:null,description:"html \u539f\u751f\u7c7b\u578b",name:"htmlType",required:!1,type:{name:'"button" | "submit" | "reset"'}},isFullWidth:{defaultValue:null,description:"\u6309\u94ae\u957f\u5ea6\u662f\u5426\u5360\u6ee1\u5bb9\u5668",name:"isFullWidth",required:!1,type:{name:"boolean"}},isIconButton:{defaultValue:null,description:"\u662f\u5426\u4e3a\u4ec5\u5305\u542b\u5355\u4e2a\u56fe\u6807\u7684\u6309\u94ae",name:"isIconButton",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"\u662f\u5426\u9009\u4e2d/\u6fc0\u6d3b",name:"isSelected",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"\u662f\u5426\u8f7d\u5165\u4e2d",name:"loading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Reset"]={docgenInfo:Z.Reset.__docgenInfo,name:"Form.Reset",path:"../xform/src/form.tsx#Form.Reset"})}catch(Te){}try{Z.Effect.displayName="Form.Effect",Z.Effect.__docgenInfo={description:"",displayName:"Form.Effect",props:{watch:{defaultValue:null,description:"",name:"watch",required:!0,type:{name:"string | (string | Field<unknown> | AsyncValue<any>)[] | (() => T) | Field<T> | AsyncValue<T>"}},effect:{defaultValue:null,description:"",name:"effect",required:!0,type:{name:"(value: T, detail: { prev: T; next: T; model: IModel<any>; }) => void"}},fireImmediately:{defaultValue:null,description:"",name:"fireImmediately",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Effect"]={docgenInfo:Z.Effect.__docgenInfo,name:"Form.Effect",path:"../xform/src/form.tsx#Form.Effect"})}catch(Te){}try{Z.Array.displayName="Form.Array",Z.Array.__docgenInfo={description:"",displayName:"Form.Array",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"(input: FormArrayLayoutInput) => ReactElement<any, string | JSXElementConstructor<any>>"}},itemFactory:{defaultValue:null,description:"",name:"itemFactory",required:!1,type:{name:"(arrayModel: SubModel<unknown[]>) => any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Array"]={docgenInfo:Z.Array.__docgenInfo,name:"Form.Array",path:"../xform/src/form.tsx#Form.Array"})}catch(Te){}try{Z.Object.displayName="Form.Object",Z.Object.__docgenInfo={description:"",displayName:"Form.Object",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Object"]={docgenInfo:Z.Object.__docgenInfo,name:"Form.Object",path:"../xform/src/form.tsx#Form.Object"})}catch(Te){}try{Z.ModelConsumer.displayName="Form.ModelConsumer",Z.ModelConsumer.__docgenInfo={description:"",displayName:"Form.ModelConsumer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.ModelConsumer"]={docgenInfo:Z.ModelConsumer.__docgenInfo,name:"Form.ModelConsumer",path:"../xform/src/form.tsx#Form.ModelConsumer"})}catch(Te){}try{Z.Layout.displayName="Form.Layout",Z.Layout.__docgenInfo={description:"",displayName:"Form.Layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},labelPosition:{defaultValue:{value:"left"},description:"\u6807\u7b7e\u4f4d\u7f6e\uff0c\u53ef\u9009 'left' \u6216 'top'",name:"labelPosition",required:!1,type:{name:'"top" | "left"'}},labelWidth:{defaultValue:{value:"labelPosition === 'left' ? 120 : 'auto'"},description:"\u6807\u7b7e\u5bbd\u5ea6",name:"labelWidth",required:!1,type:{name:"string | number"}},controlWidth:{defaultValue:{value:320},description:"\u63a7\u4ef6\u5bbd\u5ea6",name:"controlWidth",required:!1,type:{name:"string | number"}},formItemGap:{defaultValue:{value:"labelPosition === 'left' ? 12 : 16"},description:"\u4e24\u4e2a form item \u4e4b\u95f4\u7684\u95f4\u8ddd",name:"formItemGap",required:!1,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.Layout"]={docgenInfo:Z.Layout.__docgenInfo,name:"Form.Layout",path:"../xform/src/form.tsx#Form.Layout"})}catch(Te){}try{Z.ItemGroup.displayName="Form.ItemGroup",Z.ItemGroup.__docgenInfo={description:"",displayName:"Form.ItemGroup",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"",name:"labelWidth",required:!1,type:{name:"string | number"}},controlWidth:{defaultValue:null,description:"",name:"controlWidth",required:!1,type:{name:"string | number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.ItemGroup"]={docgenInfo:Z.ItemGroup.__docgenInfo,name:"Form.ItemGroup",path:"../xform/src/form.tsx#Form.ItemGroup"})}catch(Te){}try{Z.ItemView.displayName="Form.ItemView",Z.ItemView.__docgenInfo={description:"",displayName:"Form.ItemView",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#Form.ItemView"]={docgenInfo:Z.ItemView.__docgenInfo,name:"Form.ItemView",path:"../xform/src/form.tsx#Form.ItemView"})}catch(Te){}try{Q.displayName="FormEnvProvider",Q.__docgenInfo={description:"",displayName:"FormEnvProvider",props:{onSubmit:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onSubmit",required:!1,type:{name:"(submitValues: any, model: IModel<any>) => void"}},onError:{defaultValue:null,description:"\u63d0\u4ea4\u8868\u5355\u65f6\u7684\u51fa\u9519\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Submit /> \u4f7f\u7528",name:"onError",required:!1,type:{name:"(errors: any, model: IModel<any>) => void"}},onReset:{defaultValue:null,description:"\u6e05\u7a7a\u8868\u5355\u65f6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u9700\u914d\u5408 <Form.Reset /> \u4f7f\u7528",name:"onReset",required:!1,type:{name:"(model: IModel<any>) => void"}},isPreview:{defaultValue:{value:"false"},description:"\u662f\u5426\u4e3a\u9884\u89c8\u6001",name:"isPreview",required:!1,type:{name:"boolean"}},validateOnMount:{defaultValue:{value:"false"},description:"\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnMount",required:!1,type:{name:"boolean"}},validateOnChange:{defaultValue:{value:"true"},description:"\u503c\u4fee\u6539\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnChange",required:!1,type:{name:"boolean"}},validateOnBlur:{defaultValue:{value:"true"},description:"\u7ec4\u4ef6\u5931\u53bb\u7126\u70b9\u65f6\u662f\u5426\u89e6\u53d1\u6821\u9a8c",name:"validateOnBlur",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form.tsx#FormEnvProvider"]={docgenInfo:Q.__docgenInfo,name:"FormEnvProvider",path:"../xform/src/form.tsx#FormEnvProvider"})}catch(Te){}var re=n(463),le=n.n(re);function ie(e){return e.value?"\u662f":"\u5426"}function oe(e){return!e}function ue(e){return null==e}function ce(e){return null==e||Array.isArray(e)&&e.every(ue)}function de(e){return e.value}var me=[];function se(e,t){me.push(Object.assign({component:e},t))}function pe(e){var t,n,a=null!==(t=e.statusPropName)&&void 0!==t?t:"status",r=null!==(n=e.valuePropName)&&void 0!==n?n:"value";function l(t){var n,l,i=t.fallbackValue,o=void 0===i?e.fallbackValue:i,u=t.isEmpty,s=void 0===u?e.isEmpty:u,p=t.renderPreview,b=void 0===p?e.renderPreview:p,f=t.componentProps,y=t.name,O=t.field,v=Object(C.a)(t,["fallbackValue","isEmpty","renderPreview","componentProps","name","field"]),g=X(),j=J(),S=function(e,t,n){var a;if(null!=e)a=e;else if("&"===n)a=t._asField();else{if(null==n)throw new Error("<FormItem /> \u5fc5\u987b\u901a\u8fc7 name \u6216 field \u6765\u6307\u5b9a\u5bf9\u5e94\u7684\u6570\u636e\u7d22\u5f15");a=t.getField(n)}return a}(O,g,y),N=Object.assign({fallbackValue:o,isEmpty:s,validateOnChange:j.validateOnChange,validateOnBlur:j.validateOnBlur,validateOnMount:j.validateOnMount},v);S._useTrack(N),Object(d.useEffect)((function(){if(N.validateOnMount){S.validate("mount");var e=S.state.cancelValidation;return function(){null==e||e()}}}),[]);var _,x=S.state.error,V=Object(c.r)(h(S.value,o)),F=Object.assign({},le()(v,["dataSource","readOnly","disabled"]),f,((n={})[a]=h(null==f?void 0:f[a],h(v[a],x?"error":void 0)),n[r]=h(v[r],V),n.onChange=h(v.onChange,S.handleChange),n.onBlur=h(v.onBlur,S.handleBlur),n));return _=j.isPreview&&b?b(F):e.render?e.render(F):m.a.createElement(e.component,Object.assign({},F)),m.a.createElement(L,{label:v.label,help:v.help,asterisk:null!==(l=v.asterisk)&&void 0!==l?l:v.required,error:x,tip:v.tip,style:v.style,className:A()(v.className,{"form-item-preview":j.isPreview})},_)}return l.displayName="FormItem__"+e.name,Object(x.b)(l)}se(F.Switch,{name:"switch",renderPreview:ie,fallbackValue:!1,isEmpty:oe}),se(F.Checkbox,{name:"checkbox",renderPreview:ie,fallbackValue:!1,valuePropName:"checked",isEmpty:oe}),se(F.CheckboxGroup,{name:"checkboxGroup",fallbackValue:[],renderPreview:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:e.defaultValue,a=new F.ListStore(e.dataSource);return n.map((function(e){var t=a.getItem(e);return t?t.label:e})).join("\u3001")},isEmpty:function(e){return null==e||0===e.length}}),se(F.RadioGroup,{name:"radioGroup",fallbackValue:null,renderPreview:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:e.defaultValue,a=new F.ListStore(e.dataSource).getItem(n);return a?a.label:n},isEmpty:oe}),se(F.DatePicker,{name:"datePicker",renderPreview:de,fallbackValue:null,isEmpty:oe}),se(F.DateRangePicker,{name:"dateRangePicker",renderPreview:function(e){var t,n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return(n[0]||"-")+" ~ "+(n[1]||"-")},fallbackValue:[],isEmpty:ce}),se(F.TimePicker,{name:"timePicker",renderPreview:de,fallbackValue:"",isEmpty:oe}),se(F.FilePicker,{name:"filePicker",renderPreview:function(e){var t,n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return m.a.createElement(F.Flex,{spacing:"s",direction:"column"},n.map((function(e){var t=e.id,n=e.name,a=e.url;return m.a.createElement(F.FlexItem,{key:t,bg:"fill.layer1",px:"m"},m.a.createElement(F.Link,{href:a},n))})))},fallbackValue:[],isEmpty:ce}),se(F.MediaPicker,{name:"mediaPicker",renderPreview:function(e){var t,n=(null!==(t=e.value)&&void 0!==t?t:e.defaultValue)||[];return m.a.createElement(F.Flex,{spacing:"m"},n.map((function(e){var t=e.id,n=e.name,a=e.url,r=Object(F.colors)("fill.layer1")+" url("+a+") center center / 100% no-repeat";return m.a.createElement(F.Box,{key:t,size:"100px",title:n,display:"inline-block",style:{background:r}})})))},fallbackValue:[],isEmpty:ce}),se(F.Input,{name:"input",renderPreview:de,fallbackValue:"",isEmpty:oe}),se(F.Textarea,{name:"textarea",renderPreview:de,fallbackValue:"",isEmpty:oe}),se(F.NumberInput,{name:"numberInput",renderPreview:de,fallbackValue:null,isEmpty:ue}),se(F.Range,{name:"range",renderPreview:de,fallbackValue:0,isEmpty:ue}),se(F.Select,{name:"select",renderPreview:de,fallbackValue:null,isEmpty:ue}),se(F.SingleSelect,{name:"singleSelect",renderPreview:de,fallbackValue:null,isEmpty:oe}),se(F.MultiSelect,{name:"multiSelect",renderPreview:de,fallbackValue:[],isEmpty:ce}),se(F.TreeSelect,{name:"treeSelect",renderPreview:de,fallbackValue:null,isEmpty:ce}),se(F.SingleTreeSelect,{name:"singleTreeSelect",renderPreview:de,fallbackValue:null,isEmpty:oe}),se(F.MultiTreeSelect,{name:"multiTreeSelect",renderPreview:de,fallbackValue:[],isEmpty:ce}),se((function(e){var t=e.items,n=e.value,a=e.onChange,r=Object(C.a)(e,["items","value","onChange"]);return m.a.createElement("div",Object.assign({style:{display:"flex",gap:8}},r),t.map((function(e){return m.a.createElement(F.Button,{key:e,type:e===n?"primary":"normal",onClick:function(){return a(e)}},e)})))}),{name:"testButtonGroup",fallbackValue:"",renderPreview:de,isEmpty:oe});for(var be,fe={},he=Object(W.a)(me);!(be=he()).done;){var ye=be.value,Oe=pe(ye);if(fe[ye.name]=Oe,ye.aliases)for(var ve,ge=Object(W.a)(ye.aliases);!(ve=ge()).done;){var je=ve.value;fe[je]=Oe}}var Se=pe({name:"notFound",fallbackValue:null,isEmpty:function(){return!1},render:function(e){var t=e.component;return m.a.createElement("div",{style:{border:"1px dashed red",fontSize:14,padding:4,color:"red"}},m.a.createElement("code",null,"<FormItem component='",t,"' />")," \u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7ec4\u4ef6\uff0c\u8bf7\u68c0\u67e5\u7ec4\u4ef6\u540d\u79f0\u662f\u5426\u62fc\u5199\u6b63\u786e")}});function Ne(e){var t=e.component,n=Object(C.a)(e,["component"]),a=fe[t];return null==a?m.a.createElement(Se,Object.assign({},n,{componentProps:{component:t}})):m.a.createElement(a,n)}Ne.register=function(e){fe[e.name]=pe(e)},Ne.COMPONENT_DICT=fe;try{pe.displayName="createFormItem",pe.__docgenInfo={description:"",displayName:"createFormItem",props:{name:{defaultValue:null,description:"\u540d\u79f0",name:"name",required:!0,type:{name:"string"}},component:{defaultValue:null,description:'\u63a7\u4ef6\u5bf9\u5e94\u7684 React \u7ec4\u4ef6\uff0c\u4f8b\u5982 `<FormItem component="select" />` \u5bf9\u5e94 `Select` \u7ec4\u4ef6.',name:"component",required:!1,type:{name:"ComponentType<FormItemComponentProps>"}},render:{defaultValue:null,description:"\u63a7\u4ef6\u6e32\u67d3\u65b9\u6cd5\uff0c\u4e0e component \u53c2\u6570\u4e8c\u9009\u4e00\uff0c\u4f18\u5148\u7ea7\u9ad8\u4e8e component",name:"render",required:!1,type:{name:"(arg: FormItemComponentProps) => ReactElement<any, string | JSXElementConstructor<any>>"}},valuePropName:{defaultValue:null,description:"\u7ec4\u4ef6\u503c\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a `'value'`",name:"valuePropName",required:!1,type:{name:"string"}},statusPropName:{defaultValue:null,description:"\u7ec4\u4ef6\u72b6\u6001\u503c\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a `'status'`",name:"statusPropName",required:!1,type:{name:"string"}},renderPreview:{defaultValue:null,description:"\u9884\u89c8\u6001\u4e0b\u7ec4\u4ef6\u7684\u6e32\u67d3\u65b9\u6cd5\u3002\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u65b9\u6cd5\uff0c\u9884\u89c8\u6001\u4e0b\u5c06\u4f7f\u7528 render/component \u4f5c\u4e3a\u540e\u5907\u65b9\u6848.",name:"renderPreview",required:!1,type:{name:"(props: FormItemComponentProps) => ReactNode"}},fallbackValue:{defaultValue:null,description:"\u5f53\u6a21\u578b\u4e2d\u7684\u5b57\u6bb5\u503c\u4e3a\u7a7a\uff08undefined\uff09\u65f6\uff0c\u6e32\u67d3\u63a7\u4ef6\u6240\u4f7f\u7528\u7684\u503c",name:"fallbackValue",required:!0,type:{name:"any"}},isEmpty:{defaultValue:null,description:"\u7ec4\u4ef6\u7c7b\u578b\u9ed8\u8ba4\u7684\u7a7a\u503c\u5224\u65ad\u65b9\u6cd5",name:"isEmpty",required:!0,type:{name:"(value: any) => boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-item.tsx#createFormItem"]={docgenInfo:pe.__docgenInfo,name:"createFormItem",path:"../xform/src/form-item.tsx#createFormItem"})}catch(Te){}try{Ne.displayName="FormItem",Ne.__docgenInfo={description:"",displayName:"FormItem",props:{component:{defaultValue:null,description:"",name:"component",required:!0,type:{name:"string"}},componentProps:{defaultValue:null,description:"",name:"componentProps",required:!1,type:{name:"any"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!1,type:{name:"any"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},field:{defaultValue:null,description:"",name:"field",required:!1,type:{name:"Field<unknown>"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(nextValue: any) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"() => void"}},renderPreview:{defaultValue:null,description:"",name:"renderPreview",required:!1,type:{name:"(props: FormItemProps) => ReactNode"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"ReactNode"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"ReactNode"}},asterisk:{defaultValue:null,description:"",name:"asterisk",required:!1,type:{name:"boolean"}},fallbackValue:{defaultValue:null,description:"",name:"fallbackValue",required:!1,type:{name:"any"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"(value: any) => boolean"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},requiredMessage:{defaultValue:null,description:"",name:"requiredMessage",required:!1,type:{name:"string"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"(value: any, field: Field<any>, trigger: FieldValidateTrigger) => string | Promise<any>"}},validateOnMount:{defaultValue:null,description:"",name:"validateOnMount",required:!1,type:{name:"boolean"}},validateOnChange:{defaultValue:null,description:"",name:"validateOnChange",required:!1,type:{name:"boolean"}},validateOnBlur:{defaultValue:null,description:"",name:"validateOnBlur",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/form-item.tsx#FormItem"]={docgenInfo:Ne.__docgenInfo,name:"FormItem",path:"../xform/src/form-item.tsx#FormItem"})}catch(Te){}function _e(e){e.subModels.forEach((function(e,t){e.name=String(t)}))}function Ce(e,t,n){if(null!=e){var a=e.splice(t,1)[0];e.splice(n,0,a)}}function xe(e,t,n){if(null!=e){var a=e[t];e[t]=e[n],e[n]=a}}var Ve={append:Object(c.c)((function(e,t){var n;null==e.values&&(e.values=[]),e.values.push(null!==(n=null==t?void 0:t(e))&&void 0!==n?n:{})})),delete:Object(c.c)((function(e,t){u()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),e.values.splice(t,1),e._proxy.subModels.splice(t,1),_e(e._proxy)})),moveUp:Object(c.c)((function(e,t){0!==t&&(u()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),xe(e.values,t,t-1),xe(e._proxy.subModels,t,t-1),_e(e._proxy))})),moveDown:Object(c.c)((function(e,t){t!==e.values.length-1&&(u()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),xe(e.values,t,t+1),xe(e._proxy.subModels,t,t+1),_e(e._proxy))})),clear:Object(c.c)((function(e){null!=e.values&&0!==e.values.length&&(u()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),e.values=[],e._proxy.subModels.length=0)})),dragAndDrop:Object(c.c)((function(e,t,n){u()(Array.isArray(e._proxy.subModels),"arrayModel.subModels should be Array or observable.array"),Ce(e.values,t,n),Ce(e._proxy.subModels,t,n),_e(e._proxy)})),renderArrayItem:function(e,t,n){return m.a.createElement(Z.Object,{name:String(t)},n)},getKey:function(e,t){return e.getSubModel(t).id}},Fe=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},Ee=function(e){var t=void 0===e?{}:e,n=t.title,a=t.showItemCount,r=t.showItemOrder,l=t.style,i=t.className,o={position:"absolute",top:8,right:8,display:"flex",gap:8,zIndex:20};return function(e){var t=e.arrayModel,u=e.itemContent,d=e.itemCount,s=e.itemFactory;return m.a.createElement("div",{className:A()("xform-array",i),style:Object.assign({marginTop:16,marginBottom:8},l)},(n||a)&&m.a.createElement("h2",null,null!=n?n:"\u5217\u8868"," ",a&&"("+d+")"),0===d&&m.a.createElement("div",{style:{border:"1px dashed #aaa",marginTop:16,padding:8,position:"relative",fontSize:20}},"\u7a7a\u7a7a\u5982\u4e5f~~"),m.a.createElement("div",{className:"xform-array-items"},Fe(d).map((function(n){return m.a.createElement("div",{key:Ve.getKey(t,n),className:"xform-array-item",style:{border:"1px dashed #aaa",marginTop:16,padding:8,position:"relative"}},r&&m.a.createElement("code",{style:{fontSize:16}},t.path.join("."),"#",n),m.a.createElement(Ie,Object.assign({},e,{itemIndex:n,style:o})),Ve.renderArrayItem(t,n,u))}))),m.a.createElement("div",{style:{marginTop:12}},m.a.createElement(F.Button,{onClick:Object(c.c)((function(){Ve.append(t,s)}))},"\u6dfb\u52a0\u4e00\u9879")))}},Ie=Object(x.b)((function(e){var t=e.arrayModel,n=e.itemCount,a=e.itemIndex,r=e.style;return m.a.createElement("div",{style:r},m.a.createElement(F.Button,{size:"small",onClick:Object(c.c)((function(){Ve.delete(t,a)}))},"\u5220\u9664"),m.a.createElement(F.Button,{size:"small",disabled:0===a,onClick:Object(c.c)((function(){Ve.moveUp(t,a)}))},"\u4e0a\u79fb"),m.a.createElement(F.Button,{size:"small",disabled:a===n-1,onClick:Object(c.c)((function(){Ve.moveDown(t,a)}))},"\u4e0b\u79fb"))})),Ae=function(e){var t=void 0===e?{}:e,n=t.defaultColumnWidth,a=t.orderColumn,r=t.operationColumn,l=t.className,i=t.style,o={display:"flex",gap:0};return function(e){var t=e.arrayModel,u=e.itemContent,c=e.itemCount,d=e.itemFactory,s=m.a.Children.toArray(u).filter((function(e){return e.type===Ne})).map((function(e){return Object.assign({name:"string"==typeof e.props.label?e.props.label:null,title:e.props.label},e.props["x-table-column"],{render:function(t,n){return m.a.createElement(Z.Object,{name:String(n.itemIndex)},m.a.cloneElement(e,{className:A()(e.className,"minimal")}))}})}));return null!=a&&s.unshift(Object.assign({name:"#"},a,{getValue:function(e){return e.itemIndex+1}})),null!=r&&s.push(Object.assign({name:""},r,{render:function(t,n){return m.a.createElement(Ie,Object.assign({},e,{itemIndex:n.itemIndex,style:o}))}})),m.a.createElement("div",{style:i,className:l},m.a.createElement(F.BaseTable,{className:"bordered",primaryKey:"rowKey",defaultColumnWidth:n,dataSource:Fe(c).map((function(e){return{rowKey:Ve.getKey(t,e),itemIndex:e}})),columns:s,style:{"--cell-padding":"8px"}}),m.a.createElement("div",{style:{padding:4,height:48,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5"}},m.a.createElement(F.Button,{type:"primary",onClick:function(){Ve.append(t,d)}},"\u6dfb\u52a0\u4e00\u884c")))}};try{Ee.displayName="arrayCard",Ee.__docgenInfo={description:"",displayName:"arrayCard",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showItemCount:{defaultValue:null,description:"",name:"showItemCount",required:!1,type:{name:"boolean"}},showItemOrder:{defaultValue:null,description:"",name:"showItemOrder",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/array-layouts.tsx#arrayCard"]={docgenInfo:Ee.__docgenInfo,name:"arrayCard",path:"../xform/src/array-layouts.tsx#arrayCard"})}catch(Te){}try{Ae.displayName="arrayTable",Ae.__docgenInfo={description:"",displayName:"arrayTable",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/array-layouts.tsx#arrayTable"]={docgenInfo:Ae.__docgenInfo,name:"arrayTable",path:"../xform/src/array-layouts.tsx#arrayTable"})}catch(Te){}var Re=function(){function e(e,t){var n=this,r=void 0===t?{}:t,l=r.field,o=void 0===l?null:l,u=r.fetchLabel,d=void 0===u?null:u,m=r.skipEmptySearchResult,s=void 0!==m&&m,p=r.resetSearchValueWhenValueChange,b=void 0!==p&&p,f=r.debounceTime,h=void 0===f?200:f,y=r.mode,O=void 0===y?"single":y;if(this.search=e,this._isFetchingLabel=!1,this._searchValue="",this._debouncedSearchValue="",this._labelCache=c.l.map({},{deep:!1}),this._disposers=[],this.setSearchValue=Object(c.c)((function(e,t){void 0===t&&(t=!0),n._searchValue=e,t?(clearTimeout(n._debounceHandle),n._debounceHandle=setTimeout(Object(c.c)((function(){n._debouncedSearchValue=n._searchValue})),n.options.debounceTime)):(clearTimeout(n._debounceHandle),n._debouncedSearchValue=n._searchValue)})),this.search=e,this.options={field:o,fetchLabel:d,skipEmptySearchResult:s,resetSearchValueWhenValueChange:b,debounceTime:h,mode:O},Object(c.k)(this,{_searchValue:c.l,_debouncedSearchValue:c.l,dataSource:c.d,selectProps:c.d,_isFetchingLabel:c.l}),this._dataSourceFromSearch$=new U(Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.search(n._debouncedSearchValue);case 2:return t=e.sent,e.abrupt("return",n.options.skipEmptySearchResult&&0===t.length?n._dataSourceFromSearch$.current:t);case 4:case"end":return e.stop()}}),e)}))),[]),this._disposers.push((function(){return n._dataSourceFromSearch$.dispose()})),this.options.field){var v=this.options.field;this._disposers.push(Object(c.o)((function(){return{value:v.value,dataSource:n._dataSourceFromSearch$.current}}),(function(e){for(var t,a=e.value,r=e.dataSource,l=Object(W.a)(r);!(t=l()).done;){var i=t.value;n._labelCache.set(i.value,i.label)}if(null!=a&&null!=n.options.fetchLabel)if("multiple"===n.mode){var o=a.filter((function(e){return!n._labelCache.has(e)}));if(0===o.length)return;n._isFetchingLabel=!0,n.options.fetchLabel(o).then(Object(c.c)((function(e){n._isFetchingLabel=!1,e.forEach((function(e,t){n._labelCache.set(o[t],e)}))})))}else{if(n._labelCache.has(a))return;n._isFetchingLabel=!0,n.options.fetchLabel(a).then(Object(c.c)((function(e){n._isFetchingLabel=!1,n._labelCache.set(a,e)})))}}),{fireImmediately:!0})),this.options.resetSearchValueWhenValueChange&&this._disposers.push(Object(c.o)((function(){return v.value}),(function(){return n._searchValue=""})))}}return e.prototype.dispose=function(){var e=this;Object(c.p)((function(){e._labelCache.clear(),clearTimeout(e._debounceHandle);for(var t,n=Object(W.a)(e._disposers);!(t=n()).done;){(0,t.value)()}}))},Object(r.a)(e,[{key:"mode",get:function(){return this.options.mode}},{key:"dataSource",get:function(){var e=this,t=this._dataSourceFromSearch$.current;if(this.options.field){var n=this.options.field.value,a=new Set(t.map((function(e){return e.value}))),r=("multiple"===this.mode?n:[n]).filter((function(e){return!a.has(e)})).map((function(t){return{label:e._labelCache.get(t),value:t}})).filter((function(t){return null!=t.label&&t.label.includes(e._searchValue)}));return t.concat(r)}return t}},{key:"selectProps",get:function(){return{mode:this.mode,showSearch:!0,filterLocal:!1,searchValue:this._searchValue,onSearch:this.setSearchValue,dataSource:this.dataSource,state:"loading"===this._dataSourceFromSearch$.status||this._isFetchingLabel?"loading":void 0}}}]),e}();try{Re.displayName="RemoteSearch",Re.__docgenInfo={description:"\u8fdc\u7a0b\u641c\u7d22\u8f85\u52a9\u51fd\u6570\uff0c\u7528\u4e8e\u7b80\u5316 Select \u8fdc\u7a0b\u641c\u7d22\u7684\u5b9e\u73b0.\n\n\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u7279\u6027\uff1a\n- \u641c\u7d22\u9632\u6296\uff1a \u9ed8\u8ba4\u4e3a 200ms\uff0c\u53ef\u901a\u8fc7 options.debounceTime \u8fdb\u884c\u8c03\u6574\n- label \u7f13\u5b58\uff1a \u5f53 value \u52a8\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f18\u5148\u4f7f\u7528\u5185\u90e8\u7f13\u5b58\u7684 label\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u6309\u9700\u83b7\u53d6 label\n  \uff08\u9700\u8981\u914d\u7f6e options.field & options.fetchLabel\uff09\n- loading \u72b6\u6001\uff1a dataSource \u52a0\u8f7d\u8fc7\u7a0b\u4e2d\uff0c\u81ea\u52a8\u8bbe\u7f6e state='loading'\n- \u591a\u9009\uff1a\u652f\u6301\u591a\u9009\u6a21\u5f0f\u4e0b\u7684\u8fdc\u7a0b\u641c\u7d22",displayName:"RemoteSearch",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../xform/src/helpers/RemoteSearch.tsx#RemoteSearch"]={docgenInfo:Re.__docgenInfo,name:"RemoteSearch",path:"../xform/src/helpers/RemoteSearch.tsx#RemoteSearch"})}catch(Te){}},230:function(e,t,n){"use strict";e.exports=function(e,t,n,a,r,l,i,o){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,a,r,l,i,o],d=0;(u=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},463:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t,a="object"==typeof self&&self&&self.Object===Object&&self,r=n||a||Function("return this")();function l(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e}var o=Object.prototype,u=o.hasOwnProperty,c=o.toString,d=r.Symbol,m=o.propertyIsEnumerable,s=d?d.isConcatSpreadable:void 0,p=Math.max;function b(e){return h(e)||function(e){return function(e){return y(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?c.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(e)}(e)&&u.call(e,"callee")&&(!m.call(e,"callee")||"[object Arguments]"==c.call(e))}(e)||!!(s&&e&&e[s])}function f(e){if("string"==typeof e||function(e){return"symbol"==typeof e||y(e)&&"[object Symbol]"==c.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var h=Array.isArray;function y(e){return!!e&&"object"==typeof e}var O,v,g=(O=function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var a=-1,r=t.length,l={};++a<r;){var i=t[a],o=e[i];n(o,i)&&(l[i]=o)}return l}(e=Object(e),t,(function(t,n){return n in e}))}(e,function(e,t){for(var n=-1,a=e?e.length:0,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r}(function e(t,n,a,r,l){var o=-1,u=t.length;for(a||(a=b),l||(l=[]);++o<u;){var c=t[o];n>0&&a(c)?n>1?e(c,n-1,a,r,l):i(l,c):r||(l[l.length]=c)}return l}(t,1),f))},v=p(void 0===v?O.length-1:v,0),function(){for(var e=arguments,t=-1,n=p(e.length-v,0),a=Array(n);++t<n;)a[t]=e[v+t];t=-1;for(var r=Array(v+1);++t<v;)r[t]=e[t];return r[v]=a,l(O,this,r)});e.exports=g}).call(this,n(27))}}]);